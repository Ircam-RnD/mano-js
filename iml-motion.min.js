!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).imlMotion=e()}}(function(){return function e(t,r,i){function a(o,s){if(!r[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(n)return n(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){var r=t[o][1][e];return a(r||e)},c,c.exports,e,t,r,i)}return r[o].exports}for(var n="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=a(e("babel-runtime/core-js/set")),o=a(e("babel-runtime/helpers/classCallCheck")),s=a(e("babel-runtime/helpers/createClass")),l=i(e("waves-lfo/client")),u=i(e("lfo-motion")),c=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).frameRate,r=void 0===t?50:t;(0,o.default)(this,e),this.frameRate=r,this._emit=this._emit.bind(this),this.motionInput=new u.source.MotionInput,this.sampler=new u.operator.Sampler({frameRate:r}),this.accSelect=new l.operator.Select({indexes:[0,1,2]}),this.intensity=new u.operator.Intensity({feedback:.7,gain:.07}),this.intensityNormSelect=new l.operator.Select({index:0}),this.intensityClip=new l.operator.Clip({min:0,max:1}),this.intensityPower=new l.operator.Power({exponent:.25}),this.powerClip=new l.operator.Clip({min:.15,max:1}),this.powerScale=new l.operator.Scale({inputMin:.15,inputMax:1,outputMin:0,outputMax:1}),this.normalizeAcc=new l.operator.Multiplier({factor:1/9.81}),this.bandpass=new l.operator.Biquad({type:"bandpass",q:1,f0:5}),this.bandpassGain=new l.operator.Multiplier({factor:1}),this.orientation=new u.operator.Orientation,this.merger=new l.operator.Merger({frameSizes:[1,1,3,3]}),this.bridge=new l.sink.Bridge({processFrame:this._emit,finalizeStream:this._emit}),this.motionInput.connect(this.sampler),this.sampler.connect(this.accSelect),this.accSelect.connect(this.intensity),this.intensity.connect(this.intensityNormSelect),this.intensityNormSelect.connect(this.merger),this.intensityNormSelect.connect(this.intensityClip),this.intensityClip.connect(this.intensityPower),this.intensityPower.connect(this.powerClip),this.powerClip.connect(this.powerScale),this.powerScale.connect(this.merger),this.accSelect.connect(this.normalizeAcc),this.normalizeAcc.connect(this.bandpass),this.bandpass.connect(this.bandpassGain),this.bandpassGain.connect(this.merger),this.sampler.connect(this.orientation),this.orientation.connect(this.merger),this.merger.connect(this.bridge),this._listeners=new n.default}return(0,s.default)(e,[{key:"init",value:function(){var e=this.motionInput.init();return this.frameRate=this.motionInput.streamParams.frameRate,e}},{key:"start",value:function(){this.motionInput.start()}},{key:"stop",value:function(){this.motionInput.stop()}},{key:"addListener",value:function(e){this._listeners.add(e)}},{key:"removeListener",value:function(e){this._listeners.delete(e)}},{key:"_emit",value:function(e){this._listeners.forEach(function(t){return t(e.data)})}}]),e}();r.default=c},{"babel-runtime/core-js/set":27,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"lfo-motion":181,"waves-lfo/client":224}],2:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/helpers/classCallCheck")),n=i(e("babel-runtime/helpers/createClass")),o=function(){function e(){(0,a.default)(this,e)}return(0,n.default)(e,[{key:"play",value:function(e){}},{key:"pause",value:function(){}},{key:"stop",value:function(){}}]),e}();r.default=o},{"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31}],3:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./ProcessedSensors");Object.defineProperty(r,"ProcessedSensors",{enumerable:!0,get:function(){return i(a).default}});var n=e("./TrainingSetReader");Object.defineProperty(r,"TrainingSetReader",{enumerable:!0,get:function(){return i(n).default}});var o=e("../common/TrainingData");Object.defineProperty(r,"Example",{enumerable:!0,get:function(){return o.Example}}),Object.defineProperty(r,"TrainingData",{enumerable:!0,get:function(){return o.TrainingData}});var s=e("../common/XmmProcessor");Object.defineProperty(r,"XmmProcessor",{enumerable:!0,get:function(){return i(s).default}});var l=e("../common/translators");Object.defineProperty(r,"rapidMixToXmmTrainingSet",{enumerable:!0,get:function(){return l.rapidMixToXmmTrainingSet}}),Object.defineProperty(r,"xmmToRapidMixTrainingSet",{enumerable:!0,get:function(){return l.xmmToRapidMixTrainingSet}}),Object.defineProperty(r,"xmmToRapidMixModel",{enumerable:!0,get:function(){return l.xmmToRapidMixModel}}),Object.defineProperty(r,"rapidMixToXmmModel",{enumerable:!0,get:function(){return l.rapidMixToXmmModel}});var u=e("../common/constants");Object.defineProperty(r,"rapidMixDocVersion",{enumerable:!0,get:function(){return u.rapidMixDocVersion}}),Object.defineProperty(r,"rapidMixDefaultLabel",{enumerable:!0,get:function(){return u.rapidMixDefaultLabel}})},{"../common/TrainingData":4,"../common/XmmProcessor":5,"../common/constants":6,"../common/translators":7,"./ProcessedSensors":1,"./TrainingSetReader":2}],4:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.TrainingData=r.Example=void 0;var a=i(e("babel-runtime/core-js/array/from")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=e("../common/constants"),l=function(e){return e.constructor===Float32Array||e.constructor===Float64Array||Array.isArray(e)},u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,n.default)(this,e),null!==t?(this.fixedDimensions=!0,this.inputDimension=t,this.outputDimension=null!==r?r:0):this.fixedDimensions=!1,this.label=s.rapidMixDefaultLabel,this._init()}return(0,o.default)(e,[{key:"addElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._validateInputAndUpdateDimensions(e,t),(e instanceof Float32Array||e instanceof Float64Array)&&(e=(0,a.default)(e)),(t instanceof Float32Array||t instanceof Float64Array)&&(t=(0,a.default)(t)),this.input.push(e),this.outputDimension>0&&this.output.push(t)}},{key:"clear",value:function(){this._init()}},{key:"setLabel",value:function(e){this.label=e}},{key:"getExample",value:function(){return{docType:"rapid-mix:example",docVersion:s.rapidMixDocVersion,payload:{label:this.label,input:this.input.slice(0),output:this.output.slice(0)}}}},{key:"_init",value:function(){this.fixedDimensions||(this.inputDimension=null,this.outputDimension=null),this.input=[],this.output=[]}},{key:"_validateInputAndUpdateDimensions",value:function(e,t){if(!l(e)||t&&!l(t))throw new Error("inputVector and outputVector must be arrays");if(this.inputDimension&&this.outputDimension){if(e.length!=this.inputDimension||t.length!=this.outputDimension)throw new Error("dimensions mismatch")}else this.inputDimension=e.length,this.outputDimension=t?t.length:0}}]),e}(),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];(0,n.default)(this,e),null!==t?(this.fixedDimensions=!0,this.inputDimension=t,this.outputDimension=null!==r?r:0):this.fixedDimensions=!1,this.columnNames=i,this._init()}return(0,o.default)(e,[{key:"addElement",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];t=t.length>3?t.slice(0,3):t;var i=s.rapidMixDefaultLabel,a=null,n=null;switch(t.length){case 0:throw new Error("addElement needs at least an array as argument");case 1:if(!l(t[0]))throw new Error("single argument must be an array");a=t[0];break;case 2:if("string"==typeof t[0]&&l(t[1]))i=t[0],a=t[1];else{if(!l(t[0])||!l(t[1]))throw new Error("two arguments can only be either label and inputVector, or inputVector and outputVector");a=t[0],n=t[1]}break;case 3:if("string"!=typeof t[0]||!l(t[1])||!l(t[2]))throw new Error("three arguments must be label, inputVector and outputVector");i=t[0],a=t[1],n=t[2]}var o=new u;o.setLabel(i),o.addElement(a,n),this.addPhrase(o.getExample())}},{key:"addExample",value:function(e){var t=e.payload;this._checkDimensions(t.input[0],t.output[0]),this.data.push({label:t.label,input:t.input,output:t.output})}},{key:"addTrainingSet",value:function(e){var t=e.payload.data,r=t[0];this._checkDimensions(r.input[0],r.output[0]);for(var i=0;i<t.length;i++)r=t[i],this.data.push({label:r.label,input:r.input,output:r.output})}},{key:"setTrainingSet",value:function(e){if(e){var t=e.payload;this.inputDimension=t.inputDimension,this.outputDimension=t.outputDimension,this.data=t.data,this.columnNames=t.columnNames}else this._init()}},{key:"getTrainingSet",value:function(){return{docType:"rapid-mix:training-set",docVersion:s.rapidMixDocVersion,payload:{inputDimension:this.inputDimension,outputDimension:this.outputDimension,data:this.data}}}},{key:"getLabels",value:function(){for(var e=[],t=0;t<this.data.length;t++){var r=this.data[t].label;-1===e.indexOf(r)&&e.push(r)}return e.sort()}},{key:"clear",value:function(){this._init()}},{key:"_init",value:function(){this.fixedDimensions||(this.inputDimension=null,this.outputDimension=null),this.data=[]}},{key:"removeExamplesByLabel",value:function(e){for(var t=0;t<this.data.length;t++)this.data[t].label===e&&this.data.splice(t,1)}},{key:"_checkDimensions",value:function(e,t){if(!l(e)||t&&!l(t))throw new Error("inputFrame and outputFrame must be arrays");if(this.inputDimension&&this.outputDimension){if(e.length!=this.inputDimension||t.length!=this.outputDimension)throw new Error("dimensions mismatch")}else this.inputDimension=e.length,this.outputDimension=t?t.length:0}},{key:"length",get:function(){return this.data.length}}]),e}();r.Example=u,r.TrainingData=c},{"../common/constants":6,"babel-runtime/core-js/array/from":12,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31}],5:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/number/is-integer")),n=i(e("babel-runtime/core-js/object/keys")),o=i(e("babel-runtime/core-js/get-iterator")),s=i(e("babel-runtime/core-js/array/from")),l=i(e("babel-runtime/core-js/json/stringify")),u=i(e("babel-runtime/core-js/promise")),c=i(e("babel-runtime/helpers/classCallCheck")),f=i(e("babel-runtime/helpers/createClass")),h=e("xmlhttprequest"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("xmm-client")),p=e("../common/constants"),m=(e("../common/translators"),e("../common/validators")),b=new Function("try {return this===global;}catch(e){return false;}"),_={modelType:"gmm",gaussians:1,absoluteRegularization:.01,relativeRegularization:.01,covarianceMode:"full",hierarchical:!0,states:1,transitionMode:"leftright",regressionEstimator:"full",likelihoodWindow:10},v=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).url,r=void 0===t?"https://como.ircam.fr/api/v1/train":t;(0,c.default)(this,e),this.url=r,this._config={},this._decoder=null,this._model=null,this._modelType=null,this._likelihoodWindow=null,this.setConfig(_),this._updateDecoder()}return(0,f.default)(e,[{key:"_updateDecoder",value:function(){switch(this._modelType){case"hhmm":this._decoder=new d.HhmmDecoder(this._likelihoodWindow);break;case"gmm":default:this._decoder=new d.GmmDecoder(this._likelihoodWindow)}}},{key:"train",value:function(e){var t=this;return new u.default(function(r,i){var a={docType:"rapid-mix:rest-api-request",docVersion:"1.0.0",configuration:t.getConfig(),trainingSet:e},n=b()?new h.XMLHttpRequest:new XMLHttpRequest;n.open("post",t.url,!0),n.responseType="json",n.setRequestHeader("Access-Control-Allow-Origin","*"),n.setRequestHeader("Content-Type","application/json");var o="an error occured while training the model. ";b()?n.onreadystatechange=function(){if(4===n.readyState){if(200!==n.status)throw new Error(o+"response : "+n.status+" - "+n.responseText);var e=JSON.parse(n.responseText);t._decoder.setModel(e.model.payload),t._model=e.model,r(e)}}:(n.onload=function(){if(200!==n.status)throw console.log(n.response),new Error(o+"response : "+n.status+" - "+n.response);var e=n.response;t._decoder.setModel(e.model.payload),t._model=e.model,r(e)},n.onerror=function(){throw console.log(n.response),new Error(o+"response : "+n.status+" - "+n.response)}),n.send((0,l.default)(a))})}},{key:"run",value:function(e){return e instanceof Float32Array&&(e=(0,s.default)(e)),this._decoder.filter(e)}},{key:"reset",value:function(){this._decoder.reset&&this._decoder.reset()}},{key:"setConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){if("rapid-mix:configuration"===e.docType&&e.docVersion&&e.payload&&e.target&&e.target.name&&"xmm"===e.target.name.split(":")[0]){var t=e.target.name.split(":");e=e.payload,t.length>1&&m.knownTargets.xmm.indexOf(t[1])>-1&&this._modelType!==t[1]&&(this._modelType=t[1],this._updateDecoder())}if(e.modelType&&m.knownTargets.xmm.indexOf(e.modelType)>-1){var r=e.modelType,i="gmr"===r?"gmm":"hhmr"===r?"hhmm":r;i!==this._modelType&&(this._modelType=i,this._updateDecoder())}var s=!0,l=!1,u=void 0;try{for(var c,f=(0,o.default)((0,n.default)(e));!(s=(c=f.next()).done);s=!0){var h=c.value,d=e[h];"gaussians"===h&&(0,a.default)(d)&&d>0||"absoluteRegularization"===h&&"number"==typeof d&&d>0||"relativeRegularization"===h&&"number"==typeof d&&d>0||"covarianceMode"===h&&"string"==typeof d&&["full","diagonal"].indexOf(d)>-1||"hierarchical"===h&&"boolean"==typeof d||"states"===h&&(0,a.default)(d)&&d>0||"transitionMode"===h&&"string"==typeof d&&["leftright","ergodic"].indexOf(d)>-1||"regressionEstimator"===h&&"string"==typeof d&&["full","windowed","likeliest"].indexOf(d)>-1?this._config[h]=d:"likelihoodWindow"===h&&(0,a.default)(d)&&d>0&&(this._likelihoodWindow=d,null!==this._decoder&&this._decoder.setLikelihoodWindow(this._likelihoodWindow))}}catch(e){l=!0,u=e}finally{try{!s&&f.return&&f.return()}finally{if(l)throw u}}}}},{key:"getConfig",value:function(){return{docType:"rapid-mix:configuration",docVersion:p.rapidMixDocVersion,target:{name:"xmm:"+this._modelType,version:"1.0.0"},payload:this._config}}},{key:"setModel",value:function(e){if(!e)return this.model=null,void this._decoder.setModel(null);var t=e.target.name.split(":");"xmm"===t[0]&&(this._modelType="hhmm"===t[1]?t[1]:"gmm"),this._updateDecoder(),this._model=e,this._decoder.setModel(e.payload)}},{key:"getModel",value:function(){return this._model}}]),e}();r.default=v},{"../common/constants":6,"../common/translators":7,"../common/validators":8,"babel-runtime/core-js/array/from":12,"babel-runtime/core-js/get-iterator":13,"babel-runtime/core-js/json/stringify":15,"babel-runtime/core-js/number/is-integer":18,"babel-runtime/core-js/object/keys":24,"babel-runtime/core-js/promise":26,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,xmlhttprequest:280,"xmm-client":283}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.rapidMixDocVersion="1.0.0",r.rapidMixDefaultLabel="rapidmixDefaultLabel"},{}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.xmmToRapidMixModel=r.rapidMixToXmmTrainingSet=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("xmm-client")),a=e("./constants");r.rapidMixToXmmTrainingSet=function(e){for(var t=e.payload,r={bimodal:t.outputDimension>0,dimension:t.inputDimension+t.outputDimension,dimensionInput:t.outputDimension>0?t.inputDimension:0},a=new i.PhraseMaker(r),n=new i.SetMaker,o=0;o<t.data.length;o++){var s=t.data[o];a.reset(),a.setConfig({label:s.label});for(var l=0;l<s.input.length;l++){var u=s.input[l];t.outputDimension>0&&(u=u.concat(s.output[l])),a.addObservation(u)}n.addPhrase(a.getPhrase())}return n.getTrainingSet()},r.xmmToRapidMixModel=function(e){var t=e.configuration.default_parameters.states?"hhmm":"gmm";return{docType:"rapid-mix:model",docVersion:a.rapidMixDocVersion,target:{name:"xmm:"+t,version:"1.0.0"},payload:e}}},{"./constants":6,"xmm-client":283}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.knownTargets={xmm:["gmm","gmr","hhmm","hhmr"]}},{}],9:[function(e,t,r){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return n(t,a(r,e))}Object.defineProperty(r,"__esModule",{value:!0});var a=Math.min,n=Math.max;r.default={boolean:{definitionTemplate:["default"],typeCheckFunction:function(e,t,r){if("boolean"!=typeof e)throw new Error('Invalid value for boolean param "'+r+'": '+e);return e}},integer:{definitionTemplate:["default"],typeCheckFunction:function(e,t,r){if("number"!=typeof e||Math.floor(e)!==e)throw new Error('Invalid value for integer param "'+r+'": '+e);return i(e,t.min,t.max)}},float:{definitionTemplate:["default"],typeCheckFunction:function(e,t,r){if("number"!=typeof e||e!==e)throw new Error('Invalid value for float param "'+r+'": '+e);return i(e,t.min,t.max)}},string:{definitionTemplate:["default"],typeCheckFunction:function(e,t,r){if("string"!=typeof e)throw new Error('Invalid value for string param "'+r+'": '+e);return e}},enum:{definitionTemplate:["default","list"],typeCheckFunction:function(e,t,r){if(-1===t.list.indexOf(e))throw new Error('Invalid value for enum param "'+r+'": '+e);return e}},any:{definitionTemplate:["default"],typeCheckFunction:function(e,t,r){return e}}}},{}],10:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};for(var i in t)if(!1===e.hasOwnProperty(i))throw new Error('Unknown param "'+i+'"');for(var a in e){if(!0===r.hasOwnProperty(a))throw new Error('Parameter "'+a+'" already defined');var n=e[a];if(!o.default[n.type])throw new Error('Unknown param type "'+n.type+'"');var u=o.default[n.type],c=u.definitionTemplate,f=u.typeCheckFunction,h=void 0;if(h=!0===t.hasOwnProperty(a)?t[a]:n.default,n.initValue=h,!f||!c)throw new Error('Invalid param type definition "'+n.type+'"');r[a]=new s(a,c,f,n,h)}return new l(r,e)}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./paramTemplates")),s=function(){function e(t,r,a,n,o){i(this,e),r.forEach(function(e){if(!1===n.hasOwnProperty(e))throw new Error('Invalid definition for param "'+t+'", '+e+" is not defined")}),this.name=t,this.type=n.type,this.definition=n,!0===this.definition.nullable&&null===o?this.value=null:this.value=a(o,n,t),this._typeCheckFunction=a}return n(e,[{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){if(!0===this.definition.constant)throw new Error('Invalid assignement to constant param "'+this.name+'"');return!0===this.definition.nullable&&null===e||(e=this._typeCheckFunction(e,this.definition,this.name)),this.value!==e&&(this.value=e,!0)}}]),e}(),l=function(){function e(t,r){i(this,e),this._params=t,this._definitions=r,this._globalListeners=new Set,this._paramsListeners={};for(var a in t)this._paramsListeners[a]=new Set}return n(e,[{key:"getDefinitions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e?this._definitions[e]:this._definitions}},{key:"get",value:function(e){if(!this._params[e])throw new Error('Cannot read property value of undefined parameter "'+e+'"');return this._params[e].value}},{key:"set",value:function(e,t){var r=this._params[e],i=r.setValue(t);if(t=r.getValue(),i){var a=r.definition.metas,n=!0,o=!1,s=void 0;try{for(var l,u=this._globalListeners[Symbol.iterator]();!(n=(l=u.next()).done);n=!0)(0,l.value)(e,t,a)}catch(e){o=!0,s=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw s}}var c=!0,f=!1,h=void 0;try{for(var d,p=this._paramsListeners[e][Symbol.iterator]();!(c=(d=p.next()).done);c=!0)(0,d.value)(t,a)}catch(e){f=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(f)throw h}}}return t}},{key:"has",value:function(e){return!!this._params[e]}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==t?this.set(t,param.definition.initValue):Object.keys(this._params).forEach(function(t){return e.reset(t)})}},{key:"addListener",value:function(e){this._globalListeners.add(e)}},{key:"removeListener",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e?this._globalListeners.clear():this._globalListeners.delete(e)}},{key:"addParamListener",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._paramsListeners[e].add(t),r){var i=this._params[e];t(i.getValue(),i.definition.metas)}}},{key:"removeParamListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t?this._paramsListeners[e].clear():this._paramsListeners[e].delete(t)}}]),e}();a.defineType=function(e,t){o.default[e]=t},r.default=a},{"./paramTemplates":9}],11:[function(e,t,r){(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return n()?function(){var t=e.hrtime();return 1e3*(t[0]+1e-9*t[1])}:function(){return performance.now()}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=new Function("try { return this === global; } catch(e) { return false }"),o=function(){function e(r,a){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).errorThreshold,o=void 0===n?.4:n;t(this,e),r=Math.floor(r),this.logicalPeriod=r,this.computedPeriod=r,this.callback=a,this.errorThreshold=o,this.isRunning=!1,this.getTime=i(),this._tick=this._tick.bind(this)}return a(e,[{key:"start",value:function(){this.isRunning||(this.startTime=this.getTime(),this.logicalTime=0,this._tick(),this.isRunning=!0)}},{key:"stop",value:function(){clearTimeout(this.timeoutId),this.isRunning=!1}},{key:"_tick",value:function(){var e=this.getTime(),t=e-this.startTime-this.logicalTime;t>=this.errorThreshold&&(this.computedPeriod=this.computedPeriod-1),t<-this.errorThreshold&&(this.computedPeriod=this.logicalPeriod),this.timeoutId=setTimeout(this._tick,this.computedPeriod),this.callback(this.logicalTime,e,t),this.logicalTime+=this.logicalPeriod}},{key:"period",set:function(e){e=Math.floor(e),this.logicalPeriod=e,this.computedPeriod=e},get:function(){return this.logicalPeriod}}]),e}();r.default=o}).call(this,e("_process"))},{_process:200}],12:[function(e,t,r){t.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":43}],13:[function(e,t,r){t.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":44}],14:[function(e,t,r){t.exports={default:e("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":45}],15:[function(e,t,r){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":46}],16:[function(e,t,r){t.exports={default:e("core-js/library/fn/math/log10"),__esModule:!0}},{"core-js/library/fn/math/log10":47}],17:[function(e,t,r){t.exports={default:e("core-js/library/fn/number/is-finite"),__esModule:!0}},{"core-js/library/fn/number/is-finite":48}],18:[function(e,t,r){t.exports={default:e("core-js/library/fn/number/is-integer"),__esModule:!0}},{"core-js/library/fn/number/is-integer":49}],19:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":50}],20:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":51}],21:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":52}],22:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":53}],23:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":54}],24:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":55}],25:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":56}],26:[function(e,t,r){t.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":57}],27:[function(e,t,r){t.exports={default:e("core-js/library/fn/set"),__esModule:!0}},{"core-js/library/fn/set":58}],28:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":59}],29:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":60}],30:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],31:[function(e,t,r){"use strict";r.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../core-js/object/define-property"));r.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,i.default)(e,a.key,a)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}()},{"../core-js/object/define-property":21}],32:[function(e,t,r){"use strict";r.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../core-js/object/define-property"));r.default=function(e,t,r){return t in e?(0,i.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{"../core-js/object/define-property":21}],33:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var a=i(e("../core-js/object/get-prototype-of")),n=i(e("../core-js/object/get-own-property-descriptor"));r.default=function e(t,r,i){null===t&&(t=Function.prototype);var o=(0,n.default)(t,r);if(void 0===o){var s=(0,a.default)(t);return null===s?void 0:e(s,r,i)}if("value"in o)return o.value;var l=o.get;if(void 0!==l)return l.call(i)}},{"../core-js/object/get-own-property-descriptor":22,"../core-js/object/get-prototype-of":23}],34:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var a=i(e("../core-js/object/set-prototype-of")),n=i(e("../core-js/object/create")),o=i(e("../helpers/typeof"));r.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,n.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.default?(0,a.default)(e,t):e.__proto__=t)}},{"../core-js/object/create":20,"../core-js/object/set-prototype-of":25,"../helpers/typeof":37}],35:[function(e,t,r){"use strict";r.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../helpers/typeof"));r.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":37}],36:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var a=i(e("../core-js/is-iterable")),n=i(e("../core-js/get-iterator"));r.default=function(){function e(e,t){var r=[],i=!0,a=!1,o=void 0;try{for(var s,l=(0,n.default)(e);!(i=(s=l.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if((0,a.default)(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},{"../core-js/get-iterator":13,"../core-js/is-iterable":14}],37:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var a=i(e("../core-js/symbol/iterator")),n=i(e("../core-js/symbol")),o="function"==typeof n.default&&"symbol"==typeof a.default?function(e){return typeof e}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":typeof e};r.default="function"==typeof n.default&&"symbol"===o(a.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":void 0===e?"undefined":o(e)}},{"../core-js/symbol":28,"../core-js/symbol/iterator":29}],38:[function(e,t,r){"use strict";function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function a(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}function n(e,t,r){for(var i,n=[],o=t;o<r;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],n.push(a(i));return n.join("")}r.byteLength=function(e){return 3*e.length/4-i(e)},r.toByteArray=function(e){var t,r,a,n,o,u=e.length;n=i(e),o=new l(3*u/4-n),r=n>0?u-4:u;var c=0;for(t=0;t<r;t+=4)a=s[e.charCodeAt(t)]<<18|s[e.charCodeAt(t+1)]<<12|s[e.charCodeAt(t+2)]<<6|s[e.charCodeAt(t+3)],o[c++]=a>>16&255,o[c++]=a>>8&255,o[c++]=255&a;return 2===n?(a=s[e.charCodeAt(t)]<<2|s[e.charCodeAt(t+1)]>>4,o[c++]=255&a):1===n&&(a=s[e.charCodeAt(t)]<<10|s[e.charCodeAt(t+1)]<<4|s[e.charCodeAt(t+2)]>>2,o[c++]=a>>8&255,o[c++]=255&a),o},r.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a="",s=[],l=0,u=r-i;l<u;l+=16383)s.push(n(e,l,l+16383>u?u:l+16383));return 1===i?(t=e[r-1],a+=o[t>>2],a+=o[t<<4&63],a+="=="):2===i&&(t=(e[r-2]<<8)+e[r-1],a+=o[t>>10],a+=o[t>>4&63],a+=o[t<<2&63],a+="="),s.push(a),s.join("")};for(var o=[],s=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,f=u.length;c<f;++c)o[c]=u[c],s[u.charCodeAt(c)]=c;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}],39:[function(e,t,r){},{}],40:[function(e,t,r){arguments[4][39][0].apply(r,arguments)},{dup:39}],41:[function(e,t,r){"use strict";function i(e){if(e>Y)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=a.prototype,t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(e)}return n(e,t,r)}function n(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return G(e)?f(e,t,r):"string"==typeof e?u(e,t):h(e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function s(e,t,r){return o(e),e<=0?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)}function l(e){return o(e),i(e<0?0:0|d(e))}function u(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!a.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,t),n=i(r),o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}function c(e){for(var t=e.length<0?0:0|d(e.length),r=i(t),a=0;a<t;a+=1)r[a]=255&e[a];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");var i;return i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),i.__proto__=a.prototype,i}function h(e){if(a.isBuffer(e)){var t=0|d(e.length),r=i(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(e){if(W(e)||"length"in e)return"number"!=typeof e.length||H(e.length)?i(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=Y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Y.toString(16)+" bytes");return 0|e}function p(e,t){if(a.isBuffer(e))return e.length;if(W(e)||G(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(e).length;default:if(i)return z(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return M(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function b(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function _(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,H(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=a.from(t,i)),a.isBuffer(t))return 0===t.length?-1:v(e,t,r,i,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,i,a){function n(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,r/=2}var u;if(a){var c=-1;for(u=r;u<s;u++)if(n(e,u)===n(t,-1===c?0:u-c)){if(-1===c&&(c=u),u-c+1===l)return c*o}else-1!==c&&(u-=u-c),c=-1}else for(r+l>s&&(r=s-l),u=r;u>=0;u--){for(var f=!0,h=0;h<l;h++)if(n(e,u+h)!==n(t,h)){f=!1;break}if(f)return u}return-1}function y(e,t,r,i){r=Number(r)||0;var a=e.length-r;i?(i=Number(i))>a&&(i=a):i=a;var n=t.length;if(n%2!=0)throw new TypeError("Invalid hex string");i>n/2&&(i=n/2);for(var o=0;o<i;++o){var s=parseInt(t.substr(2*o,2),16);if(H(s))return o;e[r+o]=s}return o}function g(e,t,r,i){return V(z(t,e.length-r),e,r,i)}function w(e,t,r,i){return V(N(t),e,r,i)}function k(e,t,r,i){return w(e,t,r,i)}function S(e,t,r,i){return V(U(t),e,r,i)}function x(e,t,r,i){return V(q(t,e.length-r),e,r,i)}function M(e,t,r){return 0===t&&r===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,r))}function C(e,t,r){r=Math.min(e.length,r);for(var i=[],a=t;a<r;){var n=e[a],o=null,s=n>239?4:n>223?3:n>191?2:1;if(a+s<=r){var l,u,c,f;switch(s){case 1:n<128&&(o=n);break;case 2:128==(192&(l=e[a+1]))&&(f=(31&n)<<6|63&l)>127&&(o=f);break;case 3:l=e[a+1],u=e[a+2],128==(192&l)&&128==(192&u)&&(f=(15&n)<<12|(63&l)<<6|63&u)>2047&&(f<55296||f>57343)&&(o=f);break;case 4:l=e[a+1],u=e[a+2],c=e[a+3],128==(192&l)&&128==(192&u)&&128==(192&c)&&(f=(15&n)<<18|(63&l)<<12|(63&u)<<6|63&c)>65535&&f<1114112&&(o=f)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),a+=s}return j(i)}function j(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=$));return r}function P(e,t,r){var i="";r=Math.min(e.length,r);for(var a=t;a<r;++a)i+=String.fromCharCode(127&e[a]);return i}function R(e,t,r){var i="";r=Math.min(e.length,r);for(var a=t;a<r;++a)i+=String.fromCharCode(e[a]);return i}function O(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var a="",n=t;n<r;++n)a+=D(e[n]);return a}function E(e,t,r){for(var i=e.slice(t,r),a="",n=0;n<i.length;n+=2)a+=String.fromCharCode(i[n]+256*i[n+1]);return a}function T(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,r,i,n,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function I(e,t,r,i,a,n){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,i,a){return t=+t,r>>>=0,a||I(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,r,i,23,4),r+4}function F(e,t,r,i,a){return t=+t,r>>>=0,a||I(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,r,i,52,8),r+8}function B(e){if((e=e.trim().replace(J,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var r,i=e.length,a=null,n=[],o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&n.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&n.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&n.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&n.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;n.push(r)}else if(r<2048){if((t-=2)<0)break;n.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;n.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return n}function N(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function q(e,t){for(var r,i,a,n=[],o=0;o<e.length&&!((t-=2)<0);++o)i=(r=e.charCodeAt(o))>>8,a=r%256,n.push(a),n.push(i);return n}function U(e){return X.toByteArray(B(e))}function V(e,t,r,i){for(var a=0;a<i&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function G(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function W(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function H(e){return e!==e}var X=e("base64-js"),K=e("ieee754");r.Buffer=a,r.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},r.INSPECT_MAX_BYTES=50;var Y=2147483647;r.kMaxLength=Y,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(e,t,r){return n(e,t,r)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(e,t,r){return s(e,t,r)},a.allocUnsafe=function(e){return l(e)},a.allocUnsafeSlow=function(e){return l(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=a.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):m.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,r,i,n){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;for(var o=n-i,s=r-t,l=Math.min(o,s),u=this.slice(i,n),c=e.slice(t,r),f=0;f<l;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},a.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var n=!1;;)switch(i){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return g(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return k(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(n)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),n=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i=this.subarray(e,t);return i.__proto__=a.prototype,i},a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var i=this[e],a=1,n=0;++n<t&&(a*=256);)i+=this[e+n]*a;return i},a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var i=this[e+--t],a=1;t>0&&(a*=256);)i+=this[e+--t]*a;return i},a.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var i=this[e],a=1,n=0;++n<t&&(a*=256);)i+=this[e+n]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*t)),i},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var i=t,a=1,n=this[e+--i];i>0&&(a*=256);)n+=this[e+--i]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*t)),n},a.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),K.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),K.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),K.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),K.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||A(this,e,t,r,Math.pow(2,8*r)-1,0);var a=1,n=0;for(this[t]=255&e;++n<r&&(a*=256);)this[t+n]=e/a&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||A(this,e,t,r,Math.pow(2,8*r)-1,0);var a=r-1,n=1;for(this[t+a]=255&e;--a>=0&&(n*=256);)this[t+a]=e/n&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){var a=Math.pow(2,8*r-1);A(this,e,t,r,a-1,-a)}var n=0,o=1,s=0;for(this[t]=255&e;++n<r&&(o*=256);)e<0&&0===s&&0!==this[t+n-1]&&(s=1),this[t+n]=(e/o>>0)-s&255;return t+r},a.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){var a=Math.pow(2,8*r-1);A(this,e,t,r,a-1,-a)}var n=r-1,o=1,s=0;for(this[t+n]=255&e;--n>=0&&(o*=256);)e<0&&0===s&&0!==this[t+n+1]&&(s=1),this[t+n]=(e/o>>0)-s&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var a,n=i-r;if(this===e&&r<t&&t<i)for(a=n-1;a>=0;--a)e[a+t]=this[a+r];else if(n<1e3)for(a=0;a<n;++a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+n),t);return n},a.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=a.isBuffer(e)?e:new a(e,i),l=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%l]}return this};var J=/[^+/0-9A-Za-z-_]/g},{"base64-js":38,ieee754:177}],42:[function(e,t,r){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],43:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":75,"../../modules/es6.array.from":149,"../../modules/es6.string.iterator":164}],44:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":147,"../modules/es6.string.iterator":164,"../modules/web.dom.iterable":173}],45:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.is-iterable")},{"../modules/core.is-iterable":148,"../modules/es6.string.iterator":164,"../modules/web.dom.iterable":173}],46:[function(e,t,r){var i=e("../../modules/_core"),a=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(e){return a.stringify.apply(a,arguments)}},{"../../modules/_core":75}],47:[function(e,t,r){e("../../modules/es6.math.log10"),t.exports=e("../../modules/_core").Math.log10},{"../../modules/_core":75,"../../modules/es6.math.log10":151}],48:[function(e,t,r){e("../../modules/es6.number.is-finite"),t.exports=e("../../modules/_core").Number.isFinite},{"../../modules/_core":75,"../../modules/es6.number.is-finite":152}],49:[function(e,t,r){e("../../modules/es6.number.is-integer"),t.exports=e("../../modules/_core").Number.isInteger},{"../../modules/_core":75,"../../modules/es6.number.is-integer":153}],50:[function(e,t,r){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":75,"../../modules/es6.object.assign":154}],51:[function(e,t,r){e("../../modules/es6.object.create");var i=e("../../modules/_core").Object;t.exports=function(e,t){return i.create(e,t)}},{"../../modules/_core":75,"../../modules/es6.object.create":155}],52:[function(e,t,r){e("../../modules/es6.object.define-property");var i=e("../../modules/_core").Object;t.exports=function(e,t,r){return i.defineProperty(e,t,r)}},{"../../modules/_core":75,"../../modules/es6.object.define-property":156}],53:[function(e,t,r){e("../../modules/es6.object.get-own-property-descriptor");var i=e("../../modules/_core").Object;t.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)}},{"../../modules/_core":75,"../../modules/es6.object.get-own-property-descriptor":157}],54:[function(e,t,r){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":75,"../../modules/es6.object.get-prototype-of":158}],55:[function(e,t,r){e("../../modules/es6.object.keys"),t.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":75,"../../modules/es6.object.keys":159}],56:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":75,"../../modules/es6.object.set-prototype-of":160}],57:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),e("../modules/es7.promise.finally"),e("../modules/es7.promise.try"),t.exports=e("../modules/_core").Promise},{"../modules/_core":75,"../modules/es6.object.to-string":161,"../modules/es6.promise":162,"../modules/es6.string.iterator":164,"../modules/es7.promise.finally":166,"../modules/es7.promise.try":167,"../modules/web.dom.iterable":173}],58:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),e("../modules/es7.set.of"),e("../modules/es7.set.from"),t.exports=e("../modules/_core").Set},{"../modules/_core":75,"../modules/es6.object.to-string":161,"../modules/es6.set":163,"../modules/es6.string.iterator":164,"../modules/es7.set.from":168,"../modules/es7.set.of":169,"../modules/es7.set.to-json":170,"../modules/web.dom.iterable":173}],59:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":75,"../../modules/es6.object.to-string":161,"../../modules/es6.symbol":165,"../../modules/es7.symbol.async-iterator":171,"../../modules/es7.symbol.observable":172}],60:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":144,"../../modules/es6.string.iterator":164,"../../modules/web.dom.iterable":173}],61:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],62:[function(e,t,r){t.exports=function(){}},{}],63:[function(e,t,r){t.exports=function(e,t,r,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(r+": incorrect invocation!");return e}},{}],64:[function(e,t,r){var i=e("./_is-object");t.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":96}],65:[function(e,t,r){var i=e("./_for-of");t.exports=function(e,t){var r=[];return i(e,!1,r.push,r,t),r}},{"./_for-of":85}],66:[function(e,t,r){var i=e("./_to-iobject"),a=e("./_to-length"),n=e("./_to-absolute-index");t.exports=function(e){return function(t,r,o){var s,l=i(t),u=a(l.length),c=n(o,u);if(e&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}}},{"./_to-absolute-index":135,"./_to-iobject":137,"./_to-length":138}],67:[function(e,t,r){var i=e("./_ctx"),a=e("./_iobject"),n=e("./_to-object"),o=e("./_to-length"),s=e("./_array-species-create");t.exports=function(e,t){var r=1==e,l=2==e,u=3==e,c=4==e,f=6==e,h=5==e||f,d=t||s;return function(t,s,p){for(var m,b,_=n(t),v=a(_),y=i(s,p,3),g=o(v.length),w=0,k=r?d(t,g):l?d(t,0):void 0;g>w;w++)if((h||w in v)&&(m=v[w],b=y(m,w,_),e))if(r)k[w]=b;else if(b)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:k.push(m)}else if(c)return!1;return f?-1:u||c?c:k}}},{"./_array-species-create":69,"./_ctx":77,"./_iobject":92,"./_to-length":138,"./_to-object":139}],68:[function(e,t,r){var i=e("./_is-object"),a=e("./_is-array"),n=e("./_wks")("species");t.exports=function(e){var t;return a(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!a(t.prototype)||(t=void 0),i(t)&&null===(t=t[n])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":94,"./_is-object":96,"./_wks":145}],69:[function(e,t,r){var i=e("./_array-species-constructor");t.exports=function(e,t){return new(i(e))(t)}},{"./_array-species-constructor":68}],70:[function(e,t,r){var i=e("./_cof"),a=e("./_wks")("toStringTag"),n="Arguments"==i(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=o(t=Object(e),a))?r:n?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":71,"./_wks":145}],71:[function(e,t,r){var i={}.toString;t.exports=function(e){return i.call(e).slice(8,-1)}},{}],72:[function(e,t,r){"use strict";var i=e("./_object-dp").f,a=e("./_object-create"),n=e("./_redefine-all"),o=e("./_ctx"),s=e("./_an-instance"),l=e("./_for-of"),u=e("./_iter-define"),c=e("./_iter-step"),f=e("./_set-species"),h=e("./_descriptors"),d=e("./_meta").fastKey,p=e("./_validate-collection"),m=h?"_s":"size",b=function(e,t){var r,i=d(t);if("F"!==i)return e._i[i];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,u){var c=e(function(e,i){s(e,c,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=i&&l(i,r,e[u],e)});return n(c.prototype,{clear:function(){for(var e=p(this,t),r=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete r[i.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=p(this,t),i=b(r,e);if(i){var a=i.n,n=i.p;delete r._i[i.i],i.r=!0,n&&(n.n=a),a&&(a.p=n),r._f==i&&(r._f=a),r._l==i&&(r._l=n),r[m]--}return!!i},forEach:function(e){p(this,t);for(var r,i=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(i(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!b(p(this,t),e)}}),h&&i(c.prototype,"size",{get:function(){return p(this,t)[m]}}),c},def:function(e,t,r){var i,a,n=b(e,t);return n?n.v=r:(e._l=n={i:a=d(t,!0),k:t,v:r,p:i=e._l,n:void 0,r:!1},e._f||(e._f=n),i&&(i.n=n),e[m]++,"F"!==a&&(e._i[a]=n)),e},getEntry:b,setStrong:function(e,t,r){u(e,t,function(e,r){this._t=p(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?c(0,r.k):"values"==t?c(0,r.v):c(0,[r.k,r.v]):(e._t=void 0,c(1))},r?"entries":"values",!r,!0),f(t)}}},{"./_an-instance":63,"./_ctx":77,"./_descriptors":79,"./_for-of":85,"./_iter-define":99,"./_iter-step":101,"./_meta":104,"./_object-create":108,"./_object-dp":109,"./_redefine-all":123,"./_set-species":128,"./_validate-collection":142}],73:[function(e,t,r){var i=e("./_classof"),a=e("./_array-from-iterable");t.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return a(this)}}},{"./_array-from-iterable":65,"./_classof":70}],74:[function(e,t,r){"use strict";var i=e("./_global"),a=e("./_export"),n=e("./_meta"),o=e("./_fails"),s=e("./_hide"),l=e("./_redefine-all"),u=e("./_for-of"),c=e("./_an-instance"),f=e("./_is-object"),h=e("./_set-to-string-tag"),d=e("./_object-dp").f,p=e("./_array-methods")(0),m=e("./_descriptors");t.exports=function(e,t,r,b,_,v){var y=i[e],g=y,w=_?"set":"add",k=g&&g.prototype,S={};return m&&"function"==typeof g&&(v||k.forEach&&!o(function(){(new g).entries().next()}))?(g=t(function(t,r){c(t,g,e,"_c"),t._c=new y,void 0!=r&&u(r,_,t[w],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in k&&(!v||"clear"!=e)&&s(g.prototype,e,function(r,i){if(c(this,g,e),!t&&v&&!f(r))return"get"==e&&void 0;var a=this._c[e](0===r?0:r,i);return t?this:a})}),v||d(g.prototype,"size",{get:function(){return this._c.size}})):(g=b.getConstructor(t,e,_,w),l(g.prototype,r),n.NEED=!0),h(g,e),S[e]=g,a(a.G+a.W+a.F,S),v||b.setStrong(g,e,_),g}},{"./_an-instance":63,"./_array-methods":67,"./_descriptors":79,"./_export":83,"./_fails":84,"./_for-of":85,"./_global":86,"./_hide":88,"./_is-object":96,"./_meta":104,"./_object-dp":109,"./_redefine-all":123,"./_set-to-string-tag":129}],75:[function(e,t,r){var i=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=i)},{}],76:[function(e,t,r){"use strict";var i=e("./_object-dp"),a=e("./_property-desc");t.exports=function(e,t,r){t in e?i.f(e,t,a(0,r)):e[t]=r}},{"./_object-dp":109,"./_property-desc":122}],77:[function(e,t,r){var i=e("./_a-function");t.exports=function(e,t,r){if(i(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,i){return e.call(t,r,i)};case 3:return function(r,i,a){return e.call(t,r,i,a)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":61}],78:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],79:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":84}],80:[function(e,t,r){var i=e("./_is-object"),a=e("./_global").document,n=i(a)&&i(a.createElement);t.exports=function(e){return n?a.createElement(e):{}}},{"./_global":86,"./_is-object":96}],81:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],82:[function(e,t,r){var i=e("./_object-keys"),a=e("./_object-gops"),n=e("./_object-pie");t.exports=function(e){var t=i(e),r=a.f;if(r)for(var o,s=r(e),l=n.f,u=0;s.length>u;)l.call(e,o=s[u++])&&t.push(o);return t}},{"./_object-gops":114,"./_object-keys":117,"./_object-pie":118}],83:[function(e,t,r){var i=e("./_global"),a=e("./_core"),n=e("./_ctx"),o=e("./_hide"),s=function(e,t,r){var l,u,c,f=e&s.F,h=e&s.G,d=e&s.S,p=e&s.P,m=e&s.B,b=e&s.W,_=h?a:a[t]||(a[t]={}),v=_.prototype,y=h?i:d?i[t]:(i[t]||{}).prototype;h&&(r=t);for(l in r)(u=!f&&y&&void 0!==y[l])&&l in _||(c=u?y[l]:r[l],_[l]=h&&"function"!=typeof y[l]?r[l]:m&&u?n(c,i):b&&y[l]==c?function(e){var t=function(t,r,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):p&&"function"==typeof c?n(Function.call,c):c,p&&((_.virtual||(_.virtual={}))[l]=c,e&s.R&&v&&!v[l]&&o(v,l,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},{"./_core":75,"./_ctx":77,"./_global":86,"./_hide":88}],84:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],85:[function(e,t,r){var i=e("./_ctx"),a=e("./_iter-call"),n=e("./_is-array-iter"),o=e("./_an-object"),s=e("./_to-length"),l=e("./core.get-iterator-method"),u={},c={};(r=t.exports=function(e,t,r,f,h){var d,p,m,b,_=h?function(){return e}:l(e),v=i(r,f,t?2:1),y=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(n(_)){for(d=s(e.length);d>y;y++)if((b=t?v(o(p=e[y])[0],p[1]):v(e[y]))===u||b===c)return b}else for(m=_.call(e);!(p=m.next()).done;)if((b=a(m,v,p.value,t))===u||b===c)return b}).BREAK=u,r.RETURN=c},{"./_an-object":64,"./_ctx":77,"./_is-array-iter":93,"./_iter-call":97,"./_to-length":138,"./core.get-iterator-method":146}],86:[function(e,t,r){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},{}],87:[function(e,t,r){var i={}.hasOwnProperty;t.exports=function(e,t){return i.call(e,t)}},{}],88:[function(e,t,r){var i=e("./_object-dp"),a=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return i.f(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":79,"./_object-dp":109,"./_property-desc":122}],89:[function(e,t,r){var i=e("./_global").document;t.exports=i&&i.documentElement},{"./_global":86}],90:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":79,"./_dom-create":80,"./_fails":84}],91:[function(e,t,r){t.exports=function(e,t,r){var i=void 0===r;switch(t.length){case 0:return i?e():e.call(r);case 1:return i?e(t[0]):e.call(r,t[0]);case 2:return i?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],92:[function(e,t,r){var i=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},{"./_cof":71}],93:[function(e,t,r){var i=e("./_iterators"),a=e("./_wks")("iterator"),n=Array.prototype;t.exports=function(e){return void 0!==e&&(i.Array===e||n[a]===e)}},{"./_iterators":102,"./_wks":145}],94:[function(e,t,r){var i=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==i(e)}},{"./_cof":71}],95:[function(e,t,r){var i=e("./_is-object"),a=Math.floor;t.exports=function(e){return!i(e)&&isFinite(e)&&a(e)===e}},{"./_is-object":96}],96:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],97:[function(e,t,r){var i=e("./_an-object");t.exports=function(e,t,r,a){try{return a?t(i(r)[0],r[1]):t(r)}catch(t){var n=e.return;throw void 0!==n&&i(n.call(e)),t}}},{"./_an-object":64}],98:[function(e,t,r){"use strict";var i=e("./_object-create"),a=e("./_property-desc"),n=e("./_set-to-string-tag"),o={};e("./_hide")(o,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=i(o,{next:a(1,r)}),n(e,t+" Iterator")}},{"./_hide":88,"./_object-create":108,"./_property-desc":122,"./_set-to-string-tag":129,"./_wks":145}],99:[function(e,t,r){"use strict";var i=e("./_library"),a=e("./_export"),n=e("./_redefine"),o=e("./_hide"),s=e("./_has"),l=e("./_iterators"),u=e("./_iter-create"),c=e("./_set-to-string-tag"),f=e("./_object-gpo"),h=e("./_wks")("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(e,t,r,m,b,_,v){u(r,t,m);var y,g,w,k=function(e){if(!d&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},S=t+" Iterator",x="values"==b,M=!1,C=e.prototype,j=C[h]||C["@@iterator"]||b&&C[b],P=j||k(b),R=b?x?k("entries"):P:void 0,O="Array"==t?C.entries||j:j;if(O&&(w=f(O.call(new e)))!==Object.prototype&&w.next&&(c(w,S,!0),i||s(w,h)||o(w,h,p)),x&&j&&"values"!==j.name&&(M=!0,P=function(){return j.call(this)}),i&&!v||!d&&!M&&C[h]||o(C,h,P),l[t]=P,l[S]=p,b)if(y={values:x?P:k("values"),keys:_?P:k("keys"),entries:R},v)for(g in y)g in C||n(C,g,y[g]);else a(a.P+a.F*(d||M),t,y);return y}},{"./_export":83,"./_has":87,"./_hide":88,"./_iter-create":98,"./_iterators":102,"./_library":103,"./_object-gpo":115,"./_redefine":124,"./_set-to-string-tag":129,"./_wks":145}],100:[function(e,t,r){var i=e("./_wks")("iterator"),a=!1;try{var n=[7][i]();n.return=function(){a=!0},Array.from(n,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!a)return!1;var r=!1;try{var n=[7],o=n[i]();o.next=function(){return{done:r=!0}},n[i]=function(){return o},e(n)}catch(e){}return r}},{"./_wks":145}],101:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],102:[function(e,t,r){t.exports={}},{}],103:[function(e,t,r){t.exports=!0},{}],104:[function(e,t,r){var i=e("./_uid")("meta"),a=e("./_is-object"),n=e("./_has"),o=e("./_object-dp").f,s=0,l=Object.isExtensible||function(){return!0},u=!e("./_fails")(function(){return l(Object.preventExtensions({}))}),c=function(e){o(e,i,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},getWeak:function(e,t){if(!n(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},onFreeze:function(e){return u&&f.NEED&&l(e)&&!n(e,i)&&c(e),e}}},{"./_fails":84,"./_has":87,"./_is-object":96,"./_object-dp":109,"./_uid":141}],105:[function(e,t,r){var i=e("./_global"),a=e("./_task").set,n=i.MutationObserver||i.WebKitMutationObserver,o=i.process,s=i.Promise,l="process"==e("./_cof")(o);t.exports=function(){var e,t,r,u=function(){var i,a;for(l&&(i=o.domain)&&i.exit();e;){a=e.fn,e=e.next;try{a()}catch(i){throw e?r():t=void 0,i}}t=void 0,i&&i.enter()};if(l)r=function(){o.nextTick(u)};else if(n){var c=!0,f=document.createTextNode("");new n(u).observe(f,{characterData:!0}),r=function(){f.data=c=!c}}else if(s&&s.resolve){var h=s.resolve();r=function(){h.then(u)}}else r=function(){a.call(i,u)};return function(i){var a={fn:i,next:void 0};t&&(t.next=a),e||(e=a,r()),t=a}}},{"./_cof":71,"./_global":86,"./_task":134}],106:[function(e,t,r){"use strict";function i(e){var t,r;this.promise=new e(function(e,i){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=i}),this.resolve=a(t),this.reject=a(r)}var a=e("./_a-function");t.exports.f=function(e){return new i(e)}},{"./_a-function":61}],107:[function(e,t,r){"use strict";var i=e("./_object-keys"),a=e("./_object-gops"),n=e("./_object-pie"),o=e("./_to-object"),s=e("./_iobject"),l=Object.assign;t.exports=!l||e("./_fails")(function(){var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[r]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var r=o(e),l=arguments.length,u=1,c=a.f,f=n.f;l>u;)for(var h,d=s(arguments[u++]),p=c?i(d).concat(c(d)):i(d),m=p.length,b=0;m>b;)f.call(d,h=p[b++])&&(r[h]=d[h]);return r}:l},{"./_fails":84,"./_iobject":92,"./_object-gops":114,"./_object-keys":117,"./_object-pie":118,"./_to-object":139}],108:[function(e,t,r){var i=e("./_an-object"),a=e("./_object-dps"),n=e("./_enum-bug-keys"),o=e("./_shared-key")("IE_PROTO"),s=function(){},l=function(){var t,r=e("./_dom-create")("iframe"),i=n.length;for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",(t=r.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;i--;)delete l.prototype[n[i]];return l()};t.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=i(e),r=new s,s.prototype=null,r[o]=e):r=l(),void 0===t?r:a(r,t)}},{"./_an-object":64,"./_dom-create":80,"./_enum-bug-keys":81,"./_html":89,"./_object-dps":110,"./_shared-key":130}],109:[function(e,t,r){var i=e("./_an-object"),a=e("./_ie8-dom-define"),n=e("./_to-primitive"),o=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(i(e),t=n(t,!0),i(r),a)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":64,"./_descriptors":79,"./_ie8-dom-define":90,"./_to-primitive":140}],110:[function(e,t,r){var i=e("./_object-dp"),a=e("./_an-object"),n=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){a(e);for(var r,o=n(t),s=o.length,l=0;s>l;)i.f(e,r=o[l++],t[r]);return e}},{"./_an-object":64,"./_descriptors":79,"./_object-dp":109,"./_object-keys":117}],111:[function(e,t,r){var i=e("./_object-pie"),a=e("./_property-desc"),n=e("./_to-iobject"),o=e("./_to-primitive"),s=e("./_has"),l=e("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?u:function(e,t){if(e=n(e),t=o(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return a(!i.f.call(e,t),e[t])}},{"./_descriptors":79,"./_has":87,"./_ie8-dom-define":90,"./_object-pie":118,"./_property-desc":122,"./_to-iobject":137,"./_to-primitive":140}],112:[function(e,t,r){var i=e("./_to-iobject"),a=e("./_object-gopn").f,n={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return a(e)}catch(e){return o.slice()}};t.exports.f=function(e){return o&&"[object Window]"==n.call(e)?s(e):a(i(e))}},{"./_object-gopn":113,"./_to-iobject":137}],113:[function(e,t,r){var i=e("./_object-keys-internal"),a=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return i(e,a)}},{"./_enum-bug-keys":81,"./_object-keys-internal":116}],114:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],115:[function(e,t,r){var i=e("./_has"),a=e("./_to-object"),n=e("./_shared-key")("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=a(e),i(e,n)?e[n]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},{"./_has":87,"./_shared-key":130,"./_to-object":139}],116:[function(e,t,r){var i=e("./_has"),a=e("./_to-iobject"),n=e("./_array-includes")(!1),o=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,s=a(e),l=0,u=[];for(r in s)r!=o&&i(s,r)&&u.push(r);for(;t.length>l;)i(s,r=t[l++])&&(~n(u,r)||u.push(r));return u}},{"./_array-includes":66,"./_has":87,"./_shared-key":130,"./_to-iobject":137}],117:[function(e,t,r){var i=e("./_object-keys-internal"),a=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return i(e,a)}},{"./_enum-bug-keys":81,"./_object-keys-internal":116}],118:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],119:[function(e,t,r){var i=e("./_export"),a=e("./_core"),n=e("./_fails");t.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],o={};o[e]=t(r),i(i.S+i.F*n(function(){r(1)}),"Object",o)}},{"./_core":75,"./_export":83,"./_fails":84}],120:[function(e,t,r){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],121:[function(e,t,r){var i=e("./_an-object"),a=e("./_is-object"),n=e("./_new-promise-capability");t.exports=function(e,t){if(i(e),a(t)&&t.constructor===e)return t;var r=n.f(e);return(0,r.resolve)(t),r.promise}},{"./_an-object":64,"./_is-object":96,"./_new-promise-capability":106}],122:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],123:[function(e,t,r){var i=e("./_hide");t.exports=function(e,t,r){for(var a in t)r&&e[a]?e[a]=t[a]:i(e,a,t[a]);return e}},{"./_hide":88}],124:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":88}],125:[function(e,t,r){"use strict";var i=e("./_export"),a=e("./_a-function"),n=e("./_ctx"),o=e("./_for-of");t.exports=function(e){i(i.S,e,{from:function(e){var t,r,i,s,l=arguments[1];return a(this),(t=void 0!==l)&&a(l),void 0==e?new this:(r=[],t?(i=0,s=n(l,arguments[2],2),o(e,!1,function(e){r.push(s(e,i++))})):o(e,!1,r.push,r),new this(r))}})}},{"./_a-function":61,"./_ctx":77,"./_export":83,"./_for-of":85}],126:[function(e,t,r){"use strict";var i=e("./_export");t.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":83}],127:[function(e,t,r){var i=e("./_is-object"),a=e("./_an-object"),n=function(e,t){if(a(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,i){try{(i=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function(e,t){return n(e,t),r?e.__proto__=t:i(e,t),e}}({},!1):void 0),check:n}},{"./_an-object":64,"./_ctx":77,"./_is-object":96,"./_object-gopd":111}],128:[function(e,t,r){"use strict";var i=e("./_global"),a=e("./_core"),n=e("./_object-dp"),o=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof a[e]?a[e]:i[e];o&&t&&!t[s]&&n.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":75,"./_descriptors":79,"./_global":86,"./_object-dp":109,"./_wks":145}],129:[function(e,t,r){var i=e("./_object-dp").f,a=e("./_has"),n=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!a(e=r?e:e.prototype,n)&&i(e,n,{configurable:!0,value:t})}},{"./_has":87,"./_object-dp":109,"./_wks":145}],130:[function(e,t,r){var i=e("./_shared")("keys"),a=e("./_uid");t.exports=function(e){return i[e]||(i[e]=a(e))}},{"./_shared":131,"./_uid":141}],131:[function(e,t,r){var i=e("./_global"),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});t.exports=function(e){return a[e]||(a[e]={})}},{"./_global":86}],132:[function(e,t,r){var i=e("./_an-object"),a=e("./_a-function"),n=e("./_wks")("species");t.exports=function(e,t){var r,o=i(e).constructor;return void 0===o||void 0==(r=i(o)[n])?t:a(r)}},{"./_a-function":61,"./_an-object":64,"./_wks":145}],133:[function(e,t,r){var i=e("./_to-integer"),a=e("./_defined");t.exports=function(e){return function(t,r){var n,o,s=String(a(t)),l=i(r),u=s.length;return l<0||l>=u?e?"":void 0:(n=s.charCodeAt(l))<55296||n>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):n:e?s.slice(l,l+2):o-56320+(n-55296<<10)+65536}}},{"./_defined":78,"./_to-integer":136}],134:[function(e,t,r){var i,a,n,o=e("./_ctx"),s=e("./_invoke"),l=e("./_html"),u=e("./_dom-create"),c=e("./_global"),f=c.process,h=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,m=c.Dispatch,b=0,_={},v=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},y=function(e){v.call(e.data)};h&&d||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return _[++b]=function(){s("function"==typeof e?e:Function(e),t)},i(b),b},d=function(e){delete _[e]},"process"==e("./_cof")(f)?i=function(e){f.nextTick(o(v,e,1))}:m&&m.now?i=function(e){m.now(o(v,e,1))}:p?(n=(a=new p).port2,a.port1.onmessage=y,i=o(n.postMessage,n,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",y,!1)):i="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(o(v,e,1),0)}),t.exports={set:h,clear:d}},{"./_cof":71,"./_ctx":77,"./_dom-create":80,"./_global":86,"./_html":89,"./_invoke":91}],135:[function(e,t,r){var i=e("./_to-integer"),a=Math.max,n=Math.min;t.exports=function(e,t){return(e=i(e))<0?a(e+t,0):n(e,t)}},{"./_to-integer":136}],136:[function(e,t,r){var i=Math.ceil,a=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?a:i)(e)}},{}],137:[function(e,t,r){var i=e("./_iobject"),a=e("./_defined");t.exports=function(e){return i(a(e))}},{"./_defined":78,"./_iobject":92}],138:[function(e,t,r){var i=e("./_to-integer"),a=Math.min;t.exports=function(e){return e>0?a(i(e),9007199254740991):0}},{"./_to-integer":136}],139:[function(e,t,r){var i=e("./_defined");t.exports=function(e){return Object(i(e))}},{"./_defined":78}],140:[function(e,t,r){var i=e("./_is-object");t.exports=function(e,t){if(!i(e))return e;var r,a;if(t&&"function"==typeof(r=e.toString)&&!i(a=r.call(e)))return a;if("function"==typeof(r=e.valueOf)&&!i(a=r.call(e)))return a;if(!t&&"function"==typeof(r=e.toString)&&!i(a=r.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":96}],141:[function(e,t,r){var i=0,a=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+a).toString(36))}},{}],142:[function(e,t,r){var i=e("./_is-object");t.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":96}],143:[function(e,t,r){var i=e("./_global"),a=e("./_core"),n=e("./_library"),o=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=a.Symbol||(a.Symbol=n?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},{"./_core":75,"./_global":86,"./_library":103,"./_object-dp":109,"./_wks-ext":144}],144:[function(e,t,r){r.f=e("./_wks")},{"./_wks":145}],145:[function(e,t,r){var i=e("./_shared")("wks"),a=e("./_uid"),n=e("./_global").Symbol,o="function"==typeof n;(t.exports=function(e){return i[e]||(i[e]=o&&n[e]||(o?n:a)("Symbol."+e))}).store=i},{"./_global":86,"./_shared":131,"./_uid":141}],146:[function(e,t,r){var i=e("./_classof"),a=e("./_wks")("iterator"),n=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||n[i(e)]}},{"./_classof":70,"./_core":75,"./_iterators":102,"./_wks":145}],147:[function(e,t,r){var i=e("./_an-object"),a=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},{"./_an-object":64,"./_core":75,"./core.get-iterator-method":146}],148:[function(e,t,r){var i=e("./_classof"),a=e("./_wks")("iterator"),n=e("./_iterators");t.exports=e("./_core").isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||n.hasOwnProperty(i(t))}},{"./_classof":70,"./_core":75,"./_iterators":102,"./_wks":145}],149:[function(e,t,r){"use strict";var i=e("./_ctx"),a=e("./_export"),n=e("./_to-object"),o=e("./_iter-call"),s=e("./_is-array-iter"),l=e("./_to-length"),u=e("./_create-property"),c=e("./core.get-iterator-method");a(a.S+a.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,a,f,h=n(e),d="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,b=void 0!==m,_=0,v=c(h);if(b&&(m=i(m,p>2?arguments[2]:void 0,2)),void 0==v||d==Array&&s(v))for(r=new d(t=l(h.length));t>_;_++)u(r,_,b?m(h[_],_):h[_]);else for(f=v.call(h),r=new d;!(a=f.next()).done;_++)u(r,_,b?o(f,m,[a.value,_],!0):a.value);return r.length=_,r}})},{"./_create-property":76,"./_ctx":77,"./_export":83,"./_is-array-iter":93,"./_iter-call":97,"./_iter-detect":100,"./_to-length":138,"./_to-object":139,"./core.get-iterator-method":146}],150:[function(e,t,r){"use strict";var i=e("./_add-to-unscopables"),a=e("./_iter-step"),n=e("./_iterators"),o=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,a(1)):"keys"==t?a(0,r):"values"==t?a(0,e[r]):a(0,[r,e[r]])},"values"),n.Arguments=n.Array,i("keys"),i("values"),i("entries")},{"./_add-to-unscopables":62,"./_iter-define":99,"./_iter-step":101,"./_iterators":102,"./_to-iobject":137}],151:[function(e,t,r){var i=e("./_export");i(i.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},{"./_export":83}],152:[function(e,t,r){var i=e("./_export"),a=e("./_global").isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&a(e)}})},{"./_export":83,"./_global":86}],153:[function(e,t,r){var i=e("./_export");i(i.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":83,"./_is-integer":95}],154:[function(e,t,r){var i=e("./_export");i(i.S+i.F,"Object",{assign:e("./_object-assign")})},{"./_export":83,"./_object-assign":107}],155:[function(e,t,r){var i=e("./_export");i(i.S,"Object",{create:e("./_object-create")})},{"./_export":83,"./_object-create":108}],156:[function(e,t,r){var i=e("./_export");i(i.S+i.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":79,"./_export":83,"./_object-dp":109}],157:[function(e,t,r){var i=e("./_to-iobject"),a=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return a(i(e),t)}})},{"./_object-gopd":111,"./_object-sap":119,"./_to-iobject":137}],158:[function(e,t,r){var i=e("./_to-object"),a=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return a(i(e))}})},{"./_object-gpo":115,"./_object-sap":119,"./_to-object":139}],159:[function(e,t,r){var i=e("./_to-object"),a=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return a(i(e))}})},{"./_object-keys":117,"./_object-sap":119,"./_to-object":139}],160:[function(e,t,r){var i=e("./_export");i(i.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":83,"./_set-proto":127}],161:[function(e,t,r){arguments[4][39][0].apply(r,arguments)},{dup:39}],162:[function(e,t,r){"use strict";var i,a,n,o,s=e("./_library"),l=e("./_global"),u=e("./_ctx"),c=e("./_classof"),f=e("./_export"),h=e("./_is-object"),d=e("./_a-function"),p=e("./_an-instance"),m=e("./_for-of"),b=e("./_species-constructor"),_=e("./_task").set,v=e("./_microtask")(),y=e("./_new-promise-capability"),g=e("./_perform"),w=e("./_promise-resolve"),k=l.TypeError,S=l.process,x=l.Promise,M="process"==c(S),C=function(){},j=a=y.f,P=!!function(){try{var t=x.resolve(1),r=(t.constructor={})[e("./_wks")("species")]=function(e){e(C,C)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(C)instanceof r}catch(e){}}(),R=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},O=function(e,t){if(!e._n){e._n=!0;var r=e._c;v(function(){for(var i=e._v,a=1==e._s,n=0;r.length>n;)!function(t){var r,n,o=a?t.ok:t.fail,s=t.resolve,l=t.reject,u=t.domain;try{o?(a||(2==e._h&&A(e),e._h=1),!0===o?r=i:(u&&u.enter(),r=o(i),u&&u.exit()),r===t.promise?l(k("Promise-chain cycle")):(n=R(r))?n.call(r,s,l):s(r)):l(i)}catch(e){l(e)}}(r[n++]);e._c=[],e._n=!1,t&&!e._h&&E(e)})}},E=function(e){_.call(l,function(){var t,r,i,a=e._v,n=T(e);if(n&&(t=g(function(){M?S.emit("unhandledRejection",a,e):(r=l.onunhandledrejection)?r({promise:e,reason:a}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",a)}),e._h=M||T(e)?2:1),e._a=void 0,n&&t.e)throw t.v})},T=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,i=0;r.length>i;)if((t=r[i++]).fail||!T(t.promise))return!1;return!0},A=function(e){_.call(l,function(){var t;M?S.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},I=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),O(t,!0))},L=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw k("Promise can't be resolved itself");(t=R(e))?v(function(){var i={_w:r,_d:!1};try{t.call(e,u(L,i,1),u(I,i,1))}catch(e){I.call(i,e)}}):(r._v=e,r._s=1,O(r,!1))}catch(e){I.call({_w:r,_d:!1},e)}}};P||(x=function(e){p(this,x,"Promise","_h"),d(e),i.call(this);try{e(u(L,this,1),u(I,this,1))}catch(e){I.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=e("./_redefine-all")(x.prototype,{then:function(e,t){var r=j(b(this,x));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=M?S.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&O(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),n=function(){var e=new i;this.promise=e,this.resolve=u(L,e,1),this.reject=u(I,e,1)},y.f=j=function(e){return e===x||e===o?new n(e):a(e)}),f(f.G+f.W+f.F*!P,{Promise:x}),e("./_set-to-string-tag")(x,"Promise"),e("./_set-species")("Promise"),o=e("./_core").Promise,f(f.S+f.F*!P,"Promise",{reject:function(e){var t=j(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!P),"Promise",{resolve:function(e){return w(s&&this===o?x:this,e)}}),f(f.S+f.F*!(P&&e("./_iter-detect")(function(e){x.all(e).catch(C)})),"Promise",{all:function(e){var t=this,r=j(t),i=r.resolve,a=r.reject,n=g(function(){var r=[],n=0,o=1;m(e,!1,function(e){var s=n++,l=!1;r.push(void 0),o++,t.resolve(e).then(function(e){l||(l=!0,r[s]=e,--o||i(r))},a)}),--o||i(r)});return n.e&&a(n.v),r.promise},race:function(e){var t=this,r=j(t),i=r.reject,a=g(function(){m(e,!1,function(e){t.resolve(e).then(r.resolve,i)})});return a.e&&i(a.v),r.promise}})},{"./_a-function":61,"./_an-instance":63,"./_classof":70,"./_core":75,"./_ctx":77,"./_export":83,"./_for-of":85,"./_global":86,"./_is-object":96,"./_iter-detect":100,"./_library":103,"./_microtask":105,"./_new-promise-capability":106,"./_perform":120,"./_promise-resolve":121,"./_redefine-all":123,"./_set-species":128,"./_set-to-string-tag":129,"./_species-constructor":132,"./_task":134,"./_wks":145}],163:[function(e,t,r){"use strict";var i=e("./_collection-strong"),a=e("./_validate-collection");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(a(this,"Set"),e=0===e?0:e,e)}},i)},{"./_collection":74,"./_collection-strong":72,"./_validate-collection":142}],164:[function(e,t,r){"use strict";var i=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=i(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":99,"./_string-at":133}],165:[function(e,t,r){"use strict";var i=e("./_global"),a=e("./_has"),n=e("./_descriptors"),o=e("./_export"),s=e("./_redefine"),l=e("./_meta").KEY,u=e("./_fails"),c=e("./_shared"),f=e("./_set-to-string-tag"),h=e("./_uid"),d=e("./_wks"),p=e("./_wks-ext"),m=e("./_wks-define"),b=e("./_enum-keys"),_=e("./_is-array"),v=e("./_an-object"),y=e("./_to-iobject"),g=e("./_to-primitive"),w=e("./_property-desc"),k=e("./_object-create"),S=e("./_object-gopn-ext"),x=e("./_object-gopd"),M=e("./_object-dp"),C=e("./_object-keys"),j=x.f,P=M.f,R=S.f,O=i.Symbol,E=i.JSON,T=E&&E.stringify,A=d("_hidden"),I=d("toPrimitive"),L={}.propertyIsEnumerable,F=c("symbol-registry"),B=c("symbols"),D=c("op-symbols"),z=Object.prototype,N="function"==typeof O,q=i.QObject,U=!q||!q.prototype||!q.prototype.findChild,V=n&&u(function(){return 7!=k(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,r){var i=j(z,t);i&&delete z[t],P(e,t,r),i&&e!==z&&P(z,t,i)}:P,G=function(e){var t=B[e]=k(O.prototype);return t._k=e,t},W=N&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},H=function(e,t,r){return e===z&&H(D,t,r),v(e),t=g(t,!0),v(r),a(B,t)?(r.enumerable?(a(e,A)&&e[A][t]&&(e[A][t]=!1),r=k(r,{enumerable:w(0,!1)})):(a(e,A)||P(e,A,w(1,{})),e[A][t]=!0),V(e,t,r)):P(e,t,r)},X=function(e,t){v(e);for(var r,i=b(t=y(t)),a=0,n=i.length;n>a;)H(e,r=i[a++],t[r]);return e},K=function(e){var t=L.call(this,e=g(e,!0));return!(this===z&&a(B,e)&&!a(D,e))&&(!(t||!a(this,e)||!a(B,e)||a(this,A)&&this[A][e])||t)},Y=function(e,t){if(e=y(e),t=g(t,!0),e!==z||!a(B,t)||a(D,t)){var r=j(e,t);return!r||!a(B,t)||a(e,A)&&e[A][t]||(r.enumerable=!0),r}},$=function(e){for(var t,r=R(y(e)),i=[],n=0;r.length>n;)a(B,t=r[n++])||t==A||t==l||i.push(t);return i},J=function(e){for(var t,r=e===z,i=R(r?D:y(e)),n=[],o=0;i.length>o;)!a(B,t=i[o++])||r&&!a(z,t)||n.push(B[t]);return n};N||(s((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===z&&t.call(D,r),a(this,A)&&a(this[A],e)&&(this[A][e]=!1),V(this,e,w(1,r))};return n&&U&&V(z,e,{configurable:!0,set:t}),G(e)}).prototype,"toString",function(){return this._k}),x.f=Y,M.f=H,e("./_object-gopn").f=S.f=$,e("./_object-pie").f=K,e("./_object-gops").f=J,n&&!e("./_library")&&s(z,"propertyIsEnumerable",K,!0),p.f=function(e){return G(d(e))}),o(o.G+o.W+o.F*!N,{Symbol:O});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Q=0;Z.length>Q;)d(Z[Q++]);for(var ee=C(d.store),te=0;ee.length>te;)m(ee[te++]);o(o.S+o.F*!N,"Symbol",{for:function(e){return a(F,e+="")?F[e]:F[e]=O(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){U=!0},useSimple:function(){U=!1}}),o(o.S+o.F*!N,"Object",{create:function(e,t){return void 0===t?k(e):X(k(e),t)},defineProperty:H,defineProperties:X,getOwnPropertyDescriptor:Y,getOwnPropertyNames:$,getOwnPropertySymbols:J}),E&&o(o.S+o.F*(!N||u(function(){var e=O();return"[null]"!=T([e])||"{}"!=T({a:e})||"{}"!=T(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!W(e)){for(var t,r,i=[e],a=1;arguments.length>a;)i.push(arguments[a++]);return"function"==typeof(t=i[1])&&(r=t),!r&&_(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!W(t))return t}),i[1]=t,T.apply(E,i)}}}),O.prototype[I]||e("./_hide")(O.prototype,I,O.prototype.valueOf),f(O,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},{"./_an-object":64,"./_descriptors":79,"./_enum-keys":82,"./_export":83,"./_fails":84,"./_global":86,"./_has":87,"./_hide":88,"./_is-array":94,"./_library":103,"./_meta":104,"./_object-create":108,"./_object-dp":109,"./_object-gopd":111,"./_object-gopn":113,"./_object-gopn-ext":112,"./_object-gops":114,"./_object-keys":117,"./_object-pie":118,"./_property-desc":122,"./_redefine":124,"./_set-to-string-tag":129,"./_shared":131,"./_to-iobject":137,"./_to-primitive":140,"./_uid":141,"./_wks":145,"./_wks-define":143,"./_wks-ext":144}],166:[function(e,t,r){"use strict";var i=e("./_export"),a=e("./_core"),n=e("./_global"),o=e("./_species-constructor"),s=e("./_promise-resolve");i(i.P+i.R,"Promise",{finally:function(e){var t=o(this,a.Promise||n.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},{"./_core":75,"./_export":83,"./_global":86,"./_promise-resolve":121,"./_species-constructor":132}],167:[function(e,t,r){"use strict";var i=e("./_export"),a=e("./_new-promise-capability"),n=e("./_perform");i(i.S,"Promise",{try:function(e){var t=a.f(this),r=n(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},{"./_export":83,"./_new-promise-capability":106,"./_perform":120}],168:[function(e,t,r){e("./_set-collection-from")("Set")},{"./_set-collection-from":125}],169:[function(e,t,r){e("./_set-collection-of")("Set")},{"./_set-collection-of":126}],170:[function(e,t,r){var i=e("./_export");i(i.P+i.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":73,"./_export":83}],171:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":143}],172:[function(e,t,r){e("./_wks-define")("observable")},{"./_wks-define":143}],173:[function(e,t,r){e("./es6.array.iterator");for(var i=e("./_global"),a=e("./_hide"),n=e("./_iterators"),o=e("./_wks")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=i[u],f=c&&c.prototype;f&&!f[o]&&a(f,o,u),n[u]=n.Array}},{"./_global":86,"./_hide":88,"./_iterators":102,"./_wks":145,"./es6.array.iterator":150}],174:[function(e,t,r){(function(e){function t(e){return Object.prototype.toString.call(e)}r.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},r.isBoolean=function(e){return"boolean"==typeof e},r.isNull=function(e){return null===e},r.isNullOrUndefined=function(e){return null==e},r.isNumber=function(e){return"number"==typeof e},r.isString=function(e){return"string"==typeof e},r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=function(e){return void 0===e},r.isRegExp=function(e){return"[object RegExp]"===t(e)},r.isObject=function(e){return"object"==typeof e&&null!==e},r.isDate=function(e){return"[object Date]"===t(e)},r.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},r.isFunction=function(e){return"function"==typeof e},r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":179}],175:[function(e,t,r){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function n(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!n(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,r,i,n,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(r=this._events[e],s(r))return!1;if(a(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),r.apply(this,n)}else if(o(r))for(n=Array.prototype.slice.call(arguments,1),i=(u=r.slice()).length,l=0;l<i;l++)u[l].apply(this,n);return!0},i.prototype.addListener=function(e,t){var r;if(!a(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!a(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},i.prototype.removeListener=function(e,t){var r,i,n,s;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],n=r.length,i=-1,r===t||a(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=n;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],a(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],176:[function(e,t,r){function i(e){if("string"==typeof e&&(e=n.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}var a=e("http"),n=e("url"),o=t.exports;for(var s in a)a.hasOwnProperty(s)&&(o[s]=a[s]);o.request=function(e,t){return e=i(e),a.request.call(this,e,t)},o.get=function(e,t){return e=i(e),a.get.call(this,e,t)}},{http:215,url:221}],177:[function(e,t,r){r.read=function(e,t,r,i,a){var n,o,s=8*a-i-1,l=(1<<s)-1,u=l>>1,c=-7,f=r?a-1:0,h=r?-1:1,d=e[t+f];for(f+=h,n=d&(1<<-c)-1,d>>=-c,c+=s;c>0;n=256*n+e[t+f],f+=h,c-=8);for(o=n&(1<<-c)-1,n>>=-c,c+=i;c>0;o=256*o+e[t+f],f+=h,c-=8);if(0===n)n=1-u;else{if(n===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),n-=u}return(d?-1:1)*o*Math.pow(2,n-i)},r.write=function(e,t,r,i,a,n){var o,s,l,u=8*n-a-1,c=(1<<u)-1,f=c>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:n-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+f>=1?h/l:h*Math.pow(2,1-f))*l>=2&&(o++,l/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*l-1)*Math.pow(2,a),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;e[r+d]=255&s,d+=p,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[r+d]=255&o,d+=p,o/=256,u-=8);e[r+d-p]|=128*m}},{}],178:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],179:[function(e,t,r){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function a(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}t.exports=function(e){return null!=e&&(i(e)||a(e)||!!e._isBuffer)}},{}],180:[function(e,t,r){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],181:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./operator/_namespace");Object.defineProperty(r,"operator",{enumerable:!0,get:function(){return i(a).default}});var n=e("./source/_namespace");Object.defineProperty(r,"source",{enumerable:!0,get:function(){return i(n).default}});r.version="%version%"},{"./operator/_namespace":188,"./source/_namespace":190}],182:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/get")),u=i(e("babel-runtime/helpers/inherits")),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("waves-lfo/common")),f=c.core.BaseLfo,h=c.operator.Delta,d={feedback:{type:"float",default:.7,min:0,max:1},gain:{type:"float",default:.07,min:0}},p=Math.abs,m=(Math.min,Math.max,Math.pow,function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,d,e));return r.memory=null,r.normAcc=null,r.delta=new h({size:3,useFrameRate:1}),r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.prepareStreamParams(e),this.streamParams.frameSize=4,this.streamParams.description=["norm","x","y","z"],this.delta.processStreamParams({frameSize:3,frameRate:this.streamParams.frameRate}),this.memory=new Float32Array(3),this.normAcc=new Float32Array(3),this.propagateStreamParams()}},{key:"resetStream",value:function(){(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"resetStream",this).call(this),this.delta.resetStream();for(var e=0;e<3;e++)this.memory[e]=0}},{key:"inputVector",value:function(e){for(var t=this.frame.data,r=(this.buffer,this.memory),i=this.normAcc,a=this.params.get("feedback"),n=this.params.get("gain"),o=0,s=0;s<this.streamParams.frameSize;s++)i[s]=(e[s]||0)*(1/9.81);for(var l=this.delta.inputVector(i),u=0;u<3;u++){var c=p(l[u]);c+=a*r[u],r[u]=c,c*=n,o+=c*=c,t[u+1]=c}return t[0]=o,t}},{key:"processVector",value:function(e){this.frame.data=this.inputVector(e.data)}}]),t}(f));r.default=m},{"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35,"waves-lfo/common":242}],183:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/get")),u=i(e("babel-runtime/helpers/inherits")),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("waves-lfo/common")),f=c.core.BaseLfo,h=c.operator.MovingMedian,d={filterOrder:{type:"integer",default:5,min:1,max:1/0},threshold:{type:"float",default:.01,min:0,max:1},minInter:{type:"float",default:.2,min:0}},p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,d,e));return r.movingMedian=new h({order:r.params.get("filterOrder")}),r._kickStartTime=null,r._lastMedian=0,r._peak=0,r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onParamUpdate",value:function(e,t,r){"filterOrder"===e&&(this.movingMedian.params.set("order",t),this.movingMedian.processStreamParams({frameType:"scalar",frameSize:1}))}},{key:"resetStream",value:function(){(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"resetStream",this).call(this)}},{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this.streamParams.frameSize=2,this.streamParams.frameRate=0,this.streamParams.description=["kick","peakIntensity"],this.movingMedian.processStreamParams({frameType:"scalar",frameSize:1}),this.propagateStreamParams()}},{key:"processVector",value:function(e){var t=e.time,r=e.data[0],i=r-this._lastMedian,a=this.params.get("threshold"),n=this.params.get("minInter");i>a?(null===this._kickStartTime&&(this._kickStartTime=t),r>this._peak&&(this._peak=r,this.frame.time=t,this.frame.data[0]=1,this.frame.data[1]=this._peak,this.propagateFrame())):t-this._kickStartTime>n&&null!==this._kickStartTime&&(this._kickStartTime=null,this._peak=0,this.frame.time=t,this.frame.data[0]=0,this.frame.data[1]=0,this.propagateFrame()),this._lastMedian=this.movingMedian.inputScalar(r)}},{key:"processFrame",value:function(e){this.prepareStreamParams(),this.processFunction(e)}}]),t}(f);r.default=p},{"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35,"waves-lfo/common":242}],184:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/assign")),n=i(e("babel-runtime/core-js/object/get-prototype-of")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("babel-runtime/helpers/possibleConstructorReturn")),u=i(e("babel-runtime/helpers/inherits")),c={noiseThreshold:{type:"float",default:.1},frameSize:{type:"integer",default:512,metas:{kind:"static"}},hopSize:{type:"integer",default:null,nullable:!0,metas:{kind:"static"}}},f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,c,e));return r._mcrs=[],r}return(0,u.default)(t,e),(0,s.default)(t,[{key:"onParamUpdate",value:function(e,t,r){this.params.hopSize||this.params.set("hopSize",frameSize),"signal"===this.streamParams.frameType&&this.params.set("frameSize",this.prevStreamParams.frameSize)}},{key:"processStreamParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.prepareStreamParams(e),this._mcrs=[];var t=this.params.get("noiseThreshold"),r="vector"===this.streamParams.frameType?this.params.get("frameSize"):e.frameSize,i=this.params.get("hopSize"),a=e.sourceSampleRate,n=["frequency","periodicity"],o=1;"vector"===this.streamParams.frameType?o=e.frameSize:"signal"===this.streamParams.frameType&&(o=1),this.streamParams.frameSize=2*o,this.streamParams.description=[];for(var s=0;s<o;s++)this.streamParams.description.concat(n),this._mcrs.push(new d({noiseThreshold:t,frameSize:r,hopSize:i,sampleRate:a}));this.propagateStreamParams()}},{key:"processVector",value:function(e){for(var t=e.data,r=this.frame.data,i=0;i<this._mcrs.length;i++){var a=this._mcrs[i].process(t[i]);r[2*i]=a.frequency,r[2*i+1]=a.periodicity}}},{key:"processSignal",value:function(e){var t=e.data,r=this.frame.data,i=this._mcrs[0].processFrame(t);r[0]=i.frequency,r[1]=i.periodicity}}]),t}(e("waves-lfo/core").BaseLfo);r.default=f;var h={noiseThreshold:.1,frameSize:50,hopSize:5,sampleRate:null},d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,e),(0,a.default)({},t,h),this.mean=0,this.magnitude=0,this.stdDev=0,this.crossings=[],this.periodMean=0,this.periodStdDev=0,this.inputFrame=[],this.setConfig(t)}return(0,s.default)(e,[{key:"setConfig",value:function(e){e.noiseThreshold&&(this.noiseThreshold=e.noiseThreshold),e.frameSize&&(this.frameSize=e.frameSize),e.hopSize&&(this.hopSize=e.hopSize),e.sampleRate&&(this.sampleRate=e.sampleRate),this.inputBuffer=new Array(this.frameSize);for(var t=0;t<this.frameSize;t++)this.inputBuffer[t]=0;this.hopCounter=0,this.bufferIndex=0,this.results={amplitude:0,frequency:0,periodicity:0}}},{key:"process",value:function(e){return this.inputBuffer[this.bufferIndex]=e,this.bufferIndex=(this.bufferIndex+1)%this.frameSize,this.hopCounter===this.hopSize-1?(this.hopCounter=0,this.processFrame(this.inputBuffer,this.bufferIndex)):this.hopCounter++,this.results}},{key:"processFrame",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.length<2?{amplitude:0,frequency:0,periodicity:0}:(this.inputFrame=e,this._mainAlgorithm(),this.amplitude=2*this.stdDev,this.frequency=this.crossings.length/Math.floor(.5*this.inputFrame.length),this.sampleRate&&(this.frequency*=Math.floor(this.sampleRate/2)),this.crossings.length>2?this.periodicity=1-Math.sqrt(this.periodStdDev/this.inputFrame.length):this.periodicity=0,this.results.amplitude=this.amplitude,this.results.frequency=this.frequency,this.results.periodicity=this.periodicity,this.results)}},{key:"_mainAlgorithm",value:function(){var e=void 0,t=void 0;e=t=this.inputFrame[0];for(var r=0;r<this.inputFrame.length;r++){var i=this.inputFrame[r];i>t?t=i:i<e&&(e=i)}this.mean=e+.5*(t-e),this.crossings=[],this.upCrossings=[],this.downCrossings=[],this.stdDev=0;for(var a=this.inputFrame[0]-this.mean,n=1;n<this.inputFrame.length;n++){var o=this.inputFrame[n]-this.mean;this.stdDev+=o*o,a>this.noiseThreshold&&o<this.noiseThreshold?this.downCrossings.push(n):a<this.noiseThreshold&&o>this.noiseThreshold&&this.upCrossings.push(n),this.crossings=this.upCrossings.length>this.downCrossings.length?this.upCrossings:this.downCrossings,a=o}this.stdDev=Math.sqrt(this.stdDev),this.periodMean=0;for(var s=1;s<this.crossings.length;s++)this.periodMean+=this.crossings[s]-this.crossings[s-1];this.periodMean/=this.crossings.length-1,this.periodStdDev=0;for(var l=1;l<this.crossings.length;l++){var u=this.crossings[l]-this.crossings[l-1]-this.periodMean;this.periodStdDev+=u*u}this.crossings.length>2&&(this.periodStdDev=Math.sqrt(this.periodStdDev/(this.crossings.length-2)))}}]),e}()},{"babel-runtime/core-js/object/assign":19,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35,"waves-lfo/core":279}],185:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=m(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return t>0&&(e[0]/=t,e[1]/=t,e[2]/=t),e}Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("babel-runtime/core-js/object/get-prototype-of")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("babel-runtime/helpers/possibleConstructorReturn")),u=i(e("babel-runtime/helpers/inherits")),c=e("waves-lfo/core"),f=Math.abs,h=Math.atan2,d=Math.cos,p=Math.sin,m=Math.sqrt,b=Math.pow,_=Math.tan,v=Math.max,y=(Math.PI,Math.PI/180),g={k:{type:"float",min:0,max:1,step:.01,default:.9}},w=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,g,e))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this.streamParams.frameSize=3,this.init=!1,this.lastTime=0,this.interval=0,this.accVector=new Float32Array(3),this.gyroVector=new Float32Array(3),this.gyroEstimate=new Float32Array(3),this.accEstimate=new Float32Array(3),this.propagateStreamParams()}},{key:"processVector",value:function(e){var t=e.time,r=e.data,i=this.frame.data,n=this.accEstimate,o=(this.lastAccEstimate,this.gyroEstimate),s=this.params.get("k"),l=this.accVector;l[0]=-1*r[0],l[1]=1*r[1],l[2]=-1*r[2];var u=this.gyroVector;if(u[0]=-1*r[5],u[1]=-1*r[4],u[2]=-1*r[3],a(l),this.lastTime){var c=t-this.lastTime;if(this.lastTime=t,f(n[2])<.1)for(var g=0;g<3;g++)o[g]=n[g];else{var w=u[0]*c*y,k=h(n[0],n[2])+w,S=u[1]*c*y,x=h(n[1],n[2])+S;o[0]=p(k),o[0]/=m(1+b(d(k),2)*b(_(x),2)),o[1]=p(x),o[1]/=m(1+b(d(x),2)*b(_(k),2));var M=d(k)>=0?1:-1,C=b(o[0],2)+b(o[1],2);o[2]=M*m(v(0,1-C))}for(var j=0;j<3;j++)n[j]=o[j]*s+l[j]*(1-s);a(n),i[0]=n[0],i[1]=n[1],i[2]=n[2]}else{this.lastTime=t;for(var P=0;P<3;P++)n[P]=l[P]}}}]),t}(c.BaseLfo);r.default=w},{"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35,"waves-lfo/core":279}],186:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/get")),u=i(e("babel-runtime/helpers/inherits")),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("waves-lfo/core")),f=i(e("@ircam/ticker"));Float32Array.prototype.fill||(Float32Array.prototype.fill=function(e){for(var t=0;t<this.length;t++)this[t]=e});var h={frameRate:{type:"integer",min:.015,max:1/0,default:.05,constant:!0,metas:{unit:"s"}}},d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,h,e));return r.ticker=null,r.buffer=null,r.bufferIndex=0,r.propagateFrame=r.propagateFrame.bind(r),r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);var t=this.params.get("frameRate");this.streamParams.frameRate=t;var r=this.streamParams.frameSize,i=e.frameRate;console.log("framesize : "+r),console.log("sourceframerate : "+i),(i<=0||!isFinite(i))&&(i=10);var a=Math.ceil(i/t);console.log("buffersize : "+a),this.maxBufferIndex=a,this.buffer=new Float32Array(a*r),this.sums=new Float32Array(r),this.propagateStreamParams()}},{key:"finalizeStream",value:function(e){(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"finalizeStream",this).call(this,e),this.ticker.stop(),this.ticker=null}},{key:"processVector",value:function(e){if(this.bufferIndex<this.maxBufferIndex){for(var t=e.data,r=this.streamParams.frameSize,i=0;i<r;i++)this.buffer[this.bufferIndex*r+i]=t[i];this.bufferIndex+=1}}},{key:"processScalar",value:function(e){if(this.bufferIndex<this.maxBufferIndex){var t=frame.data,r=this.streamParams.frameSize;this.buffer[this.bufferIndex*r]=t[0],this.bufferIndex+=1}}},{key:"processFrame",value:function(e){if(this.prepareFrame(),this.frame.metadata=e.metadata,this.processFunction(e),null===this.ticker){var t=1e3/this.params.get("frameRate");this.ticker=new f.default(t,this.propagateFrame),this.ticker.start()}}},{key:"propagateFrame",value:function(e){this.frame.time=e/1e3,this.bufferIndex>0&&this._computeFrameData(),(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"propagateFrame",this).call(this)}},{key:"_computeFrameData",value:function(){var e=this.bufferIndex,t=this.streamParams.frameSize,r=this.buffer,i=this.frame.data,a=this.sums;a.fill(0);for(var n=0;n<e;n++)for(var o=0;o<t;o++)a[o]+=r[t*n+o];for(var s=0;s<t;s++)i[s]=a[s]/e;this.bufferIndex=0}}]),t}(c.BaseLfo);r.default=d},{"@ircam/ticker":11,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35,"waves-lfo/core":279}],187:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u={onThreshold:{type:"float",min:0,max:1/0,default:.5},offThreshold:{type:"float",min:0,max:1/0,default:.01},offDelay:{type:"float",min:0,max:1/0,default:.2}},c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,u,e));return r.isMoving=!1,r.timeoutId=null,r._stop=r._stop.bind(r),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this.streamParams.frameRate=void 0,this.streamParams.frameSize=1,this.propagateStreamParams()}},{key:"processFrame",value:function(e){this.prepareFrame(),this.processFunction(e)}},{key:"processVector",value:function(e){var t=e.data[0];t>this.params.get("onThreshold")&&!this.isMoving?(this.isMoving=!0,this._start(e)):t<this.params.get("offThreshold")&&this.isMoving&&(this.isMoving=!1,null===this.timeoutId&&(this.timeoutId=setTimeout(this._stop,1e3*this.params.get("offDelay"),e.time)))}},{key:"_start",value:function(e){null!==this.timeoutId&&(this.frame.time=e.time,this.frame.data[0]=1,this.propagateFrame()),clearTimeout(this.timeoutId),this.timeoutId=null}},{key:"_stop",value:function(e){this.frame.time=e+.001*this.params.get("offDelay"),this.frame.data[0]=0,this.propagateFrame()}}]),t}(e("waves-lfo/core").BaseLfo);r.default=c},{"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35,"waves-lfo/core":279}],188:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("./Intensity")),n=i(e("./Kick")),o=i(e("./MeanCrossingRate")),s=i(e("./Orientation")),l=i(e("./Sampler")),u=i(e("./StillAutoTrigger"));r.default={Intensity:a.default,Kick:n.default,MeanCrossingRate:o.default,Orientation:s.default,Sampler:l.default,StillAutoTrigger:u.default}},{"./Intensity":182,"./Kick":183,"./MeanCrossingRate":184,"./Orientation":185,"./Sampler":186,"./StillAutoTrigger":187}],189:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/helpers/slicedToArray")),n=i(e("babel-runtime/core-js/promise")),o=i(e("babel-runtime/core-js/object/get-prototype-of")),s=i(e("babel-runtime/helpers/classCallCheck")),l=i(e("babel-runtime/helpers/createClass")),u=i(e("babel-runtime/helpers/possibleConstructorReturn")),c=i(e("babel-runtime/helpers/get")),f=i(e("babel-runtime/helpers/inherits")),h=i(e("motion-input")),d=e("waves-lfo/core"),p={},m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,p,e));return r._accListener=r._accListener.bind(r),r._gyroListener=r._gyroListener.bind(r),r._accOnlyListener=r._accOnlyListener.bind(r),r}return(0,f.default)(t,e),(0,l.default)(t,[{key:"initModule",value:function(){var e=this,r=(0,c.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"initModule",this).call(this),i=new n.default(function(t,r){h.default.init(["accelerationIncludingGravity","rotationRate"]).then(function(r){var i=(0,a.default)(r,2),n=i[0],o=i[1];e.accelerationIncludingGravity=n,e.rotationRate=o,t()}).catch(function(e){return console.error(e.stack)})});return n.default.all([r,i])}},{key:"processStreamParams",value:function(){this.streamParams.frameType="vector",this.streamParams.frameSize=6,this.streamParams.frameRate=1/this.accelerationIncludingGravity.period,this.streamParams.sourceSampleRate=this.streamParams.frameRate,this.streamParams.sourceSampleCount=1,this.streamParams.description=["accelerationIncludingGravity x","accelerationIncludingGravity y","accelerationIncludingGravity z","rotationRate alpha","rotationRate beta","rotationRate gamma"],this.propagateStreamParams()}},{key:"start",value:function(){var e=this;if(this._startTime=performance.now(),!1===this.initialized)return null===this.initPromise&&(this.initPromise=this.init()),this.initPromise.then(function(){return e.start(e._startTime)});var t=this.accelerationIncludingGravity,r=this.rotationRate;if(t.isValid&&r.isValid)t.addListener(this._accListener),r.addListener(this._gyroListener);else{if(!t.isValid)throw new Error("The device doesn't support the devicemotion API");t.addListener(this._accOnlyListener)}this.started=!0}},{key:"stop",value:function(){this.started=!1,this._startTime=null;var e=this.accelerationIncludingGravity,t=this.rotationRate;e.isValid&&t.isValid?(e.removeListener(this._accListener),t.removeListener(this._gyroListener)):e.isValid&&e.removeListener(this._accOnlyListener)}},{key:"_accListener",value:function(e){var t=this.frame;t.time=(performance.now()-this._startTime)/1e3,t.data[0]=e[0],t.data[1]=e[1],t.data[2]=e[2]}},{key:"_gyroListener",value:function(e){var t=this.frame;t.data[3]=e[0],t.data[4]=e[1],t.data[5]=e[2],this.propagateFrame()}},{key:"_accOnlyListener",value:function(e){var t=this.frame;t.time=(performance.now()-this._startTime)/1e3,t.data[0]=e[0],t.data[1]=e[1],t.data[2]=e[2],t.data[3]=0,t.data[4]=0,t.data[5]=0,this.propagateFrame()}}]),t}((0,d.SourceMixin)(d.BaseLfo));r.default=m},{"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/core-js/promise":26,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35,"babel-runtime/helpers/slicedToArray":36,"motion-input":197,"waves-lfo/core":279}],190:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(e("./MotionInput"));r.default={MotionInput:i.default}},{"./MotionInput":189}],191:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(e("./InputModule")),l=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.DOMEventModule=e,n.event=[0,0,0],n._webkitCompassHeadingReference=null,n}return n(t,s.default),o(t,[{key:"init",value:function(){var e=this;this.DOMEventModule.required[this.eventType]=!0;var t=this.DOMEventModule.promise;return t||(t=this.DOMEventModule.init()),t.then(function(t){return e})}}]),t}();r.default=l},{"./InputModule":195}],192:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){return window.performance?window.performance.now()/1e3:Date.now()/1e3}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function e(t,r,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,i)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(i)},c=i(e("./InputModule")),f=i(e("./DOMEventSubmodule")),h=(i(e("./MotionInput")),i(e("platform"))),d=/Chrome/,p=180/Math.PI,m=function(e){function t(){a(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"devicemotion"));return e.event=[null,null,null,null,null,null,null,null,null],e.accelerationIncludingGravity=new f.default(e,"accelerationIncludingGravity"),e.acceleration=new f.default(e,"acceleration"),e.rotationRate=new f.default(e,"rotationRate"),e.required={accelerationIncludingGravity:!1,acceleration:!1,rotationRate:!1},e._promiseResolve=null,e._unifyMotionData="iOS"===h.default.os.family?-1:1,e._unifyPeriod="Android"===h.default.os.family?.001:1,e._calculatedAcceleration=[0,0,0],e._calculatedAccelerationTimeConstant=.1,e._lastAccelerationIncludingGravity=[0,0,0],e._calculatedRotationRate=[0,0,0],e._lastOrientation=[0,0,0],e._lastOrientationTimestamp=null,e._processFunction=null,e._process=e._process.bind(e),e._devicemotionCheck=e._devicemotionCheck.bind(e),e._devicemotionListener=e._devicemotionListener.bind(e),e._checkCounter=0,e}return o(t,c.default),l(t,[{key:"_devicemotionCheck",value:function(e){clearTimeout(this._checkTimeoutId),this.isProvided=!0,this.period=e.interval/1e3,this.interval=e.interval,this.accelerationIncludingGravity.isProvided=e.accelerationIncludingGravity&&"number"==typeof e.accelerationIncludingGravity.x&&"number"==typeof e.accelerationIncludingGravity.y&&"number"==typeof e.accelerationIncludingGravity.z,this.accelerationIncludingGravity.period=e.interval*this._unifyPeriod,this.acceleration.isProvided=e.acceleration&&"number"==typeof e.acceleration.x&&"number"==typeof e.acceleration.y&&"number"==typeof e.acceleration.z,this.acceleration.period=e.interval*this._unifyPeriod,this.rotationRate.isProvided=e.rotationRate&&"number"==typeof e.rotationRate.alpha&&"number"==typeof e.rotationRate.beta&&"number"==typeof e.rotationRate.gamma,this.rotationRate.period=e.interval*this._unifyPeriod,"Android"===h.default.os.family&&/Firefox/.test(h.default.name)&&this._checkCounter<1?this._checkCounter++:(this._processFunction=this._devicemotionListener,this.acceleration.isProvided||(this.acceleration.isCalculated=this.accelerationIncludingGravity.isProvided),this._promiseResolve(this))}},{key:"_devicemotionListener",value:function(e){this.listeners.size>0&&this._emitDeviceMotionEvent(e),this.accelerationIncludingGravity.listeners.size>0&&this.required.accelerationIncludingGravity&&this.accelerationIncludingGravity.isValid&&this._emitAccelerationIncludingGravityEvent(e),this.acceleration.listeners.size>0&&this.required.acceleration&&this.acceleration.isValid&&this._emitAccelerationEvent(e),this.rotationRate.listeners.size>0&&this.required.rotationRate&&this.rotationRate.isProvided&&this._emitRotationRateEvent(e)}},{key:"_emitDeviceMotionEvent",value:function(e){var t=this.event;e.accelerationIncludingGravity&&(t[0]=e.accelerationIncludingGravity.x,t[1]=e.accelerationIncludingGravity.y,t[2]=e.accelerationIncludingGravity.z),e.acceleration&&(t[3]=e.acceleration.x,t[4]=e.acceleration.y,t[5]=e.acceleration.z),e.rotationRate&&(t[6]=e.rotationRate.alpha,t[7]=e.rotationRate.beta,t[8]=e.rotationRate.gamma),this.emit(t)}},{key:"_emitAccelerationIncludingGravityEvent",value:function(e){var t=this.accelerationIncludingGravity.event;t[0]=e.accelerationIncludingGravity.x*this._unifyMotionData,t[1]=e.accelerationIncludingGravity.y*this._unifyMotionData,t[2]=e.accelerationIncludingGravity.z*this._unifyMotionData,this.accelerationIncludingGravity.emit(t)}},{key:"_emitAccelerationEvent",value:function(e){var t=this.acceleration.event;if(this.acceleration.isProvided)t[0]=e.acceleration.x*this._unifyMotionData,t[1]=e.acceleration.y*this._unifyMotionData,t[2]=e.acceleration.z*this._unifyMotionData;else if(this.accelerationIncludingGravity.isValid){var r=[e.accelerationIncludingGravity.x*this._unifyMotionData,e.accelerationIncludingGravity.y*this._unifyMotionData,e.accelerationIncludingGravity.z*this._unifyMotionData],i=this._calculatedAccelerationDecay;this._calculatedAcceleration[0]=.5*(1+i)*(r[0]-this._lastAccelerationIncludingGravity[0])+i*this._calculatedAcceleration[0],this._calculatedAcceleration[1]=.5*(1+i)*(r[1]-this._lastAccelerationIncludingGravity[1])+i*this._calculatedAcceleration[1],this._calculatedAcceleration[2]=.5*(1+i)*(r[2]-this._lastAccelerationIncludingGravity[2])+i*this._calculatedAcceleration[2],this._lastAccelerationIncludingGravity[0]=r[0],this._lastAccelerationIncludingGravity[1]=r[1],this._lastAccelerationIncludingGravity[2]=r[2],t[0]=this._calculatedAcceleration[0],t[1]=this._calculatedAcceleration[1],t[2]=this._calculatedAcceleration[2]}this.acceleration.emit(t)}},{key:"_emitRotationRateEvent",value:function(e){var t=this.rotationRate.event;t[0]=e.rotationRate.gamma,t[1]=e.rotationRate.alpha,t[2]=e.rotationRate.beta,"Android"===h.default.os.family&&d.test(h.default.name)&&(t[0]*=p,t[1]*=p,t[2]*=p),this.rotationRate.emit(t)}},{key:"_calculateRotationRateFromOrientation",value:function(e){var t=s(),r=.8,i="number"==typeof e[0];if(this._lastOrientationTimestamp){var a=null,n=void 0,o=void 0,l=0,u=0,c=0,f=t-this._lastOrientationTimestamp;i&&(this._lastOrientation[0]>320&&e[0]<40?l=360:this._lastOrientation[0]<40&&e[0]>320&&(l=-360)),this._lastOrientation[1]>140&&e[1]<-140?u=360:this._lastOrientation[1]<-140&&e[1]>140&&(u=-360),this._lastOrientation[2]>50&&e[2]<-50?c=180:this._lastOrientation[2]<-50&&e[2]>50&&(c=-180),f>0&&(i&&(a=r*this._calculatedRotationRate[0]+(1-r)*(e[0]-this._lastOrientation[0]+l)/f),n=r*this._calculatedRotationRate[1]+(1-r)*(e[1]-this._lastOrientation[1]+u)/f,o=r*this._calculatedRotationRate[2]+(1-r)*(e[2]-this._lastOrientation[2]+c)/f,this._calculatedRotationRate[0]=a,this._calculatedRotationRate[1]=n,this._calculatedRotationRate[2]=o),this.rotationRate.emit(this._calculatedRotationRate)}this._lastOrientationTimestamp=t,this._lastOrientation[0]=e[0],this._lastOrientation[1]=e[1],this._lastOrientation[2]=e[2]}},{key:"_process",value:function(e){this._processFunction(e)}},{key:"init",value:function(){var e=this;return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,function(t){e._promiseResolve=t,window.DeviceMotionEvent?(e._processFunction=e._devicemotionCheck,window.addEventListener("devicemotion",e._process),e._checkTimeoutId=setTimeout(function(){return t(e)},500)):t(e)})}},{key:"_calculatedAccelerationDecay",get:function(){return Math.exp(-2*Math.PI*this.accelerationIncludingGravity.period/this._calculatedAccelerationTimeConstant)}}]),t}();r.default=new m},{"./DOMEventSubmodule":191,"./InputModule":195,"./MotionInput":196,platform:198}],193:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e*Math.PI/180}function l(e){return 180*e/Math.PI}function u(e){for(var t=e[0]*e[4]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[0]*e[5]*e[7]-e[1]*e[3]*e[8]-e[2]*e[4]*e[6],r=0;r<e.length;r++)e[r]/=t;return e}function c(e){var t="number"==typeof e[0],r=t?s(e[0]):0,i=s(e[1]),a=s(e[2]),n=Math.cos(r),o=Math.cos(i),c=Math.cos(a),f=Math.sin(r),h=Math.sin(i),d=Math.sin(a),p=void 0,m=void 0,b=void 0,_=[n*c-f*h*d,-o*f,n*d+c*f*h,c*f+n*h*d,n*o,f*d-n*c*h,-o*d,h,o*c];u(_),_[8]>0?(p=Math.atan2(-_[1],_[4]),m=Math.asin(_[7]),b=Math.atan2(-_[6],_[8])):_[8]<0?(p=Math.atan2(_[1],-_[4]),m=-Math.asin(_[7]),m+=m>=0?-Math.PI:Math.PI,b=Math.atan2(_[6],-_[8])):_[6]>0?(p=Math.atan2(-_[1],_[4]),m=Math.asin(_[7]),b=-Math.PI/2):_[6]<0?(p=Math.atan2(_[1],-_[4]),m=-Math.asin(_[7]),m+=m>=0?-Math.PI:Math.PI,b=-Math.PI/2):(p=Math.atan2(_[3],_[0]),m=_[7]>0?Math.PI/2:-Math.PI/2,b=0),p+=p<0?2*Math.PI:0,e[0]=t?l(p):null,e[1]=l(m),e[2]=l(b)}function f(e){var t="number"==typeof e[0],r=t?s(e[0]):0,i=s(e[1]),a=s(e[2]),n=Math.cos(r),o=Math.cos(i),c=Math.cos(a),f=Math.sin(r),h=Math.sin(i),d=Math.sin(a),p=void 0,m=void 0,b=void 0,_=[n*c-f*h*d,-o*f,n*d+c*f*h,c*f+n*h*d,n*o,f*d-n*c*h,-o*d,h,o*c];u(_),p=Math.atan2(-_[1],_[4]),p+=p<0?2*Math.PI:0,m=Math.asin(_[7]),b=Math.atan2(-_[6],_[8]),e[0]=t?l(p):null,e[1]=l(m),e[2]=l(b)}Object.defineProperty(r,"__esModule",{value:!0});var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),d=function e(t,r,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,i)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(i)},p=i(e("./DOMEventSubmodule")),m=i(e("./InputModule")),b=i(e("./MotionInput")),_=i(e("platform")),v=function(e){function t(){a(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"deviceorientation"));return e.event=[null,null,null],e.orientation=new p.default(e,"orientation"),e.orientationAlt=new p.default(e,"orientationAlt"),e.required={orientation:!1,orientationAlt:!1},e._promiseResolve=null,e._estimatedGravity=[0,0,0],e._processFunction=null,e._process=e._process.bind(e),e._deviceorientationCheck=e._deviceorientationCheck.bind(e),e._deviceorientationListener=e._deviceorientationListener.bind(e),e}return o(t,m.default),h(t,[{key:"_deviceorientationCheck",value:function(e){clearTimeout(this._checkTimeoutId),this.isProvided=!0;var t="number"==typeof e.alpha&&"number"==typeof e.beta&&"number"==typeof e.gamma;this.orientation.isProvided=t,this.orientationAlt.isProvided=t,this._processFunction=this._deviceorientationListener,this.required.orientation&&!this.orientation.isProvided||this.required.orientationAlt&&!this.orientationAlt.isProvided?this._tryAccelerationIncludingGravityFallback():this._promiseResolve(this)}},{key:"_deviceorientationListener",value:function(e){var t=this.event;if(t[0]=e.alpha,t[1]=e.beta,t[2]=e.gamma,this.listeners.size>0&&this.emit(t),this.orientation.listeners.size>0&&this.required.orientation&&this.orientation.isProvided){!this.orientation._webkitCompassHeadingReference&&e.webkitCompassHeading&&"iOS"===_.default.os.family&&(this.orientation._webkitCompassHeadingReference=e.webkitCompassHeading);var r=this.orientation.event;r[0]=e.alpha,r[1]=e.beta,r[2]=e.gamma,this.orientation._webkitCompassHeadingReference&&"iOS"===_.default.os.family&&(r[0]+=360-this.orientation._webkitCompassHeadingReference,c(r)),this.orientation.emit(r)}if(this.orientationAlt.listeners.size>0&&this.required.orientationAlt&&this.orientationAlt.isProvided){!this.orientationAlt._webkitCompassHeadingReference&&e.webkitCompassHeading&&"iOS"===_.default.os.family&&(this.orientationAlt._webkitCompassHeadingReference=e.webkitCompassHeading);var i=this.orientationAlt.event;i[0]=e.alpha,i[1]=e.beta,i[2]=e.gamma,this.orientationAlt._webkitCompassHeadingReference&&"iOS"===_.default.os.family&&(i[0]-=this.orientationAlt._webkitCompassHeadingReference,i[0]+=i[0]<0?360:0),"Android"===_.default.os.family&&f(i),this.orientationAlt.emit(i)}}},{key:"_tryAccelerationIncludingGravityFallback",value:function(){var e=this;b.default.requireModule("accelerationIncludingGravity").then(function(t){t.isValid&&(console.log("WARNING (motion-input): The 'deviceorientation' event does not exist or does not provide values in your browser, so the orientation of the device is estimated from DeviceMotion's 'accelerationIncludingGravity' event. Since the compass is not available, only the `beta` and `gamma` angles are provided (`alpha` is null)."),e.required.orientation&&(e.orientation.isCalculated=!0,e.orientation.period=t.period,b.default.addListener("accelerationIncludingGravity",function(t){e._calculateBetaAndGammaFromAccelerationIncludingGravity(t)})),e.required.orientationAlt&&(e.orientationAlt.isCalculated=!0,e.orientationAlt.period=t.period,b.default.addListener("accelerationIncludingGravity",function(t){e._calculateBetaAndGammaFromAccelerationIncludingGravity(t,!0)}))),e._promiseResolve(e)})}},{key:"_calculateBetaAndGammaFromAccelerationIncludingGravity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=.8;this._estimatedGravity[0]=r*this._estimatedGravity[0]+(1-r)*e[0],this._estimatedGravity[1]=r*this._estimatedGravity[1]+(1-r)*e[1],this._estimatedGravity[2]=r*this._estimatedGravity[2]+(1-r)*e[2];var i=this._estimatedGravity[0],a=this._estimatedGravity[1],n=this._estimatedGravity[2],o=Math.sqrt(i*i+a*a+n*n);i/=o,a/=o,n/=o;var s=l(Math.asin(a)),u=l(Math.atan2(-i,n));if(t){var f=this.orientationAlt.event;f[0]=null,f[1]=s,f[2]=u,this.orientationAlt.emit(f)}else{var h=this.orientation.event;h[0]=null,h[1]=s,h[2]=u,c(h),this.orientation.emit(h)}}},{key:"_process",value:function(e){this._processFunction(e)}},{key:"init",value:function(){var e=this;return d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,function(t){e._promiseResolve=t,window.DeviceOrientationEvent?(e._processFunction=e._deviceorientationCheck,window.addEventListener("deviceorientation",e._process,!1),e._checkTimeoutId=setTimeout(function(){return t(e)},500)):e.required.orientation?e._tryAccelerationIncludingGravityFallback():t(e)})}}]),t}();r.default=new v},{"./DOMEventSubmodule":191,"./InputModule":195,"./MotionInput":196,platform:198}],194:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){var r=[],i=!0,a=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function e(t,r,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,i)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(i)},c=i(e("./InputModule")),f=i(e("./MotionInput")),h=function(e){function t(){a(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"energy"));return e.event=0,e._accelerationModule=null,e._accelerationValues=null,e._accelerationMagnitudeCurrentMax=9.81,e._accelerationMagnitudeThreshold=39.24,e._rotationRateModule=null,e._rotationRateValues=null,e._rotationRateMagnitudeCurrentMax=400,e._rotationRateMagnitudeThreshold=600,e._energyTimeConstant=.1,e._onAcceleration=e._onAcceleration.bind(e),e._onRotationRate=e._onRotationRate.bind(e),e}return o(t,c.default),l(t,[{key:"init",value:function(){var e=this;return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,function(t){Promise.all([f.default.requireModule("acceleration"),f.default.requireModule("rotationRate")]).then(function(r){var i=s(r,2),a=i[0],n=i[1];e._accelerationModule=a,e._rotationRateModule=n,e.isCalculated=e._accelerationModule.isValid||e._rotationRateModule.isValid,e._accelerationModule.isValid?e.period=e._accelerationModule.period:e._rotationRateModule.isValid&&(e.period=e._rotationRateModule.period),t(e)})})}},{key:"addListener",value:function(e){0===this.listeners.size&&(this._accelerationModule.isValid&&this._accelerationModule.addListener(this._onAcceleration),this._rotationRateModule.isValid&&this._rotationRateModule.addListener(this._onRotationRate)),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addListener",this).call(this,e)}},{key:"removeListener",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeListener",this).call(this,e),0===this.listeners.size&&(this._accelerationModule.isValid&&this._accelerationModule.removeListener(this._onAcceleration),this._rotationRateModule.isValid&&this._rotationRateModule.removeListener(this._onRotationRate))}},{key:"_onAcceleration",value:function(e){this._accelerationValues=e,this._rotationRateModule.isValid||this._calculateEnergy()}},{key:"_onRotationRate",value:function(e){this._rotationRateValues=e,this._calculateEnergy()}},{key:"_calculateEnergy",value:function(){var e=0,t=0;if(this._accelerationModule.isValid){var r=this._accelerationValues[0],i=this._accelerationValues[1],a=this._accelerationValues[2],n=Math.sqrt(r*r+i*i+a*a);this._accelerationMagnitudeCurrentMax<n&&(this._accelerationMagnitudeCurrentMax=Math.min(n,this._accelerationMagnitudeThreshold)),e=Math.min(n/this._accelerationMagnitudeCurrentMax,1)}if(this._rotationRateModule.isValid){var o=this._rotationRateValues[0],s=this._rotationRateValues[1],l=this._rotationRateValues[2],u=Math.sqrt(o*o+s*s+l*l);this._rotationRateMagnitudeCurrentMax<u&&(this._rotationRateMagnitudeCurrentMax=Math.min(u,this._rotationRateMagnitudeThreshold)),t=Math.min(u/this._rotationRateMagnitudeCurrentMax,1)}var c=Math.max(e,t),f=this._energyDecay;this.event=f*this.event+(1-f)*c,this.emit(this.event)}},{key:"_energyDecay",get:function(){return Math.exp(-2*Math.PI*this.period/this._energyTimeConstant)}}]),t}();r.default=new h},{"./InputModule":195,"./MotionInput":196}],195:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=function(){function e(t){i(this,e),this.eventType=t,this.listeners=new Set,this.event=null,this.promise=null,this.isCalculated=!1,this.isProvided=!1,this.period=void 0,this.emit=this.emit.bind(this)}return a(e,[{key:"init",value:function(e){return this.promise=new Promise(e),this.promise}},{key:"addListener",value:function(e){this.listeners.add(e)}},{key:"removeListener",value:function(e){this.listeners.delete(e)}},{key:"emit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.event;this.listeners.forEach(function(t){return t(e)})}},{key:"isValid",get:function(){return this.isProvided||this.isCalculated}}]),e}();r.default=n},{}],196:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=function(){function e(){i(this,e),this.modules={}}return a(e,[{key:"addModule",value:function(e,t){this.modules[e]=t}},{key:"getModule",value:function(e){return this.modules[e]}},{key:"requireModule",value:function(e){var t=this.getModule(e);return t.promise?t.promise:t.init()}},{key:"init",value:function(){for(var e=this,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];Array.isArray(r[0])&&(r=r[0]);var a=r.map(function(t){return e.getModule(t).init()});return Promise.all(a)}},{key:"addListener",value:function(e,t){this.getModule(e).addListener(t)}},{key:"removeListener",value:function(e,t){this.getModule(e).removeListener(t)}}]),e}();r.default=new n},{}],197:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("./MotionInput")),n=i(e("./DeviceOrientationModule")),o=i(e("./DeviceMotionModule")),s=i(e("./EnergyModule"));a.default.addModule("devicemotion",o.default),a.default.addModule("deviceorientation",n.default),a.default.addModule("accelerationIncludingGravity",o.default.accelerationIncludingGravity),a.default.addModule("acceleration",o.default.acceleration),a.default.addModule("rotationRate",o.default.rotationRate),a.default.addModule("orientation",n.default.orientation),a.default.addModule("orientationAlt",n.default.orientationAlt),a.default.addModule("energy",s.default),r.default=a.default},{"./DeviceMotionModule":192,"./DeviceOrientationModule":193,"./EnergyModule":194,"./MotionInput":196}],198:[function(e,t,r){(function(e){(function(){"use strict";function i(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function a(e,t,r){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&r&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(i=i[/[\d.]+$/.exec(e)])&&(e="Windows "+i),e=String(e),t&&r&&(e=e.replace(RegExp(t,"i"),r)),e=o(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function n(e,t){var r=-1,i=e?e.length:0;if("number"==typeof i&&i>-1&&i<=g)for(;++r<i;)t(e[r],r,e);else s(e,t)}function o(e){return e=h(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:i(e)}function s(e,t){for(var r in e)x.call(e,r)&&t(e[r],r,e)}function l(e){return null==e?i(e):M.call(e).slice(8,-1)}function u(e,t){var r=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(r)||"object"==r&&!e[t])}function c(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function f(e,t){var r=null;return n(e,function(i,a){r=t(r,i,a,e)}),r}function h(e){return String(e).replace(/^ +| +$/g,"")}function d(e){function t(t){return f(t,function(t,r){var i=r.pattern||c(r);return!t&&(t=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(r.label&&!RegExp(i,"i").test(r.label)?r.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),r=r.label||r,t=o(t[0].replace(RegExp(i,"i"),r).replace(RegExp("; *(?:"+r+"[_-])?","i")," ").replace(RegExp("("+r+")[-_.]?(\\w)","i"),"$1 $2"))),t})}var r=m,i=e&&"object"==typeof e&&"String"!=l(e);i&&(r=e,e=null);var n=r.navigator||{},p=n.userAgent||"";e||(e=p);var _,v,y=i||k==b,g=i?!!n.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(M.toString()),S=i?"Object":"ScriptBridgingProxyObject",x=i?"Object":"Environment",C=i&&r.java?"JavaPackage":l(r.java),j=i?"Object":"RuntimeObject",P=/\bJava/.test(C)&&r.java,R=P&&l(r.environment)==x,O=P?"a":"",E=P?"b":"",T=r.document||{},A=r.operamini||r.opera,I=w.test(I=i&&A?A["[[Class]]"]:l(A))?I:A=null,L=e,F=[],B=null,D=e==p,z=D&&A&&"function"==typeof A.version&&A.version(),N=function(t){return f(t,function(t,r){return t||RegExp("\\b"+(r.pattern||c(r))+"\\b","i").exec(e)&&(r.label||r)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),q=function(t){return f(t,function(t,r){return t||RegExp("\\b"+(r.pattern||c(r))+"\\b","i").exec(e)&&(r.label||r)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),U=t([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),V=function(t){return f(t,function(t,r,i){return t||(r[U]||r[/^[a-z]+(?: +[a-z]+\b)*/i.exec(U)]||RegExp("\\b"+c(i)+"(?:\\b|\\w*\\d)","i").exec(e))&&i})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),G=function(t){return f(t,function(t,r){var i=r.pattern||c(r);return!t&&(t=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=a(t,i,r.label||r)),t})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(N&&(N=[N]),V&&!U&&(U=t([V])),(_=/\bGoogle TV\b/.exec(U))&&(U=_[0]),/\bSimulator\b/i.test(e)&&(U=(U?U+" ":"")+"Simulator"),"Opera Mini"==q&&/\bOPiOS\b/.test(e)&&F.push("running in Turbo/Uncompressed mode"),"IE"==q&&/\blike iPhone OS\b/.test(e)?(V=(_=d(e.replace(/like iPhone OS/,""))).manufacturer,U=_.product):/^iP/.test(U)?(q||(q="Safari"),G="iOS"+((_=/ OS ([\d_]+)/i.exec(e))?" "+_[1].replace(/_/g,"."):"")):"Konqueror"!=q||/buntu/i.test(G)?V&&"Google"!=V&&(/Chrome/.test(q)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(U))||/\bAndroid\b/.test(G)&&/^Chrome/.test(q)&&/\bVersion\//i.test(e)?(q="Android Browser",G=/\bAndroid\b/.test(G)?G:"Android"):"Silk"==q?(/\bMobi/i.test(e)||(G="Android",F.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&F.unshift("accelerated")):"PaleMoon"==q&&(_=/\bFirefox\/([\d.]+)\b/.exec(e))?F.push("identifying as Firefox "+_[1]):"Firefox"==q&&(_=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(G||(G="Firefox OS"),U||(U=_[1])):!q||(_=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(q))?(q&&!U&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(_+"/")+8))&&(q=null),(_=U||V||G)&&(U||V||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(G))&&(q=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(G)?G:_)+" Browser")):"Electron"==q&&(_=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&F.push("Chromium "+_):G="Kubuntu",z||(z=function(t){return f(t,function(t,r){return t||(RegExp(r+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",c(q),"(?:Firefox|Minefield|NetFront)"])),(_="iCab"==N&&parseFloat(z)>3&&"WebKit"||/\bOpera\b/.test(q)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(N)&&"WebKit"||!N&&/\bMSIE\b/i.test(e)&&("Mac OS"==G?"Tasman":"Trident")||"WebKit"==N&&/\bPlayStation\b(?! Vita\b)/i.test(q)&&"NetFront")&&(N=[_]),"IE"==q&&(_=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(q+=" Mobile",G="Windows Phone "+(/\+$/.test(_)?_:_+".x"),F.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(q="IE Mobile",G="Windows Phone 8.x",F.unshift("desktop mode"),z||(z=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=q&&"Trident"==N&&(_=/\brv:([\d.]+)/.exec(e))&&(q&&F.push("identifying as "+q+(z?" "+z:"")),q="IE",z=_[1]),D){if(u(r,"global"))if(P&&(L=(_=P.lang.System).getProperty("os.arch"),G=G||_.getProperty("os.name")+" "+_.getProperty("os.version")),y&&u(r,"system")&&(_=[r.system])[0]){G||(G=_[0].os||null);try{_[1]=r.require("ringo/engine").version,z=_[1].join("."),q="RingoJS"}catch(e){_[0].global.system==r.system&&(q="Narwhal")}}else"object"==typeof r.process&&!r.process.browser&&(_=r.process)?"object"==typeof _.versions?"string"==typeof _.versions.electron?(F.push("Node "+_.versions.node),q="Electron",z=_.versions.electron):"string"==typeof _.versions.nw&&(F.push("Chromium "+z,"Node "+_.versions.node),q="NW.js",z=_.versions.nw):(q="Node.js",L=_.arch,G=_.platform,z=(z=/[\d.]+/.exec(_.version))?z[0]:"unknown"):R&&(q="Rhino");else l(_=r.runtime)==S?(q="Adobe AIR",G=_.flash.system.Capabilities.os):l(_=r.phantom)==j?(q="PhantomJS",z=(_=_.version||null)&&_.major+"."+_.minor+"."+_.patch):"number"==typeof T.documentMode&&(_=/\bTrident\/(\d+)/i.exec(e))?(z=[z,T.documentMode],(_=+_[1]+4)!=z[1]&&(F.push("IE "+z[1]+" mode"),N&&(N[1]=""),z[1]=_),z="IE"==q?String(z[1].toFixed(1)):z[0]):"number"==typeof T.documentMode&&/^(?:Chrome|Firefox)\b/.test(q)&&(F.push("masking as "+q+" "+z),q="IE",z="11.0",N=["Trident"],G="Windows");G=G&&o(G)}if(z&&(_=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(z)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(D&&n.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(B=/b/i.test(_)?"beta":"alpha",z=z.replace(RegExp(_+"\\+?$"),"")+("beta"==B?E:O)+(/\d+\+?/.exec(_)||"")),"Fennec"==q||"Firefox"==q&&/\b(?:Android|Firefox OS)\b/.test(G))q="Firefox Mobile";else if("Maxthon"==q&&z)z=z.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(U))"Xbox 360"==U&&(G=null),"Xbox 360"==U&&/\bIEMobile\b/.test(e)&&F.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(q)&&(!q||U||/Browser|Mobi/.test(q))||"Windows CE"!=G&&!/Mobi/i.test(e))if("IE"==q&&D)try{null===r.external&&F.unshift("platform preview")}catch(e){F.unshift("embedded")}else(/\bBlackBerry\b/.test(U)||/\bBB10\b/.test(e))&&(_=(RegExp(U.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||z)?(G=((_=[_,/BB10/.test(e)])[1]?(U=null,V="BlackBerry"):"Device Software")+" "+_[0],z=null):this!=s&&"Wii"!=U&&(D&&A||/Opera/.test(q)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==q&&/\bOS X (?:\d+\.){2,}/.test(G)||"IE"==q&&(G&&!/^Win/.test(G)&&z>5.5||/\bWindows XP\b/.test(G)&&z>8||8==z&&!/\bTrident\b/.test(e)))&&!w.test(_=d.call(s,e.replace(w,"")+";"))&&_.name&&(_="ing as "+_.name+((_=_.version)?" "+_:""),w.test(q)?(/\bIE\b/.test(_)&&"Mac OS"==G&&(G=null),_="identify"+_):(_="mask"+_,q=I?o(I.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(_)&&(G=null),D||(z=null)),N=["Presto"],F.push(_));else q+=" Mobile";(_=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(_=[parseFloat(_.replace(/\.(\d)$/,".0$1")),_],"Safari"==q&&"+"==_[1].slice(-1)?(q="WebKit Nightly",B="alpha",z=_[1].slice(0,-1)):z!=_[1]&&z!=(_[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(z=null),_[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==_[0]&&537.36==_[2]&&parseFloat(_[1])>=28&&"WebKit"==N&&(N=["Blink"]),D&&(g||_[1])?(N&&(N[1]="like Chrome"),_=_[1]||((_=_[0])<530?1:_<532?2:_<532.05?3:_<533?4:_<534.03?5:_<534.07?6:_<534.1?7:_<534.13?8:_<534.16?9:_<534.24?10:_<534.3?11:_<535.01?12:_<535.02?"13+":_<535.07?15:_<535.11?16:_<535.19?17:_<536.05?18:_<536.1?19:_<537.01?20:_<537.11?"21+":_<537.13?23:_<537.18?24:_<537.24?25:_<537.36?26:"Blink"!=N?"27":"28")):(N&&(N[1]="like Safari"),_=(_=_[0])<400?1:_<500?2:_<526?3:_<533?4:_<534?"4+":_<535?5:_<537?6:_<538?7:_<601?8:"8"),N&&(N[1]+=" "+(_+="number"==typeof _?".x":/[.+]/.test(_)?"":"+")),"Safari"==q&&(!z||parseInt(z)>45)&&(z=_)),"Opera"==q&&(_=/\bzbov|zvav$/.exec(G))?(q+=" ",F.unshift("desktop mode"),"zvav"==_?(q+="Mini",z=null):q+="Mobile",G=G.replace(RegExp(" *"+_+"$"),"")):"Safari"==q&&/\bChrome\b/.exec(N&&N[1])&&(F.unshift("desktop mode"),q="Chrome Mobile",z=null,/\bOS X\b/.test(G)?(V="Apple",G="iOS 4.3+"):G=null),z&&0==z.indexOf(_=/[\d.]+$/.exec(G))&&e.indexOf("/"+_+"-")>-1&&(G=h(G.replace(_,""))),N&&!/\b(?:Avant|Nook)\b/.test(q)&&(/Browser|Lunascape|Maxthon/.test(q)||"Safari"!=q&&/^iOS/.test(G)&&/\bSafari\b/.test(N[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(q)&&N[1])&&(_=N[N.length-1])&&F.push(_),F.length&&(F=["("+F.join("; ")+")"]),V&&U&&U.indexOf(V)<0&&F.push("on "+V),U&&F.push((/^on /.test(F[F.length-1])?"":"on ")+U),G&&(_=/ ([\d.+]+)$/.exec(G),v=_&&"/"==G.charAt(G.length-_[0].length-1),G={architecture:32,family:_&&!v?G.replace(_[0],""):G,version:_?_[1]:null,toString:function(){var e=this.version;return this.family+(e&&!v?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(_=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(L))&&!/\bi686\b/i.test(L)?(G&&(G.architecture=64,G.family=G.family.replace(RegExp(" *"+_),"")),q&&(/\bWOW64\b/i.test(e)||D&&/\w(?:86|32)$/.test(n.cpuClass||n.platform)&&!/\bWin64; x64\b/i.test(e))&&F.unshift("32-bit")):G&&/^OS X/.test(G.family)&&"Chrome"==q&&parseFloat(z)>=39&&(G.architecture=64),e||(e=null);var W={};return W.description=e,W.layout=N&&N[0],W.manufacturer=V,W.name=q,W.prerelease=B,W.product=U,W.ua=e,W.version=q&&z,W.os=G||{architecture:null,family:null,version:null,toString:function(){return"null"}},W.parse=d,W.toString=function(){return this.description||""},W.version&&F.unshift(z),W.name&&F.unshift(q),G&&q&&(G!=String(G).split(" ")[0]||G!=q.split(" ")[0]&&!U)&&F.push(U?"("+G+")":"on "+G),F.length&&(W.description=F.join(" ")),W}var p={function:!0,object:!0},m=p[typeof window]&&window||this,b=m,_=p[typeof r]&&r,v=p[typeof t]&&t&&!t.nodeType&&t,y=_&&v&&"object"==typeof e&&e;!y||y.global!==y&&y.window!==y&&y.self!==y||(m=y);var g=Math.pow(2,53)-1,w=/\bOpera/,k=this,S=Object.prototype,x=S.hasOwnProperty,M=S.toString,C=d();_&&v?s(C,function(e,t){_[t]=e}):m.platform=C}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],199:[function(e,t,r){(function(e){"use strict";!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,r,i,a){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var n,o,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,i)});case 4:return e.nextTick(function(){t.call(null,r,i,a)});default:for(n=new Array(s-1),o=0;o<n.length;)n[o++]=arguments[o];return e.nextTick(function(){t.apply(null,n)})}}:t.exports=e.nextTick}).call(this,e("_process"))},{_process:200}],200:[function(e,t,r){function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function n(e){if(f===setTimeout)return setTimeout(e,0);if((f===i||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===a||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){b&&p&&(b=!1,p.length?m=p.concat(m):_=-1,m.length&&l())}function l(){if(!b){var e=n(s);b=!0;for(var t=m.length;t;){for(p=m,m=[];++_<t;)p&&p[_].run();_=-1,t=m.length}p=null,b=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var f,h,d=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:i}catch(e){f=i}try{h="function"==typeof clearTimeout?clearTimeout:a}catch(e){h=a}}();var p,m=[],b=!1,_=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];m.push(new u(e,t)),1!==m.length||b||n(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],201:[function(e,t,r){(function(e){!function(i){function a(e){throw new RangeError(E[e])}function n(e,t){for(var r=e.length,i=[];r--;)i[r]=t(e[r]);return i}function o(e,t){var r=e.split("@"),i="";return r.length>1&&(i=r[0]+"@",e=r[1]),i+n((e=e.replace(O,".")).split("."),t).join(".")}function s(e){for(var t,r,i=[],a=0,n=e.length;a<n;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<n?56320==(64512&(r=e.charCodeAt(a++)))?i.push(((1023&t)<<10)+(1023&r)+65536):(i.push(t),a--):i.push(t);return i}function l(e){return n(e,function(e){var t="";return e>65535&&(t+=I((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=I(e)}).join("")}function u(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:g}function c(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function f(e,t,r){var i=0;for(e=r?A(e/x):e>>1,e+=A(e/t);e>T*k>>1;i+=g)e=A(e/T);return A(i+(T+1)*e/(e+S))}function h(e){var t,r,i,n,o,s,c,h,d,p,m=[],b=e.length,_=0,v=C,S=M;for((r=e.lastIndexOf(j))<0&&(r=0),i=0;i<r;++i)e.charCodeAt(i)>=128&&a("not-basic"),m.push(e.charCodeAt(i));for(n=r>0?r+1:0;n<b;){for(o=_,s=1,c=g;n>=b&&a("invalid-input"),((h=u(e.charCodeAt(n++)))>=g||h>A((y-_)/s))&&a("overflow"),_+=h*s,d=c<=S?w:c>=S+k?k:c-S,!(h<d);c+=g)s>A(y/(p=g-d))&&a("overflow"),s*=p;S=f(_-o,t=m.length+1,0==o),A(_/t)>y-v&&a("overflow"),v+=A(_/t),_%=t,m.splice(_++,0,v)}return l(m)}function d(e){var t,r,i,n,o,l,u,h,d,p,m,b,_,v,S,x=[];for(b=(e=s(e)).length,t=C,r=0,o=M,l=0;l<b;++l)(m=e[l])<128&&x.push(I(m));for(i=n=x.length,n&&x.push(j);i<b;){for(u=y,l=0;l<b;++l)(m=e[l])>=t&&m<u&&(u=m);for(u-t>A((y-r)/(_=i+1))&&a("overflow"),r+=(u-t)*_,t=u,l=0;l<b;++l)if((m=e[l])<t&&++r>y&&a("overflow"),m==t){for(h=r,d=g;p=d<=o?w:d>=o+k?k:d-o,!(h<p);d+=g)S=h-p,v=g-p,x.push(I(c(p+S%v,0))),h=A(S/v);x.push(I(c(h,0))),o=f(r,_,i==n),r=0,++i}++r,++t}return x.join("")}var p="object"==typeof r&&r&&!r.nodeType&&r,m="object"==typeof t&&t&&!t.nodeType&&t,b="object"==typeof e&&e;b.global!==b&&b.window!==b&&b.self!==b||(i=b);var _,v,y=2147483647,g=36,w=1,k=26,S=38,x=700,M=72,C=128,j="-",P=/^xn--/,R=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=g-w,A=Math.floor,I=String.fromCharCode;if(_={version:"1.4.1",ucs2:{decode:s,encode:l},decode:h,encode:d,toASCII:function(e){return o(e,function(e){return R.test(e)?"xn--"+d(e):e})},toUnicode:function(e){return o(e,function(e){return P.test(e)?h(e.slice(4).toLowerCase()):e})}},p&&m)if(t.exports==p)m.exports=_;else for(v in _)_.hasOwnProperty(v)&&(p[v]=_[v]);else i.punycode=_}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],202:[function(e,t,r){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,n){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var l=1e3;n&&"number"==typeof n.maxKeys&&(l=n.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var f,h,d,p,m=e[c].replace(s,"%20"),b=m.indexOf(r);b>=0?(f=m.substr(0,b),h=m.substr(b+1)):(f=m,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),i(o,d)?a(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],203:[function(e,t,r){"use strict";function i(e,t){if(e.map)return e.map(t);for(var r=[],i=0;i<e.length;i++)r.push(t(e[i],i));return r}var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?i(o(e),function(o){var s=encodeURIComponent(a(o))+r;return n(e[o])?i(e[o],function(e){return s+encodeURIComponent(a(e))}).join(t):s+encodeURIComponent(a(e[o]))}).join(t):s?encodeURIComponent(a(s))+r+encodeURIComponent(a(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],204:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":202,"./encode":203}],205:[function(e,t,r){"use strict";function i(e){if(!(this instanceof i))return new i(e);u.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",a)}function a(){this.allowHalfOpen||this._writableState.ended||o(n,this)}function n(e){e.end()}var o=e("process-nextick-args"),s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=i;var l=e("core-util-is");l.inherits=e("inherits");var u=e("./_stream_readable"),c=e("./_stream_writable");l.inherits(i,u);for(var f=s(c.prototype),h=0;h<f.length;h++){var d=f[h];i.prototype[d]||(i.prototype[d]=c.prototype[d])}Object.defineProperty(i.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),i.prototype._destroy=function(e,t){this.push(null),this.end(),o(t,e)}},{"./_stream_readable":207,"./_stream_writable":209,"core-util-is":174,inherits:178,"process-nextick-args":199}],206:[function(e,t,r){"use strict";function i(e){if(!(this instanceof i))return new i(e);a.call(this,e)}t.exports=i;var a=e("./_stream_transform"),n=e("core-util-is");n.inherits=e("inherits"),n.inherits(i,a),i.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":208,"core-util-is":174,inherits:178}],207:[function(e,t,r){(function(r,i){"use strict";function a(e){return B.from(e)}function n(e){return B.isBuffer(e)||e instanceof D}function o(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?I(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function s(t,r){A=A||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof A&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new V,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(U||(U=e("string_decoder/").StringDecoder),this.decoder=new U(t.encoding),this.encoding=t.encoding)}function l(t){if(A=A||e("./_stream_duplex"),!(this instanceof l))return new l(t);this._readableState=new s(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),F.call(this)}function u(e,t,r,i,n){var o=e._readableState;if(null===t)o.reading=!1,m(e,o);else{var s;n||(s=f(o,t)),s?e.emit("error",s):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===B.prototype||(t=a(t)),i?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):c(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?c(e,o,t,!1):v(e,o)):c(e,o,t,!1))):i||(o.reading=!1)}return h(o)}function c(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&b(e)),v(e,t)}function f(e,t){var r;return n(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function d(e){return e>=H?e=H:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=d(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function m(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,b(e)}}function b(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(q("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?T(_,e):_(e))}function _(e){q("emit readable"),e.emit("readable"),x(e)}function v(e,t){t.readingMore||(t.readingMore=!0,T(y,e,t))}function y(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(q("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;q("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&L(e,"data")&&(t.flowing=!0,x(e))}}function w(e){q("readable nexttick read 0"),e.read(0)}function k(e,t){t.resumeScheduled||(t.resumeScheduled=!0,T(S,e,t))}function S(e,t){t.reading||(q("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),x(e),t.flowing&&!t.reading&&e.read(0)}function x(e){var t=e._readableState;for(q("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=C(e,t.buffer,t.decoder),r}function C(e,t,r){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():r?j(e,t):P(e,t),i}function j(e,t){var r=t.head,i=1,a=r.data;for(e-=a.length;r=r.next;){var n=r.data,o=e>n.length?n.length:e;if(o===n.length?a+=n:a+=n.slice(0,e),0===(e-=o)){o===n.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=n.slice(o));break}++i}return t.length-=i,a}function P(e,t){var r=B.allocUnsafe(e),i=t.head,a=1;for(i.data.copy(r),e-=i.data.length;i=i.next;){var n=i.data,o=e>n.length?n.length:e;if(n.copy(r,r.length-e,0,o),0===(e-=o)){o===n.length?(++a,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=n.slice(o));break}++a}return t.length-=a,r}function R(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,T(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function E(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}var T=e("process-nextick-args");t.exports=l;var A,I=e("isarray");l.ReadableState=s;e("events").EventEmitter;var L=function(e,t){return e.listeners(t).length},F=e("./internal/streams/stream"),B=e("safe-buffer").Buffer,D=i.Uint8Array||function(){},z=e("core-util-is");z.inherits=e("inherits");var N=e("util"),q=void 0;q=N&&N.debuglog?N.debuglog("stream"):function(){};var U,V=e("./internal/streams/BufferList"),G=e("./internal/streams/destroy");z.inherits(l,F);var W=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=G.destroy,l.prototype._undestroy=G.undestroy,l.prototype._destroy=function(e,t){this.push(null),t(e)},l.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=B.from(e,t),t=""),r=!0),u(this,e,t,!1,r)},l.prototype.unshift=function(e){return u(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(t){return U||(U=e("string_decoder/").StringDecoder),this._readableState.decoder=new U(t),this._readableState.encoding=t,this};var H=8388608;l.prototype.read=function(e){q("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return q("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):b(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&R(this),null;var i=t.needReadable;q("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&q("length less than watermark",i=!0),t.ended||t.reading?q("reading or ended",i=!1):i&&(q("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(r,t)));var a;return null===(a=e>0?M(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&R(this)),null!==a&&this.emit("data",a),a},l.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},l.prototype.pipe=function(e,t){function i(e,t){q("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,n())}function a(){q("onend"),e.end()}function n(){q("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",m),e.removeListener("error",l),e.removeListener("unpipe",i),h.removeListener("end",a),h.removeListener("end",f),h.removeListener("data",s),b=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||m()}function s(t){q("ondata"),_=!1,!1!==e.write(t)||_||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&-1!==E(d.pipes,e))&&!b&&(q("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,_=!0),h.pause())}function l(t){q("onerror",t),f(),e.removeListener("error",l),0===L(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),f()}function c(){q("onfinish"),e.removeListener("close",u),f()}function f(){q("unpipe"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,q("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?a:f;d.endEmitted?T(p):h.once("end",p),e.on("unpipe",i);var m=g(h);e.on("drain",m);var b=!1,_=!1;return h.on("data",s),o(e,"error",l),e.once("close",u),e.once("finish",c),e.emit("pipe",h),d.flowing||(q("pipe resume"),h.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var i=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var n=0;n<a;n++)i[n].emit("unpipe",this,r);return this}var o=E(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},l.prototype.on=function(e,t){var r=F.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&b(this):T(w,this))}return r},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var e=this._readableState;return e.flowing||(q("resume"),e.flowing=!0,k(this,e)),this},l.prototype.pause=function(){return q("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(q("pause"),this._readableState.flowing=!1,this.emit("pause")),this},l.prototype.wrap=function(e){var t=this._readableState,r=!1,i=this;e.on("end",function(){if(q("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(a){q("wrapped data"),t.decoder&&(a=t.decoder.write(a)),(!t.objectMode||null!==a&&void 0!==a)&&(t.objectMode||a&&a.length)&&(i.push(a)||(r=!0,e.pause()))});for(var a in e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var n=0;n<W.length;n++)e.on(W[n],i.emit.bind(i,W[n]));return i._read=function(t){q("wrapped _read",t),r&&(r=!1,e.resume())},i},l._fromList=M}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":205,"./internal/streams/BufferList":210,"./internal/streams/destroy":211,"./internal/streams/stream":212,_process:200,"core-util-is":174,events:175,inherits:178,isarray:180,"process-nextick-args":199,"safe-buffer":214,"string_decoder/":219,util:39}],208:[function(e,t,r){"use strict";function i(e){this.afterTransform=function(t,r){return a(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(e,t,r){var i=e._transformState;i.transforming=!1;var a=i.writecb;if(!a)return e.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!==r&&void 0!==r&&e.push(r),a(t);var n=e._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&e._read(n.highWaterMark)}function n(e){if(!(this instanceof n))return new n(e);s.call(this,e),this._transformState=new i(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){o(t,e,r)}):o(t)})}function o(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var i=e._writableState,a=e._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(a.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=n;var s=e("./_stream_duplex"),l=e("core-util-is");l.inherits=e("inherits"),l.inherits(n,s),n.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},n.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},n.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var a=this._readableState;(i.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},n.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},n.prototype._destroy=function(e,t){var r=this;s.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},{"./_stream_duplex":205,"core-util-is":174,inherits:178}],209:[function(e,t,r){(function(r,i){"use strict";function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){C(t,e)}}function n(e){return A.from(e)}function o(e){return A.isBuffer(e)||e instanceof I}function s(){}function l(t,r){P=P||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof P&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){_(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function u(t){if(P=P||e("./_stream_duplex"),!(F.call(u,this)||this instanceof P))return new u(t);this._writableState=new l(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),T.call(this)}function c(e,t){var r=new Error("write after end");e.emit("error",r),j(t,r)}function f(e,t,r,i){var a=!0,n=!1;return null===r?n=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n&&(e.emit("error",n),j(i,n),a=!1),a}function h(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=A.from(t,r)),t}function d(e,t,r,i,a,n){if(!r){var o=h(t,i,a);i!==o&&(r=!0,a="buffer",i=o)}var s=t.objectMode?1:i.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:a,isBuf:r,callback:n,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else p(e,t,!1,s,i,a,n);return l}function p(e,t,r,i,a,n,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(a,t.onwrite):e._write(a,n,t.onwrite),t.sync=!1}function m(e,t,r,i,a){--t.pendingcb,r?(j(a,i),j(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(a(i),e._writableState.errorEmitted=!0,e.emit("error",i),x(e,t))}function b(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function _(e,t){var r=e._writableState,i=r.sync,a=r.writecb;if(b(r),t)m(e,r,i,t,a);else{var n=w(r);n||r.corked||r.bufferProcessing||!r.bufferedRequest||g(e,r),i?R(v,e,r,n,a):v(e,r,n,a)}}function v(e,t,r,i){r||y(e,t),t.pendingcb--,i(),x(e,t)}function y(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function g(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var s=0,l=!0;r;)n[s]=r,r.isBuf||(l=!1),r=r.next,s+=1;n.allBuffers=l,p(e,t,!0,t.length,n,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t)}else{for(;r;){var u=r.chunk,c=r.encoding,f=r.callback;if(p(e,t,!1,t.objectMode?1:u.length,u,c,f),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function S(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,j(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function x(e,t){var r=w(t);return r&&(S(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function M(e,t,r){t.ending=!0,x(e,t),r&&(t.finished?j(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function C(e,t,r){var i=e.entry;for(e.entry=null;i;){var a=i.callback;t.pendingcb--,a(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var j=e("process-nextick-args");t.exports=u;var P,R=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:j;u.WritableState=l;var O=e("core-util-is");O.inherits=e("inherits");var E={deprecate:e("util-deprecate")},T=e("./internal/streams/stream"),A=e("safe-buffer").Buffer,I=i.Uint8Array||function(){},L=e("./internal/streams/destroy");O.inherits(u,T),l.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(l.prototype,"buffer",{get:E.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var F;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(e){return!!F.call(this,e)||e&&e._writableState instanceof l}})):F=function(e){return e instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(e,t,r){var i=this._writableState,a=!1,l=o(e)&&!i.objectMode;return l&&!A.isBuffer(e)&&(e=n(e)),"function"==typeof t&&(r=t,t=null),l?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=s),i.ended?c(this,r):(l||f(this,i,e,r))&&(i.pendingcb++,a=d(this,i,l,e,t,r)),a},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||g(this,e))},u.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},u.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||M(this,i,r)},Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=L.destroy,u.prototype._undestroy=L.undestroy,u.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":205,"./internal/streams/destroy":211,"./internal/streams/stream":212,_process:200,"core-util-is":174,inherits:178,"process-nextick-args":199,"safe-buffer":214,"util-deprecate":223}],210:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,r){e.copy(t,r)}var n=e("safe-buffer").Buffer;t.exports=function(){function e(){i(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t=n.allocUnsafe(e>>>0),r=this.head,i=0;r;)a(r.data,t,i),i+=r.data.length,r=r.next;return t},e}()},{"safe-buffer":214}],211:[function(e,t,r){"use strict";function i(e,t){e.emit("error",t)}var a=e("process-nextick-args");t.exports={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;n||o?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a(i,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":199}],212:[function(e,t,r){t.exports=e("events").EventEmitter},{events:175}],213:[function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":205,"./lib/_stream_passthrough.js":206,"./lib/_stream_readable.js":207,"./lib/_stream_transform.js":208,"./lib/_stream_writable.js":209}],214:[function(e,t,r){function i(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return o(e,t,r)}var n=e("buffer"),o=n.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(i(n,r),r.Buffer=a),i(o,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=o(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:41}],215:[function(e,t,r){(function(t){var i=e("./lib/request"),a=e("xtend"),n=e("builtin-status-codes"),o=e("url"),s=r;s.request=function(e,r){e="string"==typeof e?o.parse(e):a(e);var n=-1===t.location.protocol.search(/^https?:$/)?"http:":"",s=e.protocol||n,l=e.hostname||e.host,u=e.port,c=e.path||"/";l&&-1!==l.indexOf(":")&&(l="["+l+"]"),e.url=(l?s+"//"+l:"")+(u?":"+u:"")+c,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var f=new i(e);return r&&f.on("response",r),f},s.get=function(e,t){var r=s.request(e,t);return r.end(),r},s.Agent=function(){},s.Agent.defaultMaxSockets=4,s.STATUS_CODES=n,s.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":217,"builtin-status-codes":42,url:221,xtend:288}],216:[function(e,t,r){(function(e){function t(){if(void 0!==n)return n;if(e.XMLHttpRequest){n=new e.XMLHttpRequest;try{n.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){n=null}}else n=null;return n}function i(e){var r=t();if(!r)return!1;try{return r.responseType=e,r.responseType===e}catch(e){}return!1}function a(e){return"function"==typeof e}r.fetch=a(e.fetch)&&a(e.ReadableStream),r.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),r.blobConstructor=!0}catch(e){}var n,o=void 0!==e.ArrayBuffer,s=o&&a(e.ArrayBuffer.prototype.slice);r.arraybuffer=r.fetch||o&&i("arraybuffer"),r.msstream=!r.fetch&&s&&i("ms-stream"),r.mozchunkedarraybuffer=!r.fetch&&o&&i("moz-chunked-arraybuffer"),r.overrideMimeType=r.fetch||!!t()&&a(t().overrideMimeType),r.vbArray=a(e.VBArray),n=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],217:[function(e,t,r){(function(r,i,a){function n(e,t){return s.fetch&&t?"fetch":s.mozchunkedarraybuffer?"moz-chunked-arraybuffer":s.msstream?"ms-stream":s.arraybuffer&&e?"arraybuffer":s.vbArray&&e?"text:vbarray":"text"}function o(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}var s=e("./capability"),l=e("inherits"),u=e("./response"),c=e("readable-stream"),f=e("to-arraybuffer"),h=u.IncomingMessage,d=u.readyStates,p=t.exports=function(e){var t=this;c.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new a(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(r){t.setHeader(r,e.headers[r])});var r,i=!0;if("disable-fetch"===e.mode||"timeout"in e)i=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!s.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");r=!0}t._mode=n(r,i),t.on("finish",function(){t._onFinish()})};l(p,c.Writable),p.prototype.setHeader=function(e,t){var r=this,i=e.toLowerCase();-1===m.indexOf(i)&&(r._headers[i]={name:e,value:t})},p.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},p.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},p.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,n=e._headers,o=null;"GET"!==t.method&&"HEAD"!==t.method&&(o=s.blobConstructor?new i.Blob(e._body.map(function(e){return f(e)}),{type:(n["content-type"]||{}).value||""}):a.concat(e._body).toString());var l=[];if(Object.keys(n).forEach(function(e){var t=n[e].name,r=n[e].value;Array.isArray(r)?r.forEach(function(e){l.push([t,e])}):l.push([t,r])}),"fetch"===e._mode)i.fetch(e._opts.url,{method:e._opts.method,headers:l,body:o||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)});else{var u=e._xhr=new i.XMLHttpRequest;try{u.open(e._opts.method,e._opts.url,!0)}catch(t){return void r.nextTick(function(){e.emit("error",t)})}"responseType"in u&&(u.responseType=e._mode.split(":")[0]),"withCredentials"in u&&(u.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in u&&u.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in t&&(u.timeout=t.timeout,u.ontimeout=function(){e.emit("timeout")}),l.forEach(function(e){u.setRequestHeader(e[0],e[1])}),e._response=null,u.onreadystatechange=function(){switch(u.readyState){case d.LOADING:case d.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(u.onprogress=function(){e._onXHRProgress()}),u.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{u.send(o)}catch(t){return void r.nextTick(function(){e.emit("error",t)})}}}},p.prototype._onXHRProgress=function(){var e=this;o(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},p.prototype._connect=function(){var e=this;e._destroyed||(e._response=new h(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},p.prototype._write=function(e,t,r){this._body.push(e),r()},p.prototype.abort=p.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},p.prototype.end=function(e,t,r){var i=this;"function"==typeof e&&(r=e,e=void 0),c.Writable.prototype.end.call(i,e,t,r)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var m=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":216,"./response":218,_process:200,buffer:41,inherits:178,"readable-stream":213,"to-arraybuffer":220}],218:[function(e,t,r){(function(t,i,a){var n=e("./capability"),o=e("inherits"),s=e("readable-stream"),l=r.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=r.IncomingMessage=function(e,r,i){function o(){u.read().then(function(e){l._destroyed||(e.done?l.push(null):(l.push(new a(e.value)),o()))}).catch(function(e){l.emit("error",e)})}var l=this;if(s.Readable.call(l),l._mode=i,l.headers={},l.rawHeaders=[],l.trailers={},l.rawTrailers=[],l.on("end",function(){t.nextTick(function(){l.emit("close")})}),"fetch"===i){l._fetchResponse=r,l.url=r.url,l.statusCode=r.status,l.statusMessage=r.statusText,r.headers.forEach(function(e,t){l.headers[t.toLowerCase()]=e,l.rawHeaders.push(t,e)});var u=r.body.getReader();o()}else if(l._xhr=e,l._pos=0,l.url=e.responseURL,l.statusCode=e.status,l.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===l.headers[r]&&(l.headers[r]=[]),l.headers[r].push(t[2])):void 0!==l.headers[r]?l.headers[r]+=", "+t[2]:l.headers[r]=t[2],l.rawHeaders.push(t[1],t[2])}}),l._charset="x-user-defined",!n.overrideMimeType){var c=l.rawHeaders["mime-type"];if(c){var f=c.match(/;\s*charset=([^;])(;|$)/);f&&(l._charset=f[1].toLowerCase())}l._charset||(l._charset="utf-8")}};o(u,s.Readable),u.prototype._read=function(){},u.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==l.DONE)break;try{r=new i.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new a(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var n=r.substr(e._pos);if("x-user-defined"===e._charset){for(var o=new a(n.length),s=0;s<n.length;s++)o[s]=255&n.charCodeAt(s);e.push(o)}else e.push(n,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==l.DONE||!t.response)break;r=t.response,e.push(new a(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==l.LOADING||!r)break;e.push(new a(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==l.LOADING)break;var u=new i.MSStreamReader;u.onprogress=function(){u.result.byteLength>e._pos&&(e.push(new a(new Uint8Array(u.result.slice(e._pos)))),e._pos=u.result.byteLength)},u.onload=function(){e.push(null)},u.readAsArrayBuffer(r)}e._xhr.readyState===l.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":216,_process:200,buffer:41,inherits:178,"readable-stream":213}],219:[function(e,t,r){"use strict";function i(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=i(e);if("string"!=typeof t&&(b.isEncoding===_||!_(e)))throw new Error("Unknown encoding: "+e);return t||e}function n(e){this.encoding=a(e);var t;switch(this.encoding){case"utf16le":this.text=c,this.end=f,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=h,this.end=d,t=3;break;default:return this.write=p,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=b.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function s(e,t,r){var i=t.length-1;if(i<r)return 0;var a=o(t[i]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--i<r?0:(a=o(t[i]))>=0?(a>0&&(e.lastNeed=a-2),a):--i<r?0:(a=o(t[i]))>=0?(a>0&&(2===a?a=0:e.lastNeed=a-3),a):0}function l(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"".repeat(r);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"".repeat(r+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"".repeat(r+2)}}function u(e){var t=this.lastTotal-this.lastNeed,r=l(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function f(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function h(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}var b=e("safe-buffer").Buffer,_=b.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};r.StringDecoder=n,n.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},n.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"".repeat(this.lastTotal-this.lastNeed):t},n.prototype.text=function(e,t){var r=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},n.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":214}],220:[function(e,t,r){var i=e("buffer").Buffer;t.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(i.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,a=0;a<r;a++)t[a]=e[a];return t.buffer}throw new Error("Argument must be a Buffer")}},{buffer:41}],221:[function(e,t,r){"use strict";function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function a(e,t,r){if(e&&o.isObject(e)&&e instanceof i)return e;var a=new i;return a.parse(e,t,r),a}var n=e("punycode"),o=e("./util");r.parse=a,r.resolve=function(e,t){return a(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?a(e,!1,!0).resolveObject(t):t},r.format=function(e){return o.isString(e)&&(e=a(e)),e instanceof i?e.format():i.prototype.format.call(e)},r.Url=i;var s=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["<",">",'"',"`"," ","\r","\n","\t"],f=["{","}","|","\\","^","`"].concat(c),h=["'"].concat(f),d=["%","/","?",";","#"].concat(h),p=["/","?","#"],m=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=e("querystring");i.prototype.parse=function(e,t,r){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),a=-1!==i&&i<e.indexOf("#")?"?":"#",l=e.split(a),c=/\\/g;l[0]=l[0].replace(c,"/");var f=e=l.join(a);if(f=f.trim(),!r&&1===e.split("#").length){var w=u.exec(f);if(w)return this.path=f,this.href=f,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?g.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var k=s.exec(f);if(k){var S=(k=k[0]).toLowerCase();this.protocol=S,f=f.substr(k.length)}if(r||k||f.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===f.substr(0,2);!x||k&&v[k]||(f=f.substr(2),this.slashes=!0)}if(!v[k]&&(x||k&&!y[k])){for(var M=-1,C=0;C<p.length;C++)-1!==(R=f.indexOf(p[C]))&&(-1===M||R<M)&&(M=R);var j,P;-1!==(P=-1===M?f.lastIndexOf("@"):f.lastIndexOf("@",M))&&(j=f.slice(0,P),f=f.slice(P+1),this.auth=decodeURIComponent(j)),M=-1;for(C=0;C<d.length;C++){var R=f.indexOf(d[C]);-1!==R&&(-1===M||R<M)&&(M=R)}-1===M&&(M=f.length),this.host=f.slice(0,M),f=f.slice(M),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var E=this.hostname.split(/\./),C=0,T=E.length;C<T;C++){var A=E[C];if(A&&!A.match(m)){for(var I="",L=0,F=A.length;L<F;L++)A.charCodeAt(L)>127?I+="x":I+=A[L];if(!I.match(m)){var B=E.slice(0,C),D=E.slice(C+1),z=A.match(b);z&&(B.push(z[1]),D.unshift(z[2])),D.length&&(f="/"+D.join(".")+f),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=n.toASCII(this.hostname));var N=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+N,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==f[0]&&(f="/"+f))}if(!_[S])for(var C=0,T=h.length;C<T;C++){var U=h[C];if(-1!==f.indexOf(U)){var V=encodeURIComponent(U);V===U&&(V=escape(U)),f=f.split(U).join(V)}}var G=f.indexOf("#");-1!==G&&(this.hash=f.substr(G),f=f.slice(0,G));var W=f.indexOf("?");if(-1!==W?(this.search=f.substr(W),this.query=f.substr(W+1),t&&(this.query=g.parse(this.query)),f=f.slice(0,W)):t&&(this.search="",this.query={}),f&&(this.pathname=f),y[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var N=this.pathname||"",H=this.search||"";this.path=N+H}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",a=!1,n="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(n=g.stringify(this.query));var s=this.search||n&&"?"+n||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==a?(a="//"+(a||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):a||(a=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+a+r+s+i},i.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(o.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var r=new i,a=Object.keys(this),n=0;n<a.length;n++){var s=a[n];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(r[c]=e[c])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var d=f[h];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||v[e.protocol])r.pathname=e.pathname;else{for(S=(e.pathname||"").split("/");S.length&&!(e.host=S.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==S[0]&&S.unshift(""),S.length<2&&S.unshift(""),r.pathname=S.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var p=r.pathname||"",m=r.search||"";r.path=p+m}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=_||b||r.host&&e.pathname,w=g,k=r.pathname&&r.pathname.split("/")||[],S=e.pathname&&e.pathname.split("/")||[],x=r.protocol&&!y[r.protocol];if(x&&(r.hostname="",r.port=null,r.host&&(""===k[0]?k[0]=r.host:k.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===S[0]?S[0]=e.host:S.unshift(e.host)),e.host=null),g=g&&(""===S[0]||""===k[0])),_)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,k=S;else if(S.length)k||(k=[]),k.pop(),k=k.concat(S),r.search=e.search,r.query=e.query;else if(!o.isNullOrUndefined(e.search))return x&&(r.hostname=r.host=k.shift(),(O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift())),r.search=e.search,r.query=e.query,o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!k.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var M=k.slice(-1)[0],C=(r.host||e.host||k.length>1)&&("."===M||".."===M)||""===M,j=0,P=k.length;P>=0;P--)"."===(M=k[P])?k.splice(P,1):".."===M?(k.splice(P,1),j++):j&&(k.splice(P,1),j--);if(!g&&!w)for(;j--;j)k.unshift("..");!g||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),C&&"/"!==k.join("/").substr(-1)&&k.push("");var R=""===k[0]||k[0]&&"/"===k[0].charAt(0);if(x){r.hostname=r.host=R?"":k.length?k.shift():"";var O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");O&&(r.auth=O.shift(),r.host=r.hostname=O.shift())}return(g=g||r.host&&k.length)&&!R&&k.unshift(""),k.length?r.pathname=k.join("/"):(r.pathname=null,r.path=null),o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":222,punycode:201,querystring:204}],222:[function(e,t,r){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],223:[function(e,t,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var i=!1;return function(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],224:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.sink=r.source=r.utils=r.operator=r.core=r.version=void 0;var a=e("../common/operator/_namespace");Object.defineProperty(r,"operator",{enumerable:!0,get:function(){return i(a).default}});var n=e("./utils/_namespace");Object.defineProperty(r,"utils",{enumerable:!0,get:function(){return i(n).default}});var o=e("./source/_namespace");Object.defineProperty(r,"source",{enumerable:!0,get:function(){return i(o).default}});var s=e("./sink/_namespace");Object.defineProperty(r,"sink",{enumerable:!0,get:function(){return i(s).default}});var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../core"));r.version="1.1.2",r.core=l},{"../common/operator/_namespace":265,"../core":279,"./sink/_namespace":234,"./source/_namespace":238,"./utils/_namespace":240}],225:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/core-js/object/assign")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("babel-runtime/helpers/possibleConstructorReturn")),u=i(e("babel-runtime/helpers/get")),c=i(e("babel-runtime/helpers/inherits")),f={min:{type:"float",default:-1,metas:{kind:"dynamic"}},max:{type:"float",default:1,metas:{kind:"dynamic"}},width:{type:"integer",default:300,metas:{kind:"dynamic"}},height:{type:"integer",default:150,metas:{kind:"dynamic"}},container:{type:"any",default:null,constant:!0},canvas:{type:"any",default:null,constant:!0}},h={duration:{type:"float",min:0,max:1/0,default:1,metas:{kind:"dynamic"}},referenceTime:{type:"float",default:0,constant:!0}},d=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,o.default)(this,t);var s=void 0;s=i?(0,n.default)({},f,h):f;var u=(0,n.default)({},s,e),c=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,u,r));if(null===c.params.get("canvas")&&null===c.params.get("container"))throw new Error("Invalid parameter: `canvas` or `container` not defined");var d=c.params.get("canvas"),p=c.params.get("container");if(d)c.canvas="string"==typeof d?document.querySelector(d):d;else if(p){var m=void 0;m="string"==typeof p?document.querySelector(p):p,c.canvas=document.createElement("canvas"),m.appendChild(c.canvas)}return c.ctx=c.canvas.getContext("2d"),c.cachedCanvas=document.createElement("canvas"),c.cachedCtx=c.cachedCanvas.getContext("2d"),c.previousFrame=null,c.currentTime=i?c.params.get("referenceTime"):null,c.displaySync=!1,c._stack=[],c._rafId=null,c.renderStack=c.renderStack.bind(c),c.shiftError=0,c._resize(),c}return(0,c.default)(t,e),(0,s.default)(t,[{key:"_resize",value:function(){var e=this.params.get("width"),t=this.params.get("height"),r=this.ctx,i=this.cachedCtx,a=window.devicePixelRatio||1,n=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;this.pixelRatio=a/n;var o=this.canvasWidth,s=this.canvasHeight;this.canvasWidth=e*this.pixelRatio,this.canvasHeight=t*this.pixelRatio,i.canvas.width=this.canvasWidth,i.canvas.height=this.canvasHeight,o&&s&&i.drawImage(r.canvas,0,0,o,s,0,0,this.canvasWidth,this.canvasHeight),r.canvas.width=this.canvasWidth,r.canvas.height=this.canvasHeight,r.canvas.style.width=e+"px",r.canvas.style.height=t+"px",this._setYScale()}},{key:"_setYScale",value:function(){var e=this.params.get("min"),t=this.params.get("max"),r=this.canvasHeight,i=(0-r)/(t-e),a=r-i*e;this.getYPosition=function(e){return i*e+a}}},{key:"getMinimumFrameWidth",value:function(){return 1}},{key:"onParamUpdate",value:function(e,r,i){switch((0,u.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"onParamUpdate",this).call(this,e,r,i),e){case"min":case"max":this._setYScale();break;case"width":case"height":this._resize()}}},{key:"propagateStreamParams",value:function(){(0,u.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"propagateStreamParams",this).call(this)}},{key:"resetStream",value:function(){(0,u.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"resetStream",this).call(this);var e=this.canvasWidth,r=this.canvasHeight;this.ctx.clearRect(0,0,e,r),this.cachedCtx.clearRect(0,0,e,r)}},{key:"finalizeStream",value:function(e){this.currentTime=null,(0,u.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"finalizeStream",this).call(this,e),this._rafId=null,this._stack.length>0&&this.renderStack()}},{key:"processFrame",value:function(e){for(var t=this.streamParams.frameSize,r=new Float32Array(t),i=e.data,a=0;a<t;a++)r[a]=i[a];this._stack.push({time:e.time,data:r,metadata:e.metadata}),null===this._rafId&&(this._rafId=window.requestAnimationFrame(this.renderStack))}},{key:"renderStack",value:function(){if(this.params.has("duration"))for(var e=0,t=this._stack.length;e<t;e++)this.scrollModeDraw(this._stack[e]);else if(this._stack.length>0){var r=this._stack[this._stack.length-1];this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.processFunction(r)}this._stack.length=0,this._rafId=null}},{key:"scrollModeDraw",value:function(e){var t=this.streamParams.frameType,r=(this.streamParams.frameRate,this.streamParams.frameSize),i=this.streamParams.sourceSampleRate,a=this.params.get("duration"),n=this.ctx,o=this.canvasWidth,s=this.canvasHeight,l=this.previousFrame,u=null!==this.currentTime?this.currentTime:e.time,c=e.time,f=(l&&l.time,this.lastFrameDuration&&this.lastFrameDuration,void 0);if("scalar"===t||"vector"===t){var h=a/o;f=this.getMinimumFrameWidth()*h}else"signal"===this.streamParams.frameType&&(f=r/i);var d=c+f-u;if(d>0){var p=d/a*o-this.shiftError,m=Math.floor(p+.5);this.shiftError=p-m;var b=c+f;this.shiftCanvas(m,b),this.displaySync&&this.displaySync.shiftSiblings(m,b,this)}var _=f/a*o,v=Math.floor(_+.5),y=(c-(this.currentTime-a))/a*o,g=this.lastFrameWidth;"scalar"!==t&&"vector"!==t||!l||(g=(e.time-l.time)/a*o),n.save(),n.translate(y,0),this.processFunction(e,v,g),n.restore(),this.cachedCtx.clearRect(0,0,o,s),this.cachedCtx.drawImage(this.canvas,0,0,o,s),this.lastFrameDuration=f,this.lastFrameWidth=v,this.previousFrame=e}},{key:"shiftCanvas",value:function(e,t){var r=this.ctx,i=this.cachedCanvas,a=this.cachedCtx,n=this.canvasWidth,o=this.canvasHeight,s=n-e;this.currentTime=t,r.clearRect(0,0,n,o),r.drawImage(i,e,0,s,o,0,0,s,o),a.clearRect(0,0,n,o),a.drawImage(this.canvas,0,0,n,o)}}]),t}(i(e("../../core/BaseLfo")).default);r.default=d},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/assign":19,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],226:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u=i(e("./BaseDisplay")),c=e("../utils/display-utils"),f={radius:{type:"float",min:0,default:0,metas:{kind:"dynamic"}},line:{type:"boolean",default:!0,metas:{kind:"dynamic"}},colors:{type:"any",default:null}},h=function(e){function t(e){(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,f,e));return r.prevFrame=null,r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"getMinimumFrameWidth",value:function(){return this.params.get("radius")}},{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),null===this.params.get("colors")&&this.params.set("colors",(0,c.getColors)("bpf",this.streamParams.frameSize)),this.propagateStreamParams()}},{key:"processVector",value:function(e,t,r){var i=this.params.get("colors"),a=this.params.get("radius"),n=this.params.get("line"),o=this.streamParams.frameSize,s=this.ctx,l=e.data,u=this.prevFrame?this.prevFrame.data:null;s.save();for(var c=0,f=o;c<f;c++){var h=this.getYPosition(l[c]),d=i[c];if(s.strokeStyle=d,s.fillStyle=d,u&&n){var p=this.getYPosition(u[c]);s.beginPath(),s.moveTo(-r,p),s.lineTo(0,h),s.stroke(),s.closePath()}a>0&&(s.beginPath(),s.arc(0,h,a,0,2*Math.PI,!1),s.fill(),s.closePath())}s.restore(),this.prevFrame=e}}]),t}(u.default);r.default=h},{"../utils/display-utils":241,"./BaseDisplay":225,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],227:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u=i(e("./BaseDisplay")),c={threshold:{type:"float",default:null,nullable:!0,metas:{kind:"dynamic"}},thresholdIndex:{type:"integer",default:0,metas:{kind:"dynamic"}},color:{type:"string",default:(0,e("../utils/display-utils").getColors)("marker"),nullable:!0,metas:{kind:"dynamic"}}},f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,c,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"processVector",value:function(e,t,r){var i=this.params.get("color"),a=this.params.get("threshold"),n=this.params.get("thresholdIndex"),o=this.ctx,s=(o.height,e.data[n]);if(null===a||s>=a){var l=this.getYPosition(this.params.get("min")),u=this.getYPosition(this.params.get("max"));if(l>u){var c=u;u=l,l=c}o.save(),o.fillStyle=i,o.fillRect(0,l,1,u),o.restore()}}}]),t}(u.default);r.default=f},{"../utils/display-utils":241,"./BaseDisplay":225,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],228:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=e.length/t,i=new Float32Array(t),a=0,n=0;n<t;n++){var o=h(a),s=a-o,l=e[o],u=e[o+1];i[n]=(u-l)*s+l,a+=r}return i}Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("babel-runtime/core-js/object/get-prototype-of")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("babel-runtime/helpers/possibleConstructorReturn")),u=i(e("babel-runtime/helpers/inherits")),c=i(e("./BaseDisplay")),f=e("../utils/display-utils"),h=Math.floor,d=(Math.ceil,{color:{type:"string",default:(0,f.getColors)("signal"),nullable:!0}}),p=function(e){function t(e){(0,o.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,d,e,!0));return r.lastPosY=null,r}return(0,u.default)(t,e),(0,s.default)(t,[{key:"processSignal",value:function(e,t,r){var i=this.params.get("color"),n=this.streamParams.frameSize,o=this.ctx,s=e.data;t<n&&(s=a(s,t));var l=t/s.length,u=0,c=this.lastPosY;o.strokeStyle=i,o.beginPath();for(var f=0;f<s.length;f++){var h=this.getYPosition(s[f]);null===c?o.moveTo(u,h):(0===f&&o.moveTo(-l,c),o.lineTo(u,h)),u+=l,c=h}o.stroke(),o.closePath(),this.lastPosY=c}}]),t}(c.default);r.default=p},{"../utils/display-utils":241,"./BaseDisplay":225,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],229:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/promise")),n=i(e("babel-runtime/core-js/object/get-prototype-of")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("babel-runtime/helpers/possibleConstructorReturn")),u=i(e("babel-runtime/helpers/get")),c=i(e("babel-runtime/helpers/inherits")),f=i(e("../../core/BaseLfo")),h=e("../../common/utils/wsUtils"),d={port:{type:"integer",default:8e3,nullable:!0,constant:!0},url:{type:"string",default:null,nullable:!0,constant:!0}},p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,d,e)),i=window.location.protocol.replace(/^http/,"ws")+"//"+(r.params.get("url")||window.location.hostname)+":"+(r.params.get("port")||"");return r.socket=new WebSocket(i),r.socket.binaryType="arraybuffer",r.openedPromise=new a.default(function(e,t){r.socket.onopen=e}),r.socket.onerror=function(e){return console.error(e.stack)},r}return(0,c.default)(t,e),(0,s.default)(t,[{key:"initModule",value:function(){var e=this;return this.openedPromise.then(function(){return new a.default(function(t,r){e.socket.onmessage=function(e){h.decoders.opcode(e.data)===h.opcodes.INIT_MODULE_ACK&&t()};var i=h.encoders.initModuleReq();e.socket.send(i)})})}},{key:"processStreamParams",value:function(e){(0,u.default)(t.prototype.__proto__||(0,n.default)(t.prototype),"processStreamParams",this).call(this,e);var r=h.encoders.streamParams(this.streamParams);this.socket.send(r)}},{key:"resetStream",value:function(){(0,u.default)(t.prototype.__proto__||(0,n.default)(t.prototype),"resetStream",this).call(this);var e=h.encoders.resetStream();this.socket.send(e)}},{key:"finalizeStream",value:function(e){(0,u.default)(t.prototype.__proto__||(0,n.default)(t.prototype),"finalizeStream",this).call(this,e);var r=h.encoders.finalizeStream(e);this.socket.send(r)}},{key:"processScalar",value:function(){}},{key:"processVector",value:function(){}},{key:"processSignal",value:function(){}},{key:"processFrame",value:function(e){var t=this.streamParams.frameSize;this.frame.time=e.time,this.frame.data.set(e.data,0),this.frame.metadata=e.metadata;var r=h.encoders.processFrame(this.frame,t);this.socket.send(r)}}]),t}(f.default);r.default=p},{"../../common/utils/wsUtils":276,"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/core-js/promise":26,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],230:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/math/log10")),n=i(e("babel-runtime/core-js/object/get-prototype-of")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("babel-runtime/helpers/possibleConstructorReturn")),u=i(e("babel-runtime/helpers/inherits")),c=i(e("./BaseDisplay")),f=i(e("../../common/operator/Fft")),h={scale:{type:"float",default:1,metas:{kind:"dynamic"}},color:{type:"string",default:(0,e("../utils/display-utils").getColors)("spectrum"),nullable:!0,metas:{kind:"dynamic"}},min:{type:"float",default:-80,metas:{kind:"dynamic"}},max:{type:"float",default:6,metas:{kind:"dynamic"}}},d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,h,e,!1))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this.fft=new f.default({size:this.streamParams.frameSize,window:"hann",norm:"linear"}),this.fft.initStream(this.streamParams),this.propagateStreamParams()}},{key:"processSignal",value:function(e){var t=this.fft.inputSignal(e.data),r=t.length,i=this.canvasWidth,n=this.canvasHeight,o=this.params.get("scale"),s=i/r,l=this.ctx;l.fillStyle=this.params.get("color");for(var u=0,c=0;c<r;c++){var f=c*s+u,h=Math.round(f),d=f+(s-u),p=Math.round(d);if(u=p-d,h!==p){var m=p-h,b=20*(0,a.default)(t[c]),_=this.getYPosition(b*o);l.fillRect(h,_,m,n-_)}else u-=s}}}]),t}(c.default);r.default=d},{"../../common/operator/Fft":247,"../utils/display-utils":241,"./BaseDisplay":225,"babel-runtime/core-js/math/log10":16,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],231:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u=i(e("./BaseDisplay")),c=e("../utils/display-utils"),f={color:{type:"string",default:(0,c.getColors)("trace"),metas:{kind:"dynamic"}},colorScheme:{type:"enum",default:"none",list:["none","hue","opacity"]}},h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,f,e));return r.prevFrame=null,r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),2===this.streamParams.frameSize&&this.params.set("colorScheme","none"),this.propagateStreamParams()}},{key:"processVector",value:function(e,t,r){var i=this.params.get("colorScheme"),a=this.ctx,n=this.prevFrame?this.prevFrame.data:null,o=e.data,s=o[1]/2,l=this.getYPosition(o[0]),u=this.getYPosition(o[0]-s),f=this.getYPosition(o[0]+s),h=void 0,d=void 0,p=void 0,m=void 0;null!==n&&(h=n[1]/2,d=this.getYPosition(n[0]),p=this.getYPosition(n[0]-h),m=this.getYPosition(n[0]+h));var b=this.params.get("color"),_=void 0,v=void 0;switch(i){case"none":v=(0,c.hexToRGB)(b),a.fillStyle="rgba("+v.join(",")+", 0.7)",a.strokeStyle=b;break;case"hue":_=a.createLinearGradient(-r,0,0,0),n?_.addColorStop(0,"hsl("+(0,c.getHue)(n[2])+", 100%, 50%)"):_.addColorStop(0,"hsl("+(0,c.getHue)(o[2])+", 100%, 50%)"),_.addColorStop(1,"hsl("+(0,c.getHue)(o[2])+", 100%, 50%)"),a.fillStyle=_;break;case"opacity":v=(0,c.hexToRGB)(this.params.get("color")),_=a.createLinearGradient(-r,0,0,0),n?_.addColorStop(0,"rgba("+v.join(",")+", "+n[2]+")"):_.addColorStop(0,"rgba("+v.join(",")+", "+o[2]+")"),_.addColorStop(1,"rgba("+v.join(",")+", "+o[2]+")"),a.fillStyle=_}a.save(),a.beginPath(),a.moveTo(0,l),a.lineTo(0,f),null!==n&&(a.lineTo(-r,m),a.lineTo(-r,p)),a.lineTo(0,u),a.closePath(),a.fill(),"none"===i&&d&&(a.beginPath(),a.moveTo(-r,d),a.lineTo(0,l),a.closePath(),a.stroke()),a.restore(),this.prevFrame=e}}]),t}(u.default);r.default=h},{"../utils/display-utils":241,"./BaseDisplay":225,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],232:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u=i(e("babel-runtime/core-js/math/log10")),c=i(e("./BaseDisplay")),f=i(e("../../common/operator/Rms")),h=u.default,d={offset:{type:"float",default:-14,metas:{kind:"dyanmic"}},min:{type:"float",default:-80,metas:{kind:"dynamic"}},max:{type:"float",default:6,metas:{kind:"dynamic"}},width:{type:"integer",default:6,metas:{kind:"dynamic"}}},p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,d,e,!1));return r.rmsOperator=new f.default,r.lastDB=0,r.peak={value:0,time:0},r.peakLifetime=1,r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this.rmsOperator.initStream(this.streamParams),this.propagateStreamParams()}},{key:"processSignal",value:function(e){var t=(new Date).getTime()/1e3,r=this.params.get("offset"),i=this.canvasHeight,a=this.canvasWidth,n=this.ctx,o=this.lastDB,s=this.peak,l=this.rmsOperator.inputSignal(e.data),u=20*h(l)-r;o>u&&(u=o-6),(u>s.value||t-s.time>this.peakLifetime)&&(s.value=u,s.time=t);var c=this.getYPosition(0),f=this.getYPosition(u),d=this.getYPosition(s.value);n.save(),n.fillStyle="#000000",n.fillRect(0,0,a,i);var p=n.createLinearGradient(0,i,0,0);p.addColorStop(0,"#00ff00"),p.addColorStop((i-c)/i,"#ffff1f"),p.addColorStop(1,"#ff2121"),n.fillStyle=p,n.fillRect(0,f,a,i-f),n.fillStyle="#dcdcdc",n.fillRect(0,c,a,2),n.fillStyle=p,n.fillRect(0,d,a,2),n.restore(),this.lastDB=u}}]),t}(c.default);r.default=p},{"../../common/operator/Rms":259,"./BaseDisplay":225,"babel-runtime/core-js/math/log10":16,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],233:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u=i(e("./BaseDisplay")),c=i(e("../../common/operator/MinMax")),f=i(e("../../common/operator/Rms")),h={colors:{type:"any",default:(0,e("../utils/display-utils").getColors)("waveform"),metas:{kind:"dyanmic"}},rms:{type:"boolean",default:!1,metas:{kind:"dyanmic"}}},d=function(e){function t(e){(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,h,e,!0));return r.minMaxOperator=new c.default,r.rmsOperator=new f.default,r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this.minMaxOperator.initStream(this.streamParams),this.rmsOperator.initStream(this.streamParams),this.propagateStreamParams()}},{key:"processSignal",value:function(e,t,r){if(!(t<1))for(var i=this.params.get("colors"),a=this.params.get("rms"),n=this.ctx,o=e.data,s=Math.floor(o.length/t),l=0;l<t;l++){var u=l*s,c=l===t-1?void 0:u+s,f=o.subarray(u,c),h=this.minMaxOperator.inputSignal(f),d=this.getYPosition(h[0]),p=this.getYPosition(h[1]);if(n.strokeStyle=i[0],n.beginPath(),n.moveTo(l,d),n.lineTo(l,p),n.closePath(),n.stroke(),a){var m=this.rmsOperator.inputSignal(f),b=this.getYPosition(m),_=this.getYPosition(-m);n.strokeStyle=i[1],n.beginPath(),n.moveTo(l,_),n.lineTo(l,b),n.closePath(),n.stroke()}}}}]),t}(u.default);r.default=d},{"../../common/operator/MinMax":253,"../../common/operator/Rms":259,"../utils/display-utils":241,"./BaseDisplay":225,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],234:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("../../common/sink/Bridge")),n=i(e("../../common/sink/Logger")),o=i(e("../../common/sink/DataRecorder")),s=i(e("../../common/sink/SignalRecorder")),l=i(e("./BaseDisplay")),u=i(e("./BpfDisplay")),c=i(e("./MarkerDisplay")),f=i(e("./SignalDisplay")),h=i(e("./SocketSend")),d=i(e("./SpectrumDisplay")),p=i(e("./TraceDisplay")),m=i(e("./VuMeterDisplay")),b=i(e("./WaveformDisplay"));r.default={Bridge:a.default,Logger:n.default,DataRecorder:o.default,SignalRecorder:s.default,BaseDisplay:l.default,BpfDisplay:u.default,MarkerDisplay:c.default,SignalDisplay:f.default,SocketSend:h.default,SpectrumDisplay:d.default,TraceDisplay:p.default,VuMeterDisplay:m.default,WaveformDisplay:b.default}},{"../../common/sink/Bridge":266,"../../common/sink/DataRecorder":267,"../../common/sink/Logger":268,"../../common/sink/SignalRecorder":269,"./BaseDisplay":225,"./BpfDisplay":226,"./MarkerDisplay":227,"./SignalDisplay":228,"./SocketSend":229,"./SpectrumDisplay":230,"./TraceDisplay":231,"./VuMeterDisplay":232,"./WaveformDisplay":233}],235:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a,n=i(e("babel-runtime/core-js/object/get-prototype-of")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("babel-runtime/helpers/possibleConstructorReturn")),u=i(e("babel-runtime/helpers/inherits")),c=i(e("babel-runtime/helpers/defineProperty")),f=i(e("../../core/BaseLfo")),h=i(e("../../core/SourceMixin")),d=(a={audioBuffer:{type:"any",default:null,constant:!0},frameSize:{type:"integer",default:512,constant:!0},channel:{type:"integer",default:0,constant:!0},progressCallback:{type:"any",default:null,nullable:!0,constant:!0}},(0,c.default)(a,"progressCallback",{type:"any",default:null,nullable:!0,constant:!0}),(0,c.default)(a,"async",{type:"boolean",default:!1}),a),p=function(){},m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,d,e));if(!r.params.get("audioBuffer"))throw new Error('Invalid "audioBuffer" parameter');return r.endTime=0,r}return(0,u.default)(t,e),(0,s.default)(t,[{key:"start",value:function(){if(!1===this.initialized)return null===this.initPromise&&(this.initPromise=this.init()),void this.initPromise.then(this.start);var e=this.params.get("channel"),t=this.params.get("audioBuffer").getChannelData(e);this.endTime=0,this.started=!0,this.processFrame(t)}},{key:"stop",value:function(){this.finalizeStream(this.endTime),this.started=!1}},{key:"processStreamParams",value:function(){var e=this.params.get("audioBuffer"),t=this.params.get("frameSize"),r=e.sampleRate,i=r/t;this.streamParams.frameSize=t,this.streamParams.frameRate=i,this.streamParams.frameType="signal",this.streamParams.sourceSampleRate=r,this.streamParams.sourceSampleCount=t,this.propagateStreamParams()}},{key:"processFrame",value:function(e){function t(){for(var f=c*a,h=Math.min(o-f,a),d=0;d<a;d++)l[d]=d<h?e[f+d]:0;u.frame.time=f/i,u.endTime=u.frame.time+h/i,u.propagateFrame(),n((c+=1)/s),c<s?r?setTimeout(t,0):t():u.finalizeStream(u.endTime)}var r=this.params.get("async"),i=this.streamParams.sourceSampleRate,a=this.streamParams.frameSize,n=this.params.get("progressCallback")||p,o=e.length,s=Math.ceil(e.length/a),l=this.frame.data,u=this,c=0;setTimeout(t,0)}}]),t}((0,h.default)(f.default));r.default=m},{"../../core/BaseLfo":277,"../../core/SourceMixin":278,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/defineProperty":32,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],236:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u=i(e("../../core/BaseLfo")),c=i(e("../../core/SourceMixin")),f=window.AudioContext||window.webkitAudioContext,h={frameSize:{type:"integer",default:512,constant:!0},channel:{type:"integer",default:0,constant:!0},sourceNode:{type:"any",default:null,constant:!0},audioContext:{type:"any",default:null,constant:!0}},d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,h,e)),i=r.params.get("audioContext"),o=r.params.get("sourceNode");if(!(i&&i instanceof f))throw new Error("Invalid `audioContext` parameter");if(!(o&&o instanceof AudioNode))throw new Error("Invalid `sourceNode` parameter");return r.sourceNode=o,r._channel=r.params.get("channel"),r._blockDuration=null,r.processFrame=r.processFrame.bind(r),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"start",value:function(){if(!1===this.initialized)return null===this.initPromise&&(this.initPromise=this.init()),void this.initPromise.then(this.start);var e=this.params.get("audioContext"),t=this.params.get("frameSize");this.frame.time=0,this.scriptProcessor=e.createScriptProcessor(t,1,1),this.scriptProcessor.onaudioprocess=this.processFrame,this.started=!0,this.sourceNode.connect(this.scriptProcessor),this.scriptProcessor.connect(e.destination)}},{key:"stop",value:function(){this.finalizeStream(this.frame.time),this.started=!1,this.sourceNode.disconnect(),this.scriptProcessor.disconnect()}},{key:"processStreamParams",value:function(){var e=this.params.get("audioContext"),t=this.params.get("frameSize"),r=e.sampleRate;this.streamParams.frameSize=t,this.streamParams.frameRate=r/t,this.streamParams.frameType="signal",this.streamParams.sourceSampleRate=r,this.streamParams.sourceSampleCount=t,this._blockDuration=t/r,this.propagateStreamParams()}},{key:"processFrame",value:function(e){!1!==this.started&&(this.frame.data=e.inputBuffer.getChannelData(this._channel),this.propagateFrame(),this.frame.time+=this._blockDuration)}}]),t}((0,c.default)(u.default));r.default=d},{"../../core/BaseLfo":277,"../../core/SourceMixin":278,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],237:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/promise")),n=i(e("babel-runtime/core-js/object/get-prototype-of")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("babel-runtime/helpers/possibleConstructorReturn")),u=i(e("babel-runtime/helpers/inherits")),c=i(e("../../core/BaseLfo")),f=e("../../common/utils/wsUtils"),h={port:{type:"integer",default:8e3,nullable:!0,constant:!0},url:{type:"string",default:null,nullable:!0,constant:!0}},d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,h,e)),i=window.location.protocol.replace(/^http/,"ws")+"//"+(r.params.get("url")||window.location.hostname)+":"+(r.params.get("port")||"");return r._dispatch=r._dispatch.bind(r),r.socket=new WebSocket(i),r.socket.binaryType="arraybuffer",r.openedPromise=new a.default(function(e,t){r.socket.onopen=e}),r.socket.onmessage=r._dispatch,r.socket.onerror=function(e){return console.error(e.stack)},r}return(0,u.default)(t,e),(0,s.default)(t,[{key:"initModule",value:function(){var e=this,t=this.nextModules.map(function(e){return e.initModule()});t.push(this.openedPromise),a.default.all(t).then(function(){var t=f.encoders.initModuleAck();e.socket.send(t)})}},{key:"processScalar",value:function(){}},{key:"processVector",value:function(){}},{key:"processSignal",value:function(){}},{key:"processFrame",value:function(e){this.prepareFrame(),this.frame=e,this.propagateFrame()}},{key:"_dispatch",value:function(e){var t=e.data;switch(f.decoders.opcode(t)){case f.opcodes.INIT_MODULE_REQ:this.initModule();break;case f.opcodes.PROCESS_STREAM_PARAMS:var r=f.decoders.streamParams(t);this.processStreamParams(r);break;case f.opcodes.RESET_STREAM:this.resetStream();break;case f.opcodes.FINALIZE_STREAM:var i=f.decoders.finalizeStream(t);this.finalizeStream(i);break;case f.opcodes.PROCESS_FRAME:var a=this.streamParams.frameSize,n=f.decoders.processFrame(t,a);this.processFrame(n)}}}]),t}(c.default);r.default=d},{"../../common/utils/wsUtils":276,"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/core-js/promise":26,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],238:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("../../common/source/EventIn")),n=i(e("./AudioInBuffer")),o=i(e("./AudioInNode")),s=i(e("./SocketReceive"));r.default={EventIn:a.default,AudioInBuffer:n.default,AudioInNode:o.default,SocketReceive:s.default}},{"../../common/source/EventIn":272,"./AudioInBuffer":235,"./AudioInNode":236,"./SocketReceive":237}],239:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/helpers/classCallCheck")),n=i(e("babel-runtime/helpers/createClass")),o=function(){function e(){(0,a.default)(this,e),this.views=[],this.add.apply(this,arguments)}return(0,n.default)(e,[{key:"add",value:function(){for(var e=this,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];r.forEach(function(t){return e.install(t)})}},{key:"install",value:function(e){this.views.push(e),e.displaySync=this}},{key:"shiftSiblings",value:function(e,t,r){this.views.forEach(function(i){i!==r&&i.shiftCanvas(e,t)})}}]),e}();r.default=o},{"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31}],240:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("./DisplaySync")),n=i(e("../../common/utils/windows"));r.default={DisplaySync:a.default,initWindows:n.default}},{"../../common/utils/windows":275,"./DisplaySync":239}],241:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=["#4682B4","#ffa500","#00e600","#ff0000","#800080","#224153"],a=(r.getColors=function(e,t){switch(e){case"signal":return i[0];case"bpf":if(t<=i.length)return i.slice(0,t);for(var r=i.slice(0);r.length<t;)r.push(a());return r;case"waveform":return[i[0],i[5]];case"marker":return i[3];case"spectrum":return i[2];case"trace":return i[1]}},r.getRandomColor=function(){for(var e="0123456789ABCDEF".split(""),t="#",r=0;r<6;r++)t+=e[Math.floor(16*Math.random())];return t});r.getHue=function(e){return-270*(e-0)/1+270},r.hexToRGB=function(e){return e=e.substring(1,7),[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16)]}},{}],242:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.source=r.sink=r.operator=r.core=r.version=void 0;var a=e("./operator/_namespace");Object.defineProperty(r,"operator",{enumerable:!0,get:function(){return i(a).default}});var n=e("./sink/_namespace");Object.defineProperty(r,"sink",{enumerable:!0,get:function(){return i(n).default}});var o=e("./source/_namespace");Object.defineProperty(r,"source",{enumerable:!0,get:function(){return i(o).default}});var s=e("./utils/_namespace");Object.defineProperty(r,"utils",{enumerable:!0,get:function(){return i(s).default}});var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../core"));r.version="1.1.2",r.core=l},{"../core":279,"./operator/_namespace":265,"./sink/_namespace":270,"./source/_namespace":273,"./utils/_namespace":274}],243:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u=i(e("../../core/BaseLfo")),c=Math.sin,f=Math.cos,h=Math.sqrt,d=Math.pow,p=2*Math.PI,m={type:{type:"enum",default:"lowpass",list:["lowpass","highpass","bandpass_constant_skirt","bandpass","bandpass_constant_peak","notch","allpass","peaking","lowshelf","highshelf"],metas:{kind:"dyanmic"}},f0:{type:"float",default:1,metas:{kind:"dyanmic"}},gain:{type:"float",default:1,min:0,metas:{kind:"dyanmic"}},q:{type:"float",default:1,min:.001,metas:{kind:"dyanmic"}}},b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,m,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"onParamUpdate",value:function(e,t,r){this._calculateCoefs()}},{key:"_calculateCoefs",value:function(){var e=this.streamParams.sourceSampleRate,t=this.streamParams.frameType,r=this.streamParams.frameSize,i=this.params.get("type"),a=this.params.get("f0"),n=this.params.get("gain"),o=this.params.get("q"),s=0,l=0,u=0,m=0,b=0,_=0,v=d(10,n/40),y=p*a/e,g=f(y),w=c(y),k=void 0,S=void 0;switch(i){case"lowpass":l=1-g,u=s=(1-g)/2,m=1+(k=w/(2*o)),b=-2*g,_=1-k;break;case"highpass":l=-(1+g),u=s=(1+g)/2,m=1+(k=w/(2*o)),b=-2*g,_=1-k;break;case"bandpass_constant_skirt":l=0,u=-(s=w/2),m=1+(k=w/(2*o)),b=-2*g,_=1-k;break;case"bandpass":case"bandpass_constant_peak":s=k=w/(2*o),l=0,u=-k,m=1+k,b=-2*g,_=1-k;break;case"notch":s=1,u=1,m=1+(k=w/(2*o)),b=l=-2*g,_=1-k;break;case"allpass":m=u=1+(k=w/(2*o)),b=l=-2*g,_=s=1-k;break;case"peaking":s=1+(k=w/(2*o))*v,u=1-k*v,m=1+k/v,b=l=-2*g,_=1-k/v;break;case"lowshelf":k=w/(2*o),s=v*(v+1-(v-1)*g+(S=2*h(v)*k)),l=2*v*(v-1-(v+1)*g),u=v*(v+1-(v-1)*g-S),m=v+1+(v-1)*g+S,b=-2*(v-1+(v+1)*g),_=v+1+(v-1)*g-S;break;case"highshelf":k=w/(2*o),s=v*(v+1+(v-1)*g+(S=2*h(v)*k)),l=-2*v*(v-1+(v+1)*g),u=v*(v+1+(v-1)*g-S),m=v+1-(v-1)*g+S,b=2*(v-1-(v+1)*g),_=v+1-(v-1)*g-S}this.coefs={b0:s/m,b1:l/m,b2:u/m,a1:b/m,a2:_/m},this.state="signal"===t?{x1:0,x2:0,y1:0,y2:0}:{x1:new Float32Array(r),x2:new Float32Array(r),y1:new Float32Array(r),y2:new Float32Array(r)}}},{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);var t=this.streamParams.sourceSampleRate;if(!t||t<=0)throw new Error("Invalid sampleRate value (0) for biquad");this._calculateCoefs(),this.propagateStreamParams()}},{key:"processVector",value:function(e){for(var t=this.streamParams.frameSize,r=this.frame.data,i=e.data,a=this.state,n=this.coefs,o=0;o<t;o++){var s=i[o],l=n.b0*s+n.b1*a.x1[o]+n.b2*a.x2[o]-n.a1*a.y1[o]-n.a2*a.y2[o];r[o]=l,a.x2[o]=a.x1[o],a.x1[o]=s,a.y2[o]=a.y1[o],a.y1[o]=l}}},{key:"processSignal",value:function(e){for(var t=this.streamParams.frameSize,r=this.frame.data,i=e.data,a=this.state,n=this.coefs,o=0;o<t;o++){var s=i[o],l=n.b0*s+n.b1*a.x1+n.b2*a.x2-n.a1*a.y1-n.a2*a.y2;r[o]=l,a.x2=a.x1,a.x1=s,a.y2=a.y1,a.y1=l}}}]),t}(u.default);r.default=b},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],244:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u={min:{type:"float",default:0,min:-1/0,max:1/0},max:{type:"float",default:1,min:-1/0,max:1/0}},c=function(e){function t(e){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,u,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"inputVector",value:function(e){for(var t=this.params.get("min"),r=this.params.get("max"),i=this.streamParams.frameSize,a=this.frame.data,n=0;n<i;n++)a[n]=Math.min(r,Math.max(t,e[n]));return a}},{key:"processVector",value:function(e){this.frame.data=this.inputVector(e.data)}},{key:"inputSignal",value:function(e){for(var t=this.params.get("min"),r=this.params.get("max"),i=this.streamParams.frameSize,a=this.frame.data,n=0;n<i;n++)a[n]=Math.min(r,Math.max(t,e[n]));return a}},{key:"processSignal",value:function(e){this.frame.data=this.inputSignal(e.data)}}]),t}(i(e("../../core/BaseLfo")).default);r.default=c},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],245:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var r=new Float32Array(t*e),i=d/t,a=1/f(2),n=f(2/t),o=0;o<e;o++)for(var s=0===o?a*n:n,l=0;l<t;l++)r[o*t+l]=s*h(o*(l+.5)*i);return r}Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("babel-runtime/core-js/object/get-prototype-of")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("babel-runtime/helpers/possibleConstructorReturn")),u=i(e("babel-runtime/helpers/inherits")),c=i(e("../../core/BaseLfo")),f=Math.sqrt,h=Math.cos,d=Math.PI,p={order:{type:"integer",default:12,metas:{kind:"static"}}},m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,p,e))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);var t=this.params.get("order"),r=e.frameSize;this.streamParams.frameSize=t,this.streamParams.frameType="vector",this.streamParams.description=[],this.weightMatrix=a(t,r),this.propagateStreamParams()}},{key:"inputSignal",value:function(e){for(var t=this.params.get("order"),r=e.length,i=this.frame.data,a=this.weightMatrix,n=0;n<t;n++){var o=n*r;i[n]=0;for(var s=0;s<r;s++)i[n]+=e[s]*a[o+s]}return i}},{key:"processSignal",value:function(e){this.inputSignal(e.data)}},{key:"processVector",value:function(e){this.inputSignal(e.data)}}]),t}(c.default);r.default=m},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],246:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0,i=0,a=e.length,n=0;n<a;n++)r+=n*t,i+=e[n];for(var o=r/a,s=i/a,l=0,u=0,c=0,f=0;f<a;f++){var h=t*f-o,d=e[f]-s;l+=h*h,u+=d*d,c+=h*d}if(0===u)return 0;var p=c/Math.sqrt(l*u),m=Math.sqrt(l/(a-1));return p*(Math.sqrt(u/(a-1))/m)}Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("babel-runtime/core-js/object/get-prototype-of")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("babel-runtime/helpers/possibleConstructorReturn")),u=i(e("babel-runtime/helpers/get")),c=i(e("babel-runtime/helpers/inherits")),f={size:{type:"integer",min:2,max:1/0,default:3},useFrameRate:{type:"integer",min:0,max:1/0,default:null,nullable:!0}},h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,f,e));return r.buffers=null,r.ringIndex=0,r.frameRate=null,r}return(0,c.default)(t,e),(0,s.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);var t=this.streamParams.frameSize,r=this.params.get("size");this.buffers=[],this.ringIndex=0,this.frameRate=null===this.params.get("useFrameRate")?this.streamParams.frameRate:this.params.get("useFrameRate");for(var i=0;i<t;i++)this.buffers[i]=new Float32Array(r);this.propagateStreamParams()}},{key:"resetStream",value:function(){(0,u.default)(t.prototype.__proto__||(0,n.default)(t.prototype),"resetStream",this).call(this);for(var e=this.streamParams.frameSize,r=this.params.get("size"),i=this.buffers,a=0;a<e;a++)for(var o=0;o<r;o++)i[a][o]=0;this.ringIndex=0}},{key:"inputVector",value:function(e){var t=this.params.get("size"),r=this.frame.data,i=this.streamParams.frameSize,n=this.buffers,o=1/this.frameRate;this.ringIndex<t&&(this.ringIndex+=1);for(var s=0;s<i;s++){for(var l=n[s],u=1;u<t;u++)l[u-1]=l[u];l[t-1]=e[s],this.ringIndex>=t?r[s]=a(l,o):r[s]=0}return r}},{key:"processVector",value:function(e){this.frame.data=this.inputVector(e.data);var t=this.params.get("size"),r=this.streamParams.frameRate;this.frame.time-=.5*(t-1)/r}}]),t}(i(e("../../core/BaseLfo")).default);r.default=h},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],247:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){this.n=e,this.levels=-1;for(t=0;t<32;t++)1<<t==e&&(this.levels=t);if(-1==this.levels)throw"Length is not a power of 2";this.cosTable=new Array(e/2),this.sinTable=new Array(e/2);for(var t=0;t<e/2;t++)this.cosTable[t]=Math.cos(2*Math.PI*t/e),this.sinTable[t]=Math.sin(2*Math.PI*t/e);this.forward=function(e,t){for(var r=this.n,i=0;i<r;i++)if((l=function(e,t){for(var r=0,i=0;i<t;i++)r=r<<1|1&e,e>>>=1;return r}(i,this.levels))>i){var a=e[i];e[i]=e[l],e[l]=a,a=t[i],t[i]=t[l],t[l]=a}for(var n=2;n<=r;n*=2)for(var o=n/2,s=r/n,i=0;i<r;i+=n)for(var l=i,u=0;l<i+o;l++,u+=s){var c=e[l+o]*this.cosTable[u]+t[l+o]*this.sinTable[u],f=-e[l+o]*this.sinTable[u]+t[l+o]*this.cosTable[u];e[l+o]=e[l]-c,t[l+o]=t[l]-f,e[l]+=c,t[l]+=f}},this.inverse=function(e,t){forward(t,e)}}Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("babel-runtime/core-js/object/get-prototype-of")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("babel-runtime/helpers/possibleConstructorReturn")),u=i(e("babel-runtime/helpers/inherits")),c=i(e("../../core/BaseLfo")),f=i(e("../utils/windows")),h=Math.sqrt,d=function(e){for(;e%2==0&&e>1;)e/=2;return 1===e},p={size:{type:"integer",default:1024,metas:{kind:"static"}},window:{type:"enum",list:["none","hann","hanning","hamming","blackman","blackmanharris","sine","rectangle"],default:"none",metas:{kind:"static"}},mode:{type:"enum",list:["magnitude","power"],default:"magnitude"},norm:{type:"enum",default:"auto",list:["auto","none","linear","power"]}},m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,p,e));if(r.windowSize=null,r.normalizeCoefs=null,r.window=null,r.real=null,r.imag=null,r.fft=null,!d(r.params.get("size")))throw new Error("fftSize must be a power of two");return r}return(0,u.default)(t,e),(0,s.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);var t=e.frameSize,r=this.params.get("size"),i=this.params.get("mode"),n=this.params.get("norm"),o=this.params.get("window");"none"===o&&(o="rectangle"),this.streamParams.frameSize=r/2+1,this.streamParams.frameType="vector",this.streamParams.description=[],this.windowSize=t<r?t:r,this.normalizeCoefs={linear:0,power:0},this.window=new Float32Array(this.windowSize),(0,f.default)(o,this.window,this.windowSize,this.normalizeCoefs);var s=this.normalizeCoefs,l=s.linear,u=s.power;switch(n){case"none":this.windowNorm=1;break;case"linear":this.windowNorm=l;break;case"power":this.windowNorm=u;break;case"auto":"magnitude"===i?this.windowNorm=l:"power"===i&&(this.windowNorm=u)}this.real=new Float32Array(r),this.imag=new Float32Array(r),this.fft=new a(r),this.propagateStreamParams()}},{key:"inputSignal",value:function(e){for(var t=this.params.get("mode"),r=this.windowSize,i=(this.streamParams.frameSize,this.params.get("size")),a=this.frame.data,n=0;n<r;n++)this.real[n]=e[n]*this.window[n]*this.windowNorm,this.imag[n]=0;for(var o=r;o<i;o++)this.real[o]=0,this.imag[o]=0;if(this.fft.forward(this.real,this.imag),"magnitude"===t){var s=1/i,l=this.real[0],u=this.imag[0];a[0]=h(l*l+u*u)*s;var c=this.real[i/2],f=this.imag[i/2];a[i/2]=h(c*c+f*f)*s;for(var d=1,p=i-1;d<i/2;d++,p--){var m=.5*(this.real[d]+this.real[p]),b=.5*(this.imag[d]-this.imag[p]);a[d]=2*h(m*m+b*b)*s}}else if("power"===t){var _=1/(i*i),v=this.real[0],y=this.imag[0];a[0]=(v*v+y*y)*_;var g=this.real[i/2],w=this.imag[i/2];a[i/2]=(g*g+w*w)*_;for(var k=1,S=i-1;k<i/2;k++,S--){var x=.5*(this.real[k]+this.real[S]),M=.5*(this.imag[k]-this.imag[S]);a[k]=4*(x*x+M*M)*_}}return a}},{key:"processSignal",value:function(e){this.inputSignal(e.data)}}]),t}(c.default);r.default=m},{"../../core/BaseLfo":277,"../utils/windows":275,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],248:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/get")),u=i(e("babel-runtime/helpers/inherits")),c=i(e("../../core/BaseLfo")),f=Math.sqrt,h={normalize:{type:"boolean",default:!0,metas:{kind:"dynamic"}},power:{type:"boolean",default:!1,metas:{kind:"dynamic"}}},d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,h,e));return r._normalize=r.params.get("normalize"),r._power=r.params.get("power"),r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onParamUpdate",value:function(e,r,i){switch((0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"onParamUpdate",this).call(this,e,r,i),e){case"normalize":this._normalize=r;break;case"power":this._power=r}}},{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this.streamParams.frameSize=1,this.streamParams.frameType="scalar",this.streamParams.description=["magnitude"],this.propagateStreamParams()}},{key:"inputVector",value:function(e){for(var t=e.length,r=0,i=0;i<t;i++)r+=e[i]*e[i];var a=r;return this._normalize&&(a/=t),this._power||(a=f(a)),a}},{key:"processVector",value:function(e){this.frame.data[0]=this.inputVector(e.data)}}]),t}(c.default);r.default=d},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],249:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u=i(e("../../core/BaseLfo")),c=Math.sqrt,f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,{},e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this.streamParams.frameType="vector",this.streamParams.frameSize=2,this.streamParams.description=["mean","stddev"],this.propagateStreamParams()}},{key:"inputSignal",value:function(e){for(var t=this.frame.data,r=e.length,i=0,a=0,n=0;n<r;n++){var o=e[n],s=o-i;a+=s*(o-(i+=s/(n+1)))}var l=c(a/(r-1));return t[0]=i,t[1]=l,t}},{key:"processSignal",value:function(e){this.inputSignal(e.data)}}]),t}(u.default);r.default=f},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],250:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return 2595*(0,h.default)(1+e/700)}function n(e){return 700*(Math.pow(10,e/2595)-1)}function o(e,t,r,i,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"htk",l=null,u=null,c=void 0,f=void 0;if("htk"!==s)throw new Error('Invalid mel band type: "'+s+'"');u=n,c=(l=a)(i),f=l(o);for(var h=new Array(t),d=new Float32Array(e),b=new Float32Array(t+2),_=2*(e-1),v=0;v<e;v++)d[v]=r*v/_;for(var y=0;y<t+2;y++)b[y]=u(c+y/(t+1)*(f-c));for(var g=0;g<t;g++){for(var w={startIndex:null,centerFreq:null,weights:[]},k=0;k<e-1;k++){var S=(d[k]-b[g])/(b[g+1]-b[g]),x=(b[g+2]-d[k])/(b[g+2]-b[g+1]),M=m(0,p(S,x));M>0&&(null===w.startIndex&&(w.startIndex=k,w.centerFreq=b[g+1]),w.weights.push(M))}null===w.startIndex&&(w.startIndex=0,w.centerFreq=0),h[g]=w}return h}Object.defineProperty(r,"__esModule",{value:!0});var s=i(e("babel-runtime/core-js/object/get-prototype-of")),l=i(e("babel-runtime/helpers/classCallCheck")),u=i(e("babel-runtime/helpers/createClass")),c=i(e("babel-runtime/helpers/possibleConstructorReturn")),f=i(e("babel-runtime/helpers/inherits")),h=i(e("babel-runtime/core-js/math/log10")),d=i(e("../../core/BaseLfo")),p=Math.min,m=Math.max,b=Math.pow,_=h.default,v={log:{type:"boolean",default:!1,metas:{kind:"static"}},nbrBands:{type:"integer",default:24,metas:{kind:"static"}},minFreq:{type:"float",default:0,metas:{kind:"static"}},maxFreq:{type:"float",default:null,nullable:!0,metas:{kind:"static"}},power:{type:"integer",default:1,metas:{kind:"dynamic"}}},y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,v,e))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);var t=e.frameSize,r=this.params.get("nbrBands"),i=this.streamParams.sourceSampleRate,a=this.params.get("minFreq"),n=this.params.get("maxFreq");this.streamParams.frameSize=r,this.streamParams.frameType="vector",this.streamParams.description=[],null===n&&(n=this.streamParams.sourceSampleRate/2),this.melBandDescriptions=o(t,r,i,a,n),this.propagateStreamParams()}},{key:"inputVector",value:function(e){var t=this.params.get("power"),r=this.params.get("log"),i=this.frame.data,a=this.streamParams.frameSize,n=1;r&&(n*=a);for(var o=0;o<a;o++){for(var s=this.melBandDescriptions[o],l=s.startIndex,u=s.weights,c=0,f=0;f<u.length;f++)c+=u[f]*e[l+f];1!==n&&(c*=n),r&&(c=c>1e-48?10*_(c):-480),1!==t&&(c=b(c,t)),i[o]=c}return i}},{key:"processVector",value:function(e){this.inputVector(e.data)}}]),t}(d.default);r.default=y},{"../../core/BaseLfo":277,"babel-runtime/core-js/math/log10":16,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],251:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u={frameSizes:{type:"any",default:null,constant:!0}},c=function(e){function t(e){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,u,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);for(var t=this.params.get("frameSizes"),r=t.length,i=0,a=0;a<r;a++)i+=t[a];this.streamParams.frameSize=i,this.numSources=r,this.sourceIndex=0,this.propagateStreamParams()}},{key:"processVector",value:function(){}},{key:"processFrame",value:function(e){var t=this.sourceIndex,r=this.params.get("frameSizes"),i=r.length,a=e.data,n=this.frame.data;0===t&&(this.frame.time=e.time);for(var o=r[t],s=0,l=0;l<t;l++)s+=r[l];for(var u=0;u<o;u++)n[s+u]=a[u];this.sourceIndex=(this.sourceIndex+1)%i,0===this.sourceIndex&&this.propagateFrame()}}]),t}(i(e("../../core/BaseLfo")).default);r.default=c},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],252:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u=i(e("../../core/BaseLfo")),c=i(e("./Fft")),f=i(e("./Mel")),h=i(e("./Dct")),d={nbrBands:{type:"integer",default:24,meta:{kind:"static"}},nbrCoefs:{type:"integer",default:12,meta:{kind:"static"}},minFreq:{type:"float",default:0,meta:{kind:"static"}},maxFreq:{type:"float",default:null,nullable:!0,meta:{kind:"static"}}},p=function(e){function t(e){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,d,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);var t=this.params.get("nbrBands"),r=this.params.get("nbrCoefs"),i=this.params.get("minFreq"),a=this.params.get("maxFreq"),n=e.frameSize,o=e.frameRate,s=e.sourceSampleRate,l=n/2+1;this.streamParams.frameSize=r,this.streamParams.frameType="vector",this.streamParams.description=[],this.fft=new c.default({window:"hann",mode:"power",norm:"power",size:n}),this.mel=new f.default({nbrBands:t,log:!0,power:1,minFreq:i,maxFreq:a}),this.dct=new h.default({order:r}),this.fft.initStream({frameType:"signal",frameSize:n,frameRate:o,sourceSampleRate:s}),this.mel.initStream({frameType:"vector",frameSize:l,frameRate:o,sourceSampleRate:s}),this.dct.initStream({frameType:"vector",frameSize:t,frameRate:o,sourceSampleRate:s}),this.propagateStreamParams()}},{key:"inputSignal",value:function(e){for(var t=this.frame.data,r=this.params.get("nbrCoefs"),i=this.fft.inputSignal(e),a=this.mel.inputVector(i),n=this.dct.inputSignal(a),o=0;o<r;o++)t[o]=n[o];return t}},{key:"processSignal",value:function(e){this.inputSignal(e.data)}}]),t}(u.default);r.default=p},{"../../core/BaseLfo":277,"./Dct":245,"./Fft":247,"./Mel":250,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],253:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,{},e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.prepareStreamParams(e),this.streamParams.frameType="vector",this.streamParams.frameSize=2,this.streamParams.description=["min","max"],this.propagateStreamParams()}},{key:"inputSignal",value:function(e){for(var t=this.frame.data,r=1/0,i=-1/0,a=0,n=e.length;a<n;a++){var o=e[a];o<r&&(r=o),o>i&&(i=o)}return t[0]=r,t[1]=i,t}},{key:"processSignal",value:function(e){this.inputSignal(e.data)}}]),t}(i(e("../../core/BaseLfo")).default);r.default=u},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],254:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/get")),u=i(e("babel-runtime/helpers/inherits")),c={order:{type:"integer",min:1,max:1e9,default:10,metas:{kind:"dynamic"}},fill:{type:"float",min:-1/0,max:1/0,default:0,metas:{kind:"dynamic"}}},f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,c,e));return r.sum=null,r.ringBuffer=null,r.ringIndex=0,r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onParamUpdate",value:function(e,r,i){switch((0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"onParamUpdate",this).call(this,e,r,i),e){case"order":this.processStreamParams(),this.resetStream();break;case"fill":this.resetStream()}}},{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);var t=this.streamParams.frameSize,r=this.params.get("order");this.ringBuffer=new Float32Array(r*t),this.sum=t>1?new Float32Array(t):0,this.propagateStreamParams()}},{key:"resetStream",value:function(){(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"resetStream",this).call(this);for(var e=this.params.get("order"),r=this.params.get("fill"),i=this.ringBuffer,n=i.length,o=0;o<n;o++)i[o]=r;var s=e*r,u=this.streamParams.frameSize;if(u>1)for(var c=0;c<u;c++)this.sum[c]=s;else this.sum=s;this.ringIndex=0}},{key:"processScalar",value:function(e){this.frame.data[0]=this.inputScalar(frame.data[0])}},{key:"inputScalar",value:function(e){var t=this.params.get("order"),r=this.ringIndex,i=this.ringBuffer,a=this.sum;return a-=i[r],a+=e,this.sum=a,this.ringBuffer[r]=e,this.ringIndex=(r+1)%t,a/t}},{key:"processVector",value:function(e){this.inputVector(e.data)}},{key:"inputVector",value:function(e){for(var t=this.params.get("order"),r=this.frame.data,i=this.streamParams.frameSize,a=this.ringIndex,n=a*i,o=this.ringBuffer,s=this.sum,l=1/t,u=0;u<i;u++){var c=n+u,f=e[u],h=s[u];h-=o[c],h+=f,this.sum[u]=h,r[u]=h*l,o[c]=f}return this.ringIndex=(a+1)%t,r}},{key:"processFrame",value:function(e){this.prepareFrame(),this.processFunction(e);var t=this.params.get("order"),r=e.time;this.streamParams.sourceSampleRate&&(r-=.5*(t-1)/this.streamParams.sourceSampleRate),this.frame.time=r,this.frame.metadata=e.metadata,this.propagateFrame()}}]),t}(i(e("../../core/BaseLfo")).default);r.default=f},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],255:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/get")),u=i(e("babel-runtime/helpers/inherits")),c={order:{type:"integer",min:1,max:1e9,default:9,metas:{kind:"static"}},fill:{type:"float",min:-1/0,max:1/0,default:0,metas:{kind:"static"}}},f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,c,e));return r.ringBuffer=null,r.sortBuffer=null,r.ringIndex=0,r._ensureOddOrder(),r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"_ensureOddOrder",value:function(){if(this.params.get("order")%2==0)throw new Error("Invalid value "+order+' for param "order" - should be odd')}},{key:"onParamUpdate",value:function(e,r,i){switch((0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"onParamUpdate",this).call(this,e,r,i),e){case"order":this._ensureOddOrder(),this.processStreamParams(),this.resetStream();break;case"fill":this.resetStream()}}},{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);var t=this.streamParams.frameSize,r=this.params.get("order");this.ringBuffer=new Float32Array(t*r),this.sortBuffer=new Float32Array(t*r),this.minIndices=new Uint32Array(t),this.propagateStreamParams()}},{key:"resetStream",value:function(){(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"resetStream",this).call(this);for(var e=this.params.get("fill"),r=this.ringBuffer.length,i=0;i<r;i++)this.ringBuffer[i]=e;this.ringIndex=0}},{key:"processScalar",value:function(e){this.frame.data[0]=this.inputScalar(e.data[0])}},{key:"inputScalar",value:function(e){var t=this.ringIndex,r=this.ringBuffer,i=this.sortBuffer,a=this.params.get("order"),n=(a-1)/2,o=0;r[t]=e;for(var s=0;s<=n;s++){for(var l=1/0,u=null,c=o;c<a;c++)0===s&&(i[c]=r[c]),i[c]<l&&(l=i[c],u=c);var f=i[o];i[o]=i[u],i[u]=f,o+=1}var h=i[n];return this.ringIndex=(t+1)%a,h}},{key:"processVector",value:function(e){this.inputVector(e.data)}},{key:"inputVector",value:function(e){for(var t=this.params.get("order"),r=this.ringBuffer,i=this.ringIndex,a=this.sortBuffer,n=this.frame.data,o=this.minIndices,s=this.streamParams.frameSize,l=Math.floor(t/2),u=0,c=0;c<=l;c++){for(var f=0;f<s;f++){n[f]=1/0,o[f]=0;for(var h=u;h<t;h++){var d=h*s+f;h===i&&0===c&&(r[d]=e[f]),0===c&&(a[d]=r[d]),a[d]<n[f]&&(n[f]=a[d],o[f]=d)}var p=u*s+f,m=a[p];a[p]=a[o[f]],a[o[f]]=m,n[f]=a[p]}u+=1}return this.ringIndex=(i+1)%t,this.frame.data}},{key:"processFrame",value:function(e){this.preprocessFrame(),this.processFunction(e);var t=this.params.get("order"),r=e.time;this.streamParams.sourceSampleRate&&(r-=.5*(t-1)/this.streamParams.sourceSampleRate),this.frame.time=r,this.frame.metadata=e.metadata,this.propagateFrame(r,this.outFrame,metadata)}}]),t}(i(e("../../core/BaseLfo")).default);r.default=f},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],256:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u={factor:{type:"any",default:1}},c=function(e){function t(e){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,u,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"inputVector",value:function(e){var t=this.frame.data,r=this.streamParams.frameSize,i=this.params.get("factor");if(Array.isArray(i))for(var a=0;a<r;a++)t[a]=e[a]*i[a];else for(var n=0;n<r;n++)t[n]=e[n]*i;return t}},{key:"processVector",value:function(e){this.frame.data=this.inputVector(e.data)}},{key:"inputSignal",value:function(e){for(var t=this.frame.data,r=this.streamParams.frameSize,i=this.params.get("factor"),a=0;a<r;a++)t[a]=e[a]*i;return t}},{key:"processSignal",value:function(e){this.frame.data=this.inputSignal(e.data)}}]),t}(i(e("../../core/BaseLfo")).default);r.default=c},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],257:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u={state:{type:"enum",default:"on",list:["on","off"],metas:{kind:"dynamic"}}},c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,u,e));return r.state=r.params.get("state"),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"setState",value:function(e){if(-1===u.state.list.indexOf(e))throw new Error('Invalid switch state value "'+e+'" [valid values: "on"/"off"]');this.state=e}},{key:"processScalar",value:function(){}},{key:"processVector",value:function(){}},{key:"processSignal",value:function(){}},{key:"processFrame",value:function(e){"on"===this.state&&(this.prepareFrame(),this.frame.time=e.time,this.frame.metadata=e.metadata,this.frame.data=e.data,this.propagateFrame())}}]),t}(i(e("../../core/BaseLfo")).default);r.default=c},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],258:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u={exponent:{type:"float",default:1}},c=function(e){function t(e){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,u,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"inputVector",value:function(e){for(var t=this.frame.data,r=this.streamParams.frameSize,i=this.params.get("exponent"),a=0;a<r;a++)t[a]=Math.pow(e[a],i);return t}},{key:"processVector",value:function(e){this.inputVector(e.data)}},{key:"inputSignal",value:function(e){for(var t=this.frame.data,r=this.streamParams.frameSize,i=this.params.get("exponent"),a=0;a<r;a++)t[a]=Math.pow(e[a],i);return t}},{key:"processSignal",value:function(e){this.inputSignal(e.data)}}]),t}(i(e("../../core/BaseLfo")).default);r.default=c},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],259:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u=i(e("../../core/BaseLfo")),c=Math.sqrt,f={power:{type:"boolean",default:!1,metas:{kind:"dynamic"}}},h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,f,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this.streamParams.frameSize=1,this.streamParams.frameType="scalar",this.streamParams.description=["rms"],this.propagateStreamParams()}},{key:"inputSignal",value:function(e){for(var t=this.params.get("power"),r=e.length,i=0,a=0;a<r;a++)i+=e[a]*e[a];return i/=r,t||(i=c(i)),i}},{key:"processSignal",value:function(e){this.frame.data[0]=this.inputSignal(e.data)}}]),t}(u.default);r.default=h},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],260:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/get")),u=i(e("babel-runtime/helpers/inherits")),c={type:{type:"enum",list:["linear"],default:"linear",metas:{kind:"dynamic"}},inputMin:{type:"float",default:0,min:-1/0,max:1/0,metas:{kind:"dynamic"}},inputMax:{type:"float",default:1,min:-1/0,max:1/0,metas:{kind:"dynamic"}},outputMin:{type:"float",default:1,min:-1/0,max:1/0,metas:{kind:"dynamic"}},outputMax:{type:"float",default:1,min:-1/0,max:1/0,metas:{kind:"dynamic"}}},f=function(e){function t(e){(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,c,e));return r.scale=null,r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"_setScaleFunction",value:function(){var e=this.params.get("inputMin"),t=this.params.get("inputMax"),r=this.params.get("outputMin"),i=(this.params.get("outputMax")-r)/(t-e),a=r-i*e;this.scale=function(e){return i*e+a}}},{key:"onParamUpdate",value:function(e,r,i){(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"onParamUpdate",this).call(this,e,r,i),"type"!==e&&this._setScaleFunction()}},{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this._setScaleFunction(),this.propagateStreamParams()}},{key:"inputVector",value:function(e){for(var t=this.frame.data,r=this.streamParams.frameSize,i=this.scale,a=0;a<r;a++)t[a]=i(e[a]);return t}},{key:"processVector",value:function(e){this.frame.data=this.inputVector(e.data)}},{key:"inputSignal",value:function(e){for(var t=this.frame.data,r=this.streamParams.frameSize,i=this.scale,a=0;a<r;a++)t[a]=i(e[a]);return t}},{key:"processSignal",value:function(e){this.frame.data=this.inputVector(e.data)}}]),t}(i(e("../../core/BaseLfo")).default);r.default=f},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],261:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/get")),u=i(e("babel-runtime/helpers/inherits")),c=i(e("../../core/BaseLfo")),f=i(e("./MovingAverage")),h=Math.min,d=Math.max,p={logInput:{type:"boolean",default:!1,metas:{kind:"dyanmic"}},minInput:{type:"float",default:1e-12,metas:{kind:"dyanmic"}},filterOrder:{type:"integer",default:5,metas:{kind:"dyanmic"}},threshold:{type:"float",default:3,metas:{kind:"dyanmic"}},offThreshold:{type:"float",default:-1/0,metas:{kind:"dyanmic"}},minInter:{type:"float",default:.05,metas:{kind:"dyanmic"}},maxDuration:{type:"float",default:1/0,metas:{kind:"dyanmic"}}},m=function(e){function t(e){(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,p,e));r.insideSegment=!1,r.onsetTime=-1/0,r.min=1/0,r.max=-1/0,r.sum=0,r.sumOfSquares=0,r.count=0;var i=r.params.get("minInput"),o=i;return r.params.get("logInput")&&i>0&&(o=Math.log(i)),r.movingAverage=new f.default({order:r.params.get("filterOrder"),fill:o}),r.lastMvavrg=o,r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onParamUpdate",value:function(e,r,i){(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"onParamUpdate",this).call(this,e,r,i),"filterOrder"===e&&this.movingAverage.params.set("order",r)}},{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this.streamParams.frameType="vector",this.streamParams.frameSize=5,this.streamParams.frameRate=0,this.streamParams.description=["duration","min","max","mean","stddev"],this.movingAverage.initStream(e),this.propagateStreamParams()}},{key:"resetStream",value:function(){(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"resetStream",this).call(this),this.movingAverage.resetStream(),this.resetSegment()}},{key:"finalizeStream",value:function(e){this.insideSegment&&this.outputSegment(e),(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"finalizeStream",this).call(this,e)}},{key:"resetSegment",value:function(){this.insideSegment=!1,this.onsetTime=-1/0,this.min=1/0,this.max=-1/0,this.sum=0,this.sumOfSquares=0,this.count=0}},{key:"outputSegment",value:function(e){var t=this.frame.data;t[0]=e-this.onsetTime,t[1]=this.min,t[2]=this.max;var r=1/this.count,i=this.sum*r,a=this.sumOfSquares*r,n=i*i;t[3]=i,t[4]=0,a>n&&(t[4]=Math.sqrt(a-n)),this.frame.time=this.onsetTime,this.propagateFrame()}},{key:"processSignal",value:function(e){var t=this.params.get("logInput"),r=this.params.get("minInput"),i=this.params.get("threshold"),a=this.params.get("minInter"),n=this.params.get("maxDuration"),o=this.params.get("offThreshold"),s=e.data[0],l=e.time,u=Math.max(s,r);t&&(u=Math.log(u));var c=u-this.lastMvavrg;this.lastMvavrg=this.movingAverage.inputScalar(u),this.frame.metadata=e.metadata,c>i&&l-this.onsetTime>a&&(this.insideSegment&&this.outputSegment(l),this.insideSegment=!0,this.onsetTime=l,this.max=-1/0),this.insideSegment&&(this.min=h(this.min,s),this.max=d(this.max,s),this.sum+=s,this.sumOfSquares+=s*s,this.count++,(l-this.onsetTime>=n||u<=o)&&(this.outputSegment(l),this.insideSegment=!1))}},{key:"processFrame",value:function(e){this.prepareFrame(),this.processFunction(e)}}]),t}(c.default);r.default=m},{"../../core/BaseLfo":277,"./MovingAverage":254,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],262:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/get")),u=i(e("babel-runtime/helpers/inherits")),c={index:{type:"integer",default:0,metas:{kind:"static"}},indexes:{type:"any",default:null,nullable:!0,metas:{kind:"dynamic"}}},f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,c,e))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onParamUpdate",value:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"onParamUpdate",this).call(this,e,r,i);var n=this.params.get("index"),o=this.params.get("indexes");this.select=null!==o?o:[n]}},{key:"processStreamParams",value:function(e){var t=this;this.prepareStreamParams(e);var r=this.params.get("index"),i=this.params.get("indexes"),a=null!==i?Math.max.apply(null,i):r;if(a>=e.frameSize)throw new Error('Invalid select index "'+a+'"');this.streamParams.frameType=null!==i?"vector":"scalar",this.streamParams.frameSize=null!==i?i.length:1,this.select=null!==i?i:[r],e.description&&this.select.forEach(function(r,i){t.streamParams.description[i]=e.description[r]}),this.propagateStreamParams()}},{key:"processVector",value:function(e){for(var t=e.data,r=this.frame.data,i=this.select,a=0;a<i.length;a++)r[a]=t[i[a]]}}]),t}(i(e("../../core/BaseLfo")).default);r.default=f},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],263:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/get")),u=i(e("babel-runtime/helpers/inherits")),c={frameSize:{type:"integer",default:512,metas:{kind:"static"}},hopSize:{type:"integer",default:null,nullable:!0,metas:{kind:"static"}},centeredTimeTags:{type:"boolean",default:!1}},f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,c,e)),i=r.params.get("hopSize"),o=r.params.get("frameSize");return i||r.params.set("hopSize",o),r.params.addListener(r.onParamUpdate.bind(r)),r.frameIndex=0,r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);var t=this.params.get("hopSize"),r=this.params.get("frameSize");this.streamParams.frameSize=r,this.streamParams.frameRate=e.sourceSampleRate/t,1===this.streamParams.frameSize?this.streamParams.frameType="scalar":this.streamParams.frameType="signal",this.propagateStreamParams()}},{key:"resetStream",value:function(){(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"resetStream",this).call(this),this.frameIndex=0}},{key:"finalizeStream",value:function(e){if(this.frameIndex>0){var r=this.streamParams.frameRate,i=this.streamParams.frameSize,n=this.frame.data;this.frame.time+=1/r;for(var o=this.frameIndex;o<i;o++)n[o]=0;this.propagateFrame()}(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"finalizeStream",this).call(this,e)}},{key:"processFrame",value:function(e){this.prepareFrame(),this.processFunction(e)}},{key:"processSignal",value:function(e){for(var t=e.time,r=e.data,i=e.metadata,a=this.params.get("centeredTimeTags"),n=this.params.get("hopSize"),o=this.frame.data,s=this.streamParams.frameSize,l=1/this.streamParams.sourceSampleRate,u=r.length,c=this.frameIndex,f=0;f<u;){var h=0;if(c<0&&(h=-c,c=0),h<u){var d=u-(f+=h),p=s-c;d>=p&&(d=p);var m=r.subarray(f,f+d);o.set(m,c),f+=d,(c+=d)===s&&(this.frame.time=a?t+(f-s/2)*l:t+(f-s)*l,this.frame.metadata=i,this.propagateFrame(),n<s&&o.set(o.subarray(n,s),0),c-=n)}else{var b=u-f;c+=b,f+=b}}this.frameIndex=c}}]),t}(i(e("../../core/BaseLfo")).default);r.default=f},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],264:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u=i(e("../../core/BaseLfo")),c=(Math.ceil,{threshold:{type:"float",default:.1,metas:{kind:"static"}},downSamplingExp:{type:"integer",default:2,min:0,max:3,metas:{kind:"static"}},minFreq:{type:"float",default:60,min:0,metas:{kind:"static"}}}),f=function(e){function t(e){(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,c,e));return r.probability=0,r.pitch=-1,r.test=0,r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"_downsample",value:function(e,t,r,i){var a=t>>i,n=void 0,o=void 0;switch(i){case 0:for(n=0;n<t;n++)r[n]=e[n];break;case 1:for(n=0,o=0;n<a;n++,o+=2)r[n]=.5*(e[o]+e[o+1]);break;case 2:for(n=0,o=0;n<a;n++,o+=4)r[n]=.25*(e[o]+e[o+1]+e[o+2]+e[o+3]);break;case 3:for(n=0,o=0;n<a;n++,o+=8)r[n]=.125*(e[o]+e[o+1]+e[o+2]+e[o+3]+e[o+4]+e[o+5]+e[o+6]+e[o+7])}return a}},{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this.streamParams.frameType="vector",this.streamParams.frameSize=2,this.streamParams.description=["frequency","confidence"],this.inputFrameSize=e.frameSize;var t=this.streamParams.sourceSampleRate,r=this.params.get("downSamplingExp"),i=1<<r,a=t/i,n=this.inputFrameSize/i,o=a/this.params.get("minFreq");if(this.halfBufferSize=n/2,o>this.halfBufferSize)throw new Error('Invalid input frame size, too small for given "minFreq"');this.downSamplingExp=r,this.downSamplingRate=a,this.downFrameSize=n,this.buffer=new Float32Array(n),this.yinBuffer=new Float32Array(this.halfBufferSize),this.propagateStreamParams()}},{key:"_downsample",value:function(e,t,r,i){var a=t>>i,n=void 0,o=void 0;switch(i){case 0:for(n=0;n<t;n++)r[n]=e[n];break;case 1:for(n=0,o=0;n<a;n++,o+=2)r[n]=.5*(e[o]+e[o+1]);break;case 2:for(n=0,o=0;n<a;n++,o+=4)r[n]=.25*(e[o]+e[o+1]+e[o+2]+e[o+3]);break;case 3:for(n=0,o=0;n<a;n++,o+=8)r[n]=.125*(e[o]+e[o+1]+e[o+2]+e[o+3]+e[o+4]+e[o+5]+e[o+6]+e[o+7])}return a}},{key:"_normalizedDifference",value:function(e){for(var t=this.halfBufferSize,r=this.yinBuffer,i=0,a=0;a<t;a++){for(var n=0,o=0;o<t;o++){var s=e[o]-e[o+a];n+=s*s}a>0&&(i+=n,r[a]=n*(a/i))}r[0]=1}},{key:"_absoluteThreshold",value:function(){var e=this.params.get("threshold"),t=this.yinBuffer,r=this.halfBufferSize,i=void 0;for(i=1;i<r;i++)if(t[i]<e){for(;i+1<r&&t[i+1]<t[i];)i+=1;this.probability=1-t[i];break}return i===r?-1:i}},{key:"_parabolicInterpolation",value:function(e){var t=this.halfBufferSize,r=this.yinBuffer,i=void 0,a=e-1,n=e<t-1?e+1:e;if(n===e)i=e;else{var o=r[a],s=r[e],l=r[n];i=e+(l-o)/(2*(2*s-l-o))}return i}},{key:"inputSignal",value:function(e){this.pitch=-1,this.probability=0;var t=this.buffer,r=this.inputFrameSize,i=this.downSamplingExp,a=this.downSamplingRate,n=this.frame.data,o=-1;return this._downsample(e,r,t,i),this._normalizedDifference(t),-1!==(o=this._absoluteThreshold())&&(o=this._parabolicInterpolation(o),this.pitch=a/o),n[0]=this.pitch,n[1]=this.probability,n}},{key:"processSignal",value:function(e){this.inputSignal(e.data)}}]),t}(u.default);r.default=f},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],265:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("./Biquad")),n=i(e("./Clip")),o=i(e("./Dct")),s=i(e("./Delta")),l=i(e("./Fft")),u=i(e("./Magnitude")),c=i(e("./MeanStddev")),f=i(e("./Mel")),h=i(e("./Merger")),d=i(e("./Mfcc")),p=i(e("./MinMax")),m=i(e("./MovingAverage")),b=i(e("./MovingMedian")),_=i(e("./OnOff")),v=i(e("./Power")),y=i(e("./Rms")),g=i(e("./Multiplier")),w=i(e("./Scale")),k=i(e("./Segmenter")),S=i(e("./Select")),x=i(e("./Slicer")),M=i(e("./Yin"));r.default={Biquad:a.default,Clip:n.default,Dct:o.default,Delta:s.default,Fft:l.default,Magnitude:u.default,MeanStddev:c.default,Mel:f.default,Merger:h.default,Mfcc:d.default,MinMax:p.default,MovingAverage:m.default,MovingMedian:b.default,OnOff:_.default,Power:v.default,Rms:y.default,Multiplier:g.default,Scale:w.default,Segmenter:k.default,Select:S.default,Slicer:x.default,Yin:M.default}},{"./Biquad":243,"./Clip":244,"./Dct":245,"./Delta":246,"./Fft":247,"./Magnitude":248,"./MeanStddev":249,"./Mel":250,"./Merger":251,"./Mfcc":252,"./MinMax":253,"./MovingAverage":254,"./MovingMedian":255,"./Multiplier":256,"./OnOff":257,"./Power":258,"./Rms":259,"./Scale":260,"./Segmenter":261,"./Select":262,"./Slicer":263,"./Yin":264}],266:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u={processStreamParams:{type:"any",default:null,nullable:!0,metas:{kind:"dynamic"}},processFrame:{type:"any",default:null,nullable:!0,metas:{kind:"dynamic"}},finalizeStream:{type:"any",default:null,nullable:!0,metas:{kind:"dynamic"}}},c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,u,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);var t=this.params.get("processStreamParams");null!==t&&t(this.streamParams),this.propagateStreamParams()}},{key:"finalizeStream",value:function(e){var t=this.params.get("finalizeStream");null!==t&&t(e)}},{key:"processScalar",value:function(){}},{key:"processVector",value:function(){}},{key:"processSignal",value:function(){}},{key:"processFrame",value:function(e){this.prepareFrame();var t=this.params.get("processFrame"),r=this.frame;r.data=new Float32Array(this.streamParams.frameSize);for(var i=0;i<this.streamParams.frameSize;i++)r.data[i]=e.data[i];r.time=e.time,r.metadata=e.metadata,null!==t&&t(r)}}]),t}(i(e("../../core/BaseLfo")).default);r.default=c},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],267:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u={separateArrays:{type:"boolean",default:!1,constant:!0},callback:{type:"any",default:null,nullable:!0,metas:{kind:"dynamic"}}},c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,u,e));return r.isRecording=!1,r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"_initStore",value:function(){var e=this.params.get("separateArrays");this._store=e?{time:[],data:[]}:[]}},{key:"processStreamParams",value:function(e){this.prepareStreamParams(e),this._initStore(),this.propagateStreamParams()}},{key:"start",value:function(){this.isRecording=!0}},{key:"stop",value:function(){if(this.isRecording){this.isRecording=!1;var e=this.params.get("callback");null!==e&&e(this._store),this._initStore()}}},{key:"finalizeStream",value:function(){this.stop()}},{key:"processScalar",value:function(e){}},{key:"processSignal",value:function(e){}},{key:"processVector",value:function(e){}},{key:"processFrame",value:function(e){if(this.isRecording){this.prepareFrame(e);var t=this.params.get("separateArrays"),r={time:e.time,data:new Float32Array(e.data)};t?(this._store.time.push(r.time),this._store.data.push(r.data)):this._store.push(r)}}}]),t}(i(e("../../core/BaseLfo")).default);r.default=c},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],268:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u={time:{type:"boolean",default:!1,metas:{kind:"dynamic"}},data:{type:"boolean",default:!1,metas:{kind:"dynamic"}},metadata:{type:"boolean",default:!1,metas:{kind:"dynamic"}},streamParams:{type:"boolean",default:!1,metas:{kind:"dynamic"}},frameIndex:{type:"boolean",default:!1,metas:{kind:"dynamic"}}},c=function(e){function t(e){return(0,n.default)(this,t),(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,u,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(e){!0===this.params.get("streamParams")&&console.log(e),this.frameIndex=0}},{key:"processFunction",value:function(e){!0===this.params.get("frameIndex")&&console.log(this.frameIndex++),!0===this.params.get("time")&&console.log(e.time),!0===this.params.get("data")&&console.log(e.data),!0===this.params.get("metadata")&&console.log(e.metadata)}}]),t}(i(e("../../core/BaseLfo")).default);r.default=c},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],269:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/inherits")),u={duration:{type:"float",default:10,min:0,metas:{kind:"static"}},callback:{type:"any",default:null,nullable:!0,metas:{kind:"dynamic"}},ignoreLeadingZeros:{type:"boolean",default:!0,metas:{kind:"static"}},retrieveAudioBuffer:{type:"boolean",default:!1,constant:!0},audioContext:{type:"any",default:null,nullable:!0}},c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,u,e));r.isRecording=!1;var i=r.params.get("retrieveAudioBuffer"),o=r.params.get("audioContext");if(i&&null===o)throw new Error('Invalid parameter "audioContext": an AudioContext must be provided when `retrieveAudioBuffer` is set to `true`');return r._audioContext=o,r._ignoreZeros=!1,r._isInfiniteBuffer=!1,r._stack=[],r._buffer=null,r._bufferLength=null,r._currentIndex=null,r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"_initBuffer",value:function(){this._buffer=new Float32Array(this._bufferLength),this._stack.length=0,this._currentIndex=0}},{key:"processStreamParams",value:function(e){this.prepareStreamParams(e);var t=this.params.get("duration"),r=this.streamParams.sourceSampleRate;isFinite(t)?(this._isInfiniteBuffer=!1,this._bufferLength=r*t):(this._isInfiniteBuffer=!0,this._bufferLength=10*r),this._initBuffer(),this.propagateStreamParams()}},{key:"start",value:function(){this.isRecording=!0,this._ignoreZeros=this.params.get("ignoreLeadingZeros")}},{key:"stop",value:function(){if(this.isRecording){this.isRecording=!1;var e=this.params.get("retrieveAudioBuffer"),t=this.params.get("callback"),r=this._currentIndex,i=this._buffer,a=void 0;if(this._isInfiniteBuffer){var n=this._bufferLength,o=this._stack;a=new Float32Array(o.length*n+r);for(var s=0;s<o.length;s++){var l=o[s];a.set(l,n*s)}a.set(i.subarray(0,r),o.length*n)}else(a=new Float32Array(r)).set(i.subarray(0,r),0);if(e&&this._audioContext){var u=a.length,c=this.streamParams.sourceSampleRate,f=this._audioContext.createBuffer(1,u,c);f.getChannelData(0).set(a,0),t(f)}else t(a);this._initBuffer()}}},{key:"finalizeStream",value:function(e){this.stop()}},{key:"processSignal",value:function(e){if(this.isRecording){var t=null,r=e.data,i=this._bufferLength,a=this._buffer;if(!1===this._ignoreZeros)t=new Float32Array(r);else if(0!==r[r.length-1]){var n=void 0;for(n=0;n<r.length&&0===r[n];n++);t=new Float32Array(r.subarray(n)),this._ignoreZeros=!1}if(null!==t){var o=i-this._currentIndex,s=void 0;s=o<t.length?t.subarray(0,o):t,a.set(s,this._currentIndex),this._currentIndex+=s.length,this._isInfiniteBuffer&&this._currentIndex===i&&(this._stack.push(a),s=t.subarray(o),this._buffer=new Float32Array(i),this._buffer.set(s,0),this._currentIndex=s.length),this._isInfiniteBuffer||this._currentIndex!==i||this.stop()}}}}]),t}(i(e("../../core/BaseLfo")).default);r.default=c},{"../../core/BaseLfo":277,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],270:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("./Bridge")),n=i(e("./DataRecorder")),o=i(e("./Logger")),s=i(e("./SignalRecorder"));r.default={Bridge:a.default,DataRecorder:n.default,Logger:o.default,SignalRecorder:s.default}},{"./Bridge":266,"./DataRecorder":267,"./Logger":268,"./SignalRecorder":269}],271:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/get-prototype-of")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=i(e("babel-runtime/helpers/possibleConstructorReturn")),l=i(e("babel-runtime/helpers/get")),u=i(e("babel-runtime/helpers/inherits")),c=i(e("../../core/BaseLfo")),f=i(e("../../core/SourceMixin")),h=i(e("@ircam/ticker")),d={source:{type:"any",default:null,metas:{kind:"static"}}},p=function(e){function t(e){(0,n.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this,d,e));return r.sourceStartTime=null,r.sourceEndTime=null,r._ticker=null,r._frames=null,r._frameIndex=0,r._numFrames=null,r._hasStarted=!1,r._separateArrayFrames=null,r.processFrame=r.processFrame.bind(r),r}return(0,u.default)(t,e),(0,o.default)(t,[{key:"processStreamParams",value:function(){var e=this.params.get("source");try{e=JSON.parse()}catch(e){}if(null===e)throw new Error("Undefined DataReader source");if(this.streamParams=e.streamParams,this._frames=e.frames,void 0===this.streamParams||void 0===this._frames)throw new Error("Invalid DataReader source");var t=this.streamParams.frameRate,r=this._frames,i=this._separateArrayFrames?r.time.length:r.length,a=!!Array.isArray(r[0].time);if(0===t){for(var n=Math.min(10,i),o=0,s=0;s<n-1;s++){var l=a?r.time[s]:r[s].time;o+=(a?r.time[s+1]:r[s+1].time)-l}var u=o/(n-1);this.streamParams.frameRate=1/u}this.sourceStartTime=a?r.time[0]:r[0].time,this.sourceEndTime=a?r.time[i-1]:r[i-1].time,this._numFrames=i,this._separateArrayFrames=a;var c=1/this.streamParams.frameRate;null===this._ticker?this._ticker=new h.default(1e3*c,this.processFrame):this._ticker.period=1e3*c,this.propagateStreamParams()}},{key:"start",value:function(){var e=this;if(!1===this.initialized)return null===this.initPromise&&(this.initPromise=this.init()),this.initPromise.then(function(){return e.start()});this._hasStarted=!0,this._ticker.start()}},{key:"stop",value:function(){if(!0===this._hasStarted){this._ticker.stop();var e=1/this.streamParams.frameRate,t=this.sourceStartTime,r=this._frameIndex*e+t;this._frameIndex=0,this._hasStarted=!1,this.finalizeStream(r)}}},{key:"pause",value:function(){!0===this._hasStarted&&(this._ticker.stop(),this._hasStarted=!1)}},{key:"seek",value:function(e){var t=this.sourceEndTime-this.sourceStartTime,r=this.sourceStartTime,i=(e-r)/(t-r),a=Math.floor(i*this._numFrames);this._frameIndex=a}},{key:"prepareFrame",value:function(){(0,l.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"prepareFrame",this).call(this)}},{key:"processFrame",value:function(e){this.prepareFrame();var t=void 0;t=this._separateArrayFrames?{time:this._frames.time[this._frameIndex],data:this._frames.data[this._frameIndex]}:this._frames[this._frameIndex],this._frameIndex+=1,this.frame=t,this.propagateFrame(),this._frameIndex>=this._numFrames&&this.stop()}}]),t}((0,f.default)(c.default));r.default=p},{"../../core/BaseLfo":277,"../../core/SourceMixin":278,"@ircam/ticker":11,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/get":33,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],272:[function(e,t,r){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return d()?function(){var e=t.hrtime();return e[0]+1e-9*e[1]}:function(){return performance.now()/1e3}}Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("babel-runtime/core-js/number/is-finite")),o=i(e("babel-runtime/core-js/object/get-prototype-of")),s=i(e("babel-runtime/helpers/classCallCheck")),l=i(e("babel-runtime/helpers/createClass")),u=i(e("babel-runtime/helpers/possibleConstructorReturn")),c=i(e("babel-runtime/helpers/inherits")),f=i(e("../../core/BaseLfo")),h=i(e("../../core/SourceMixin")),d=new Function("try { return this === global; } catch(e) { return false }"),p={absoluteTime:{type:"boolean",default:!1,constant:!0},audioContext:{type:"any",default:null,constant:!0,nullable:!0},frameType:{type:"enum",list:["signal","vector","scalar"],default:"signal",constant:!0},frameSize:{type:"integer",default:1,min:1,max:1/0,metas:{kind:"static"}},sampleRate:{type:"float",default:null,min:0,max:1/0,nullable:!0,metas:{kind:"static"}},frameRate:{type:"float",default:null,min:0,max:1/0,nullable:!0,metas:{kind:"static"}},description:{type:"any",default:null,constant:!0}},m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,p,e)),i=r.params.get("audioContext");return r._getTime=a(i),r._startTime=null,r._systemTime=null,r._absoluteTime=r.params.get("absoluteTime"),r}return(0,c.default)(t,e),(0,l.default)(t,[{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1===this.initialized)return null===this.initPromise&&(this.initPromise=this.init()),this.initPromise.then(function(){return e.start(t)});this._startTime=t,this._systemTime=null,this.started=!0}},{key:"stop",value:function(){if(this.started&&null!==this._startTime){var e=this._getTime(),t=this.frame.time+(e-this._systemTime);this.finalizeStream(t),this.started=!1}}},{key:"processStreamParams",value:function(){var e=this.params.get("frameSize"),t=this.params.get("frameType"),r=this.params.get("sampleRate"),i=this.params.get("frameRate"),a=this.params.get("description");if(this.streamParams.frameSize="scalar"===t?1:e,this.streamParams.frameType=t,this.streamParams.description=a,"signal"===t){if(null===r)throw new Error('Undefined "sampleRate" for "signal" stream');this.streamParams.sourceSampleRate=r,this.streamParams.frameRate=r/e,this.streamParams.sourceSampleCount=e}else if("vector"===t||"scalar"===t){if(null===i)throw new Error('Undefined "frameRate" for "'+t+'" stream');this.streamParams.frameRate=i,this.streamParams.sourceSampleRate=i,this.streamParams.sourceSampleCount=1}this.propagateStreamParams()}},{key:"processFunction",value:function(e){var t=this._getTime(),r=e.data.length?e.data:[e.data],i=this.frame.data,a=(0,n.default)(e.time)?e.time:t;null===this._startTime&&(this._startTime=a),!1===this._absoluteTime&&(a-=this._startTime);for(var o=0,s=this.streamParams.frameSize;o<s;o++)i[o]=r[o];this.frame.time=a,this.frame.metadata=e.metadata,this._systemTime=t}},{key:"process",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.processFrame({time:e,data:t,metadata:r})}},{key:"processFrame",value:function(e){this.started&&(this.prepareFrame(),this.processFunction(e),this.propagateFrame())}}]),t}((0,h.default)(f.default));r.default=m}).call(this,e("_process"))},{"../../core/BaseLfo":277,"../../core/SourceMixin":278,_process:200,"babel-runtime/core-js/number/is-finite":17,"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],273:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("./EventIn")),n=i(e("./DataReader"));r.default={EventIn:a.default,DataReader:n.default}},{"./DataReader":271,"./EventIn":272}],274:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(e("./windows"));r.default={initWindow:i.default}},{"./windows":275}],275:[function(e,t,r){"use strict";function i(e,t,r){for(var i=0,a=0,n=2*u/t,o=0;o<t;o++){var s=.5-.5*c(o*n);e[o]=s,i+=s,a+=s*s}r.linear=t/i,r.power=h(t/a)}function a(e,t,r){for(var i=0,a=0,n=2*u/t,o=0;o<t;o++){var s=.54-.46*c(o*n);e[o]=s,i+=s,a+=s*s}r.linear=t/i,r.power=h(t/a)}function n(e,t,r){for(var i=0,a=0,n=2*u/t,o=0;o<t;o++){var s=o*n,l=.42-.5*c(s)+.08*c(2*s);e[o]=l,i+=l,a+=l*l}r.linear=t/i,r.power=h(t/a)}function o(e,t,r){for(var i=0,a=0,n=2*u/t,o=0;o<t;o++){var s=o*n,l=.35875-.48829*c(s)+.14128*c(2*s);c(3*s),e[o]=l,i+=l,a+=l*l}r.linear=t/i,r.power=h(t/a)}function s(e,t,r){for(var i=0,a=0,n=u/t,o=0;o<t;o++){var s=f(o*n);e[o]=s,i+=s,a+=s*s}r.linear=t/i,r.power=h(t/a)}function l(e,t,r){for(var i=0;i<t;i++)e[i]=1;r.linear=1,r.power=1}Object.defineProperty(r,"__esModule",{value:!0});var u=Math.PI,c=Math.cos,f=Math.sin,h=Math.sqrt;r.default=function(e,t,r,u){switch(e=e.toLowerCase()){case"hann":case"hanning":i(t,r,u);break;case"hamming":a(t,r,u);break;case"blackman":n(t,r,u);break;case"blackmanharris":o(t,r,u);break;case"sine":s(t,r,u);break;case"rectangle":l(t,r,u)}}},{}],276:[function(e,t,r){"use strict";function i(e){var t=String.fromCharCode.apply(null,e);return JSON.parse(t.replace(/\u0000/g,""))}function a(e){for(var t=(0,n.default)(e),r=new ArrayBuffer(2*t.length),i=new Uint16Array(r),a=0,o=t.length;a<o;a++)i[a]=t.charCodeAt(a);return i}Object.defineProperty(r,"__esModule",{value:!0}),r.decoders=r.encoders=r.opcodes=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("babel-runtime/core-js/json/stringify")),o=r.opcodes={INIT_MODULE_REQ:10,INIT_MODULE_ACK:11,PROCESS_STREAM_PARAMS:12,RESET_STREAM:13,FINALIZE_STREAM:14,PROCESS_FRAME:15},s=r.encoders={opcode:function(e){var t=o[e],r=new Uint16Array(1);return r[0]=t,r},initModuleReq:function(){return s.opcode("INIT_MODULE_REQ").buffer},initModuleAck:function(){return s.opcode("INIT_MODULE_ACK").buffer},streamParams:function(e){var t=s.opcode("PROCESS_STREAM_PARAMS"),r=a(e),i=new Uint16Array(1+r.length);return i.set(t,0),i.set(r,1),i.buffer},resetStream:function(){return s.opcode("RESET_STREAM").buffer},finalizeStream:function(e){var t=s.opcode("RESET_STREAM"),r=new Float64Array(1);r[0]=e;var i=new Uint16Array(5);return i.set(t,0),i.set(new Uint16Array(r.buffer),1),i.buffer},processFrame:function(e,t){var r=s.opcode("PROCESS_FRAME"),i=new Float64Array(1);i[0]=e.time;for(var n=new Float32Array(t),o=0;o<t;o++)n[o]=e.data[o];var l=a(e.metadata),u=5+2*t+l.length,c=new Uint16Array(u);return c.set(r,0),c.set(new Uint16Array(i.buffer),1),c.set(new Uint16Array(n.buffer),5),c.set(l,5+2*t),c.buffer}};r.decoders={opcode:function(e){return new Uint16Array(e)[0]},streamParams:function(e){return i(new Uint16Array(e.slice(2)))},finalizeStream:function(e){return new Float64Array(e.slice(2))[0]},processFrame:function(e,t){var r=10+4*t,a=r;return{time:new Float64Array(e.slice(2,10))[0],data:new Float32Array(e.slice(10,r)),metadata:i(new Uint16Array(e.slice(a)))}}}},{"babel-runtime/core-js/json/stringify":15}],277:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/object/assign")),n=i(e("babel-runtime/core-js/promise")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("@ircam/parameters")),u=0,c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,e),this.cid=u++,this.params=(0,l.default)(t,r),this.params.addListener(this.onParamUpdate.bind(this)),this.streamParams={frameType:null,frameSize:1,frameRate:0,description:null,sourceSampleRate:0,sourceSampleCount:null},this.frame={time:0,data:null,metadata:{}},this.nextModules=[],this.prevModule=null,this._reinit=!1}return(0,s.default)(e,[{key:"getParamsDescription",value:function(){return this.params.getDefinitions()}},{key:"resetParams",value:function(){this.params.reset()}},{key:"onParamUpdate",value:function(e,t){"static"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).kind&&(this._reinit=!0)}},{key:"connect",value:function(t){var r=this;if(!(t instanceof e))throw new Error("Invalid connection: child node is not an instance of `BaseLfo`");if(null===this.streamParams||null===t.streamParams)throw new Error("Invalid connection: cannot connect a dead node");null!==this.streamParams.frameType?t.initModule().then(function(){t.processStreamParams(r.streamParams),r.nextModules.push(t),t.prevModule=r}):(this.nextModules.push(t),t.prevModule=this)}},{key:"disconnect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t)this.nextModules.forEach(function(t){return e.disconnect(t)});else{var r=this.nextModules.indexOf(this);this.nextModules.splice(r,1),t.prevModule=null}}},{key:"destroy",value:function(){for(var e=this.nextModules.length;e--;)this.nextModules[e].destroy();this.prevModule&&this.prevModule.disconnect(this),this.streamParams=null}},{key:"initModule",value:function(){var e=this.nextModules.map(function(e){return e.initModule()});return n.default.all(e)}},{key:"initStream",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.processStreamParams(e),this.resetStream()}},{key:"resetStream",value:function(){for(var e=0,t=this.nextModules.length;e<t;e++)this.nextModules[e].resetStream();if("scalar"!==this.streamParams.frameType&&null!==this.frame.data)for(var r=this.streamParams.frameSize,i=this.frame.data,a=0;a<r;a++)i[a]=0}},{key:"finalizeStream",value:function(e){for(var t=0,r=this.nextModules.length;t<r;t++)this.nextModules[t].finalizeStream(e)}},{key:"processStreamParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.prepareStreamParams(e),this.propagateStreamParams()}},{key:"prepareStreamParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((0,a.default)(this.streamParams,e),e.frameType){case"scalar":if(this.processScalar)this.processFunction=this.processScalar;else if(this.processVector)this.processFunction=this.processVector;else{if(!this.processSignal)throw new Error(this.constructor.name+' - no "process" function found');this.processFunction=this.processSignal}break;case"vector":if(!("processVector"in this))throw new Error(this.constructor.name+' - "processVector" is not defined');this.processFunction=this.processVector;break;case"signal":if(!("processSignal"in this))throw new Error(this.constructor.name+' - "processSignal" is not defined');this.processFunction=this.processSignal}}},{key:"propagateStreamParams",value:function(){this.frame.data=new Float32Array(this.streamParams.frameSize);for(var e=0,t=this.nextModules.length;e<t;e++)this.nextModules[e].processStreamParams(this.streamParams)}},{key:"processFrame",value:function(e){this.prepareFrame(),this.frame.time=e.time,this.frame.metadata=e.metadata,this.processFunction(e),this.propagateFrame()}},{key:"processFunction",value:function(e){this.frame=e}},{key:"prepareFrame",value:function(){if(!0===this._reinit){var e=null!==this.prevModule?this.prevModule.streamParams:{};this.initStream(e),this._reinit=!1}}},{key:"propagateFrame",value:function(){for(var e=0,t=this.nextModules.length;e<t;e++)this.nextModules[e].processFrame(this.frame)}}]),e}();r.default=c},{"@ircam/parameters":10,"babel-runtime/core-js/object/assign":19,"babel-runtime/core-js/promise":26,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31}],278:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/promise")),n=i(e("babel-runtime/core-js/object/get-prototype-of")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=i(e("babel-runtime/helpers/possibleConstructorReturn")),u=i(e("babel-runtime/helpers/inherits"));r.default=function(e){return function(e){function t(){var e;(0,o.default)(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=(0,l.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(i)));return s.initialized=!1,s.initPromise=null,s.started=!1,s.start=s.start.bind(s),s.stop=s.stop.bind(s),s}return(0,u.default)(t,e),(0,s.default)(t,[{key:"init",value:function(){var e=this;return this.initPromise=this.initModule().then(function(){return e.initStream(),e.initialized=!0,a.default.resolve(!0)}),this.initPromise}},{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"processFrame",value:function(e){}}]),t}(e)}},{"babel-runtime/core-js/object/get-prototype-of":23,"babel-runtime/core-js/promise":26,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/inherits":34,"babel-runtime/helpers/possibleConstructorReturn":35}],279:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./BaseLfo");Object.defineProperty(r,"BaseLfo",{enumerable:!0,get:function(){return i(a).default}});var n=e("./SourceMixin");Object.defineProperty(r,"SourceMixin",{enumerable:!0,get:function(){return i(n).default}});r.version="1.1.2"},{"./BaseLfo":277,"./SourceMixin":278}],280:[function(e,t,r){(function(t,i){var a=e("url"),n=e("child_process").spawn,o=e("fs");r.XMLHttpRequest=function(){"use strict";var r,s,l=this,u=e("http"),c=e("https"),f={},h=!1,d={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},p={},m={},b=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],_=["TRACE","TRACK","CONNECT"],v=!1,y=!1,g={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1;var w=function(e){return h||e&&-1===b.indexOf(e.toLowerCase())},k=function(e){return e&&-1===_.indexOf(e)};this.open=function(e,t,r,i,a){if(this.abort(),y=!1,!k(e))throw new Error("SecurityError: Request method not allowed");f={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:i||null,password:a||null},S(this.OPENED)},this.setDisableHeaderCheck=function(e){h=e},this.setRequestHeader=function(e,t){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(w(e)){if(v)throw new Error("INVALID_STATE_ERR: send flag is true");e=m[e.toLowerCase()]||e,m[e.toLowerCase()]=e,p[e]=p[e]?p[e]+", "+t:t}else console.warn('Refused to set unsafe header "'+e+'"')},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&s&&s.headers&&s.headers[e.toLowerCase()]&&!y?s.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||y)return"";var e="";for(var t in s.headers)"set-cookie"!==t&&"set-cookie2"!==t&&(e+=t+": "+s.headers[t]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&m[e.toLowerCase()]?p[m[e.toLowerCase()]]:""},this.send=function(e){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(v)throw new Error("INVALID_STATE_ERR: send has already been called");var h,b=!1,_=!1,g=a.parse(f.url);switch(g.protocol){case"https:":b=!0;case"http:":h=g.hostname;break;case"file:":_=!0;break;case void 0:case null:case"":h="localhost";break;default:throw new Error("Protocol not supported.")}if(_){if("GET"!==f.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(f.async)o.readFile(g.pathname,"utf8",function(e,t){e?l.handleError(e):(l.status=200,l.responseText=t,S(l.DONE))});else try{this.responseText=o.readFileSync(g.pathname,"utf8"),this.status=200,S(l.DONE)}catch(e){this.handleError(e)}}else{var w=g.port||(b?443:80),k=g.pathname+(g.search?g.search:"");for(var x in d)m[x.toLowerCase()]||(p[x]=d[x]);if(p.Host=h,b&&443===w||80===w||(p.Host+=":"+g.port),f.user){void 0===f.password&&(f.password="");var M=new i(f.user+":"+f.password);p.Authorization="Basic "+M.toString("base64")}"GET"===f.method||"HEAD"===f.method?e=null:e?(p["Content-Length"]=i.isBuffer(e)?e.length:i.byteLength(e),p["Content-Type"]||(p["Content-Type"]="text/plain;charset=UTF-8")):"POST"===f.method&&(p["Content-Length"]=0);var C={host:h,port:w,path:k,method:f.method,headers:p,agent:!1,withCredentials:l.withCredentials};if(y=!1,f.async){var j=b?c.request:u.request;v=!0,l.dispatchEvent("readystatechange");var P=function(e){l.handleError(e)};r=j(C,function e(t){if(301!==(s=t).statusCode&&302!==s.statusCode&&303!==s.statusCode&&307!==s.statusCode)s.setEncoding("utf8"),S(l.HEADERS_RECEIVED),l.status=s.statusCode,s.on("data",function(e){e&&(l.responseText+=e),v&&S(l.LOADING)}),s.on("end",function(){v&&(S(l.DONE),v=!1)}),s.on("error",function(e){l.handleError(e)});else{f.url=s.headers.location;var i=a.parse(f.url);h=i.hostname;var n={hostname:i.hostname,port:i.port,path:i.path,method:303===s.statusCode?"GET":f.method,headers:p,withCredentials:l.withCredentials};(r=j(n,e).on("error",P)).end()}}).on("error",P),e&&r.write(e),r.end(),l.dispatchEvent("loadstart")}else{var R=".node-xmlhttprequest-content-"+t.pid,O=".node-xmlhttprequest-sync-"+t.pid;o.writeFileSync(O,"","utf8");for(var E="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(b?"s":"")+".request;var options = "+JSON.stringify(C)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+R+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+O+"');});response.on('error', function(error) {fs.writeFileSync('"+R+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+O+"');});}).on('error', function(error) {fs.writeFileSync('"+R+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+O+"');});"+(e?"req.write('"+JSON.stringify(e).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",T=n(t.argv[0],["-e",E]);o.existsSync(O););var A=JSON.parse(o.readFileSync(R,"utf8"));T.stdin.end(),o.unlinkSync(R),A.err?l.handleError(A.err):(s=A.data,l.status=A.data.statusCode,l.responseText=A.data.text,S(l.DONE))}}},this.handleError=function(e){this.status=0,this.statusText=e,this.responseText=e.stack,y=!0,S(this.DONE),this.dispatchEvent("error")},this.abort=function(){r&&(r.abort(),r=null),p=d,this.status=0,this.responseText="",this.responseXML="",y=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!v||this.readyState===this.DONE||(v=!1,S(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(e,t){e in g||(g[e]=[]),g[e].push(t)},this.removeEventListener=function(e,t){e in g&&(g[e]=g[e].filter(function(e){return e!==t}))},this.dispatchEvent=function(e){if("function"==typeof l["on"+e]&&l["on"+e](),e in g)for(var t=0,r=g[e].length;t<r;t++)g[e][t].call(l)};var S=function(e){e!=l.LOADING&&l.readyState===e||(l.readyState=e,(f.async||l.readyState<l.OPENED||l.readyState===l.DONE)&&l.dispatchEvent("readystatechange"),l.readyState!==l.DONE||y||(l.dispatchEvent("load"),l.dispatchEvent("loadend")))}}}).call(this,e("_process"),e("buffer").Buffer)},{_process:200,buffer:41,child_process:40,fs:40,http:215,https:176,url:221}],281:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/json/stringify")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils/gmm-utils")),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,n.default)(this,e),this._model=void 0,this._modelResults=void 0,this._likelihoodWindow=t,this._weights=[]}return(0,o.default)(e,[{key:"filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=null,i=null;if(this._model)try{s.gmmFilter(e,this._model,this._modelResults);var a=this._modelResults.likeliest>-1?this._model.models[this._modelResults.likeliest].label:null,n=this._modelResults.smoothed_normalized_likelihoods.slice(0);i={likeliest:a,likeliestIndex:this._modelResults.likeliest,likelihoods:n,outputValues:[],outputCovariance:[]},this._model.shared_parameters.bimodal&&(i.outputValues=this._modelResults.output_values.slice(0),i.outputCovariance=this.modelResults.output_covariance.slice(0))}catch(e){r="problem occured during filtering : "+e}else r="no model loaded yet";return t&&t(r,i),i}},{key:"getLikelihoodWindow",value:function(){return this._likelihoodWindow}},{key:"setLikelihoodWindow",value:function(e){this._likelihoodWindow=e,this._updateLikelihoodWindow()}},{key:"_updateLikelihoodWindow",value:function(){if(void 0!==this._model)for(var e=this._modelResults.singleClassGmmModelResults,t=0;t<this._model.models.length;t++){e[t].likelihood_buffer=new Array(this._likelihoodWindow);for(var r=0;r<this._likelihoodWindow;r++)e[t].likelihood_buffer[r]=1/this._likelihoodWindow}}},{key:"setWeights",value:function(e){if(!Array.isArray(e))throw new Error("Weights must be an array");this._weights=e,this._updateWeights()}},{key:"_updateWeights",value:function(){if(void 0!==this._model){var e=this._model,t=e.shared_parameters,r=t.bimodal?t.dimension_input:t.dimension,i=this._weights.slice();if(i.length<r)for(var a=r-i.length,n=0;n<a;n++)i.push(1);else i.length>r&&i.splice(r-1);for(var o=0;o<i.length;o++)i[o]=Math.max(i[o],0);for(var s=0;s<e.models.length;s++)for(var l=0;l<e.models[s].components.length;l++)e.models[s].components[l].weights=i}}},{key:"getModel",value:function(){if(this._model)return JSON.parse((0,a.default)(this._model))}},{key:"setModel",value:function(e){this._setModel(e)}},{key:"_setModel",value:function(e){if(this._model=void 0,this._modelResults=void 0,e&&void 0!==e.models){this._model=e,this._updateWeights();var t=this._model,r=t.models.length;this._modelResults={instant_likelihoods:new Array(r),smoothed_log_likelihoods:new Array(r),smoothed_likelihoods:new Array(r),instant_normalized_likelihoods:new Array(r),smoothed_normalized_likelihoods:new Array(r),likeliest:-1,singleClassGmmModelResults:[]};var i=t.shared_parameters,a=i.dimension-i.dimension_input;this._modelResults.output_values=new Array(a);for(var n=0;n<a;n++)this._modelResults.output_values[n]=0;var o=void 0;o=0==t.configuration.default_parameters.covariance_mode?a*a:a,this._modelResults.output_covariance=new Array(o);for(var s=0;s<a;s++)this._modelResults.output_covariance[s]=0;for(var l=0;l<r;l++){this._modelResults.instant_likelihoods[l]=0,this._modelResults.smoothed_log_likelihoods[l]=0,this._modelResults.smoothed_likelihoods[l]=0,this._modelResults.instant_normalized_likelihoods[l]=0,this._modelResults.smoothed_normalized_likelihoods[l]=0;var u={instant_likelihood:0,log_likelihood:0};u.likelihood_buffer=new Array(this._likelihoodWindow);for(var c=0;c<this._likelihoodWindow;c++)u.likelihood_buffer[c]=1/this._likelihoodWindow;u.likelihood_buffer_index=0,u.beta=new Array(t.models[l].components.length);for(var f=0;f<u.beta.length;f++)u.beta[f]=1/u.beta.length;u.output_values=this._modelResults.output_values.slice(0),u.output_covariance=this._modelResults.output_covariance.slice(0),this._modelResults.singleClassGmmModelResults.push(u)}}}},{key:"getLikeliestLabel",value:function(){return this._modelResults&&this._modelResults.likeliest>-1?this._model.models[this._modelResults.likeliest].label:"unknown"}},{key:"getNumberOfClasses",value:function(){return this._model?this._model.models.length:0}},{key:"getRegressionVectorSize",value:function(){if(this._model){var e=this._model.shared_parameters;return e.bimodal?e.dimension-e.dimension_input:0}return 0}}]),e}();r.default=l},{"../utils/gmm-utils":286,"babel-runtime/core-js/json/stringify":15,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31}],282:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/json/stringify")),n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../utils/hhmm-utils")),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,n.default)(this,e),this._likelihoodWindow=t,this._model=void 0,this._modelResults=void 0,this._weights=[]}return(0,o.default)(e,[{key:"filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=null,i=null;if(this._model)try{s.hhmmFilter(e,this._model,this._modelResults);var a=this._modelResults.likeliest>-1?this._model.models[this._modelResults.likeliest].label:null,n=this._modelResults.smoothed_normalized_likelihoods.slice(0);i={likeliest:a,likeliestIndex:this._modelResults.likeliest,likelihoods:n,timeProgressions:new Array(this._model.models.length),alphas:new Array(this._model.models.length),outputValues:[],outputCovariance:[]};for(var o=0;o<this._model.models.length;o++)i.timeProgressions[o]=this._modelResults.singleClassHmmModelResults[o].progress,this._model.configuration.default_parameters.hierarchical?i.alphas[o]=this._modelResults.singleClassHmmModelResults[o].alpha_h[0]:i.alphas[o]=this._modelResults.singleClassHmmModelResults[o].alpha[0];this._model.shared_parameters.bimodal&&(i.outputValues=this._modelResults.output_values.slice(0),i.outputCovariance=this._modelResults.output_covariance.slice(0))}catch(e){r="problem occured during filtering : "+e}else r="no model loaded yet";return t&&t(r,i),i}},{key:"reset",value:function(){this._model&&this._setModel(this._model)}},{key:"getLikelihoodWindow",value:function(){return this._likelihoodWindow}},{key:"setLikelihoodWindow",value:function(e){this._likelihoodWindow=e,this._updateLikelihoodWindow()}},{key:"_updateLikelihoodWindow",value:function(){if(void 0!==this._model)for(var e=this._modelResults.singleClassHmmModelResults,t=0;t<this._model.models.length;t++){e[t].likelihood_buffer=new Array(this._likelihoodWindow);for(var r=0;r<this._likelihoodWindow;r++)e[t].likelihood_buffer[r]=1/this._likelihoodWindow}}},{key:"setWeights",value:function(e){if(!Array.isArray(e))throw new Error("Weights must be an array");this._weights=e,this._updateWeights()}},{key:"_updateWeights",value:function(){if(void 0!==this._model){var e=this._model,t=e.shared_parameters,r=t.bimodal?t.dimension_input:t.dimension,i=this._weights.slice();if(i.length<r)for(var a=r-i.length,n=0;n<a;n++)i.push(1);else i.length>r&&i.splice(r-1);for(var o=0;o<i.length;o++)i[o]=Math.max(i[o],0);for(var s=0;s<e.models.length;s++)for(var l=0;l<e.models[s].states.length;l++)for(var u=0;u<e.models[s].states[l].components.length;u++)e.models[s].states[l].components[u].weights=i}}},{key:"getModel",value:function(){if(this._model)return JSON.parse((0,a.default)(this._model))}},{key:"setModel",value:function(e){this._setModel(e)}},{key:"_setModel",value:function(e){if(this._model=void 0,this._modelResults=void 0,e&&void 0!==e.models){this._model=e,this._updateWeights();var t=this._model,r=t.models.length;this._modelResults={instant_likelihoods:new Array(r),smoothed_log_likelihoods:new Array(r),smoothed_likelihoods:new Array(r),instant_normalized_likelihoods:new Array(r),smoothed_normalized_likelihoods:new Array(r),likeliest:-1,frontier_v1:new Array(r),frontier_v2:new Array(r),forward_initialized:!1,singleClassHmmModelResults:[]};var i=t.shared_parameters,a=i.dimension-i.dimension_input;this._modelResults.output_values=new Array(a);for(var n=0;n<a;n++)this._modelResults.output_values[n]=0;var o=void 0;o=0==t.configuration.default_parameters.covariance_mode?a*a:a,this._modelResults.output_covariance=new Array(o);for(var s=0;s<a;s++)this._modelResults.output_covariance[s]=0;for(var l=0;l<r;l++){this._modelResults.instant_likelihoods[l]=0,this._modelResults.smoothed_log_likelihoods[l]=0,this._modelResults.smoothed_likelihoods[l]=0,this._modelResults.instant_normalized_likelihoods[l]=0,this._modelResults.smoothed_normalized_likelihoods[l]=0;for(var u=t.models[l].parameters.states,c=new Array(3),f=0;f<3;f++){c[f]=new Array(u);for(var h=0;h<u;h++)c[f][h]=0}for(var d=new Array(u),p=0;p<u;p++)d[p]=0;for(var m=new Array(this._likelihoodWindow),b=0;b<this._likelihoodWindow;b++)m[b]=0;var _={hierarchical:t.configuration.default_parameters.hierarchical,instant_likelihood:0,log_likelihood:0,likelihood_buffer:m,likelihood_buffer_index:0,progress:0,exit_likelihood:0,exit_ratio:0,likeliest_state:-1,previous_alpha:d.slice(0),alpha:d,alpha_h:c,window_minindex:0,window_maxindex:0,window_normalization_constant:0,forward_initialized:!1,singleClassGmmModelResults:[]};_.output_values=this._modelResults.output_values.slice(0),_.output_covariance=this._modelResults.output_covariance.slice(0);for(var v=0;v<u;v++){var y={instant_likelihood:0,log_likelihood:0};y.beta=new Array(this._model.models[l].parameters.gaussians);for(var g=0;g<y.beta.length;g++)y.beta[g]=1/y.beta.length;y.output_values=_.output_values.slice(0),y.output_covariance=_.output_covariance.slice(0),_.singleClassGmmModelResults.push(y)}this._modelResults.singleClassHmmModelResults.push(_)}}}},{key:"getLikeliestLabel",value:function(){return this._modelResults&&this._modelResults.likeliest>-1?this._model.models[this._modelResults.likeliest].label:"unknown"}},{key:"getNumberOfClasses",value:function(){return this._model?this._model.models.length:0}},{key:"getRegressionVectorSize",value:function(){if(this._model){var e=this._model.shared_parameters;return e.bimodal?e.dimension-e.dimension_input:0}return 0}}]),e}();r.default=l},{"../utils/hhmm-utils":287,"babel-runtime/core-js/json/stringify":15,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31}],283:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./gmm/gmm-decoder");Object.defineProperty(r,"GmmDecoder",{enumerable:!0,get:function(){return i(a).default}});var n=e("./hhmm/hhmm-decoder");Object.defineProperty(r,"HhmmDecoder",{enumerable:!0,get:function(){return i(n).default}});var o=e("./set/xmm-phrase");Object.defineProperty(r,"PhraseMaker",{enumerable:!0,get:function(){return i(o).default}});var s=e("./set/xmm-set");Object.defineProperty(r,"SetMaker",{enumerable:!0,get:function(){return i(s).default}})},{"./gmm/gmm-decoder":281,"./hhmm/hhmm-decoder":282,"./set/xmm-phrase":284,"./set/xmm-set":285}],284:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/helpers/typeof")),n=i(e("babel-runtime/core-js/number/is-integer")),o=i(e("babel-runtime/helpers/classCallCheck")),s=i(e("babel-runtime/helpers/createClass")),l=function(e){return e.constructor===Float32Array||Array.isArray(e)},u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,e);var r={bimodal:!1,dimension:1,dimensionInput:0,columnNames:[""],label:""};this._config=r,this._setConfig(t),this.reset()}return(0,s.default)(e,[{key:"getConfig",value:function(){return this._config}},{key:"setConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setConfig(e)}},{key:"_setConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)"bimodal"===t&&"boolean"==typeof e[t]?this._config[t]=e[t]:"dimension"===t&&(0,n.default)(e[t])?this._config[t]=e[t]:"dimensionInput"===t&&(0,n.default)(e[t])?this._config[t]=e[t]:"columnNames"===t&&Array.isArray(e[t])?this._config[t]=e[t].slice(0):"label"===t&&"string"==typeof e[t]&&(this._config[t]=e[t])}},{key:"addObservation",value:function(e){var t="Bad data type: all observation values must be numbers";if(l(e)){for(var r=0;r<e.length;r++)if("number"!=typeof e[r])throw new Error(t)}else if((0,a.default)("number"!==e))throw new Error(t);if(e.length!==this._config.dimension||"number"==typeof e&&1!==this._config.dimension)throw new Error("Bad input length: observation length must match phrase dimension");if(this._config.bimodal){for(var i=0;i<this._config.dimensionInput;i++)this._dataIn.push(e[i]);for(var n=this._config.dimensionInput;n<this._config.dimension;n++)this._dataOut.push(e[n])}else if(l(e))for(var o=0;o<e.length;o++)this._data.push(e[o]);else this._data.push(e)}},{key:"getPhrase",value:function(){return this._getPhrase()}},{key:"_getPhrase",value:function(){var e={bimodal:this._config.bimodal,column_names:this._config.columnNames,dimension:this._config.dimension,dimension_input:this._config.dimensionInput,label:this._config.label,length:this._config.bimodal?this._dataIn.length/this._config.dimensionInput:this._data.length/this._config.dimension};return this._config.bimodal?(e.data_input=this._dataIn,e.data_output=this._dataOut):e.data=this._data,e}},{key:"reset",value:function(){this._data=[],this._dataIn=[],this._dataOut=[]}}]),e}();r.default=u},{"babel-runtime/core-js/number/is-integer":18,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31,"babel-runtime/helpers/typeof":37}],285:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=i(e("babel-runtime/core-js/number/is-integer")),n=i(e("babel-runtime/core-js/json/stringify")),o=i(e("babel-runtime/core-js/get-iterator")),s=i(e("babel-runtime/helpers/classCallCheck")),l=i(e("babel-runtime/helpers/createClass")),u=function(){function e(){(0,s.default)(this,e),this._config={},this._phrases=[]}return(0,l.default)(e,[{key:"getSize",value:function(){return this._phrases.length}},{key:"addPhrase",value:function(e){if(0===this._phrases.length)this._setConfigFrom(e);else if(!this._checkCompatibility(e))throw new Error("Bad phrase format: added phrase must match current set configuration");this._phrases.push(e)}},{key:"addTrainingSet",value:function(e){if(0===this._phrases.length)this._setConfigFrom(e);else if(!this._checkCompatibility(e))throw new Error("Bad set format: added set must match current set configuration");var t=e.phrases,r=!0,i=!1,a=void 0;try{for(var n,s=(0,o.default)(t);!(r=(n=s.next()).done);r=!0){var l=n.value;this._phrases.push(l)}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}}},{key:"getPhrase",value:function(e){return e>-1&&e<this._phrases.length?JSON.parse((0,n.default)(this._phrases[e])):null}},{key:"removePhrase",value:function(e){e>-1&&e<this._phrases.length&&this._phrases.splice(e,1)}},{key:"getPhrasesOfLabel",value:function(e){var t={};for(var r in this._config)t[r]=this._config[r];t.phrases=[];var i=0,a=!0,s=!1,l=void 0;try{for(var u,c=(0,o.default)(this._phrases);!(a=(u=c.next()).done);a=!0){var f=u.value;if(f.label===e){var h=JSON.parse((0,n.default)(f));h.index=i++,t.phrases.push(h)}}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}return t}},{key:"removePhrasesOfLabel",value:function(e){for(var t=this._phrases.length-1;t>=0;t--)this._phrases[t].label===e&&this._phrases.splice(t,1)}},{key:"getTrainingSet",value:function(){var e={};for(var t in this._config)e[t]=this._config[t];e.phrases=[];var r=0,i=!0,a=!1,s=void 0;try{for(var l,u=(0,o.default)(this._phrases);!(i=(l=u.next()).done);i=!0){var c=l.value,f=JSON.parse((0,n.default)(c));f.index=r++,e.phrases.push(f)}}catch(e){a=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}return e}},{key:"clear",value:function(){this._config={},this._phrases=[]}},{key:"_setConfigFrom",value:function(e){for(var t in e)"bimodal"===t&&"boolean"==typeof e.bimodal?this._config[t]=e[t]:"column_names"===t&&Array.isArray(e[t])?this._config[t]=e[t].slice(0):"dimension"===t&&(0,a.default)(e[t])?this._config[t]=e[t]:"dimension_input"===t&&(0,a.default)(e[t])&&(this._config[t]=e[t])}},{key:"_checkCompatibility",value:function(e){if(e.bimodal!==this._config.bimodal||e.dimension!==this._config.dimension||e.dimension_input!==this._config.dimension_input)return!1;var t=e.column_names,r=this._config.column_names;if(t.length!==r.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==r[i])return!1;return!0}}]),e}();r.default=u},{"babel-runtime/core-js/get-iterator":13,"babel-runtime/core-js/json/stringify":15,"babel-runtime/core-js/number/is-integer":18,"babel-runtime/helpers/classCallCheck":30,"babel-runtime/helpers/createClass":31}],286:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.gmmFilter=r.gmmLikelihood=r.gmmObsProbBimodal=r.gmmObsProbInput=r.gmmObsProb=r.gmmRegression=r.gmmComponentLikelihoodBimodal=r.gmmComponentLikelihoodInput=r.gmmComponentLikelihood=r.gmmComponentRegression=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("babel-runtime/core-js/number/is-finite")),a=r.gmmComponentRegression=function(e,t,r){var i=r.dimension,a=r.dimension_input,n=i-a;if(t=new Array(n),0===r.covariance_mode)for(var o=0;o<n;o++){t[o]=r.mean[a+o];for(var s=0;s<a;s++){for(var l=0,u=0;u<a;u++)l+=r.inverse_covariance_input[s*a+u]*(e[u]-r.mean[u]);t[o]+=r.covariance[(o+a)*i+s]*l}}else for(var c=0;c<n;c++)t[c]=r.covariance[c+a]},n=r.gmmComponentLikelihood=function(e,t){var r=0;if(0===t.covariance_mode)for(var a=0;a<t.dimension;a++){for(var n=0,o=0;o<t.dimension;o++)n+=t.inverse_covariance[a*t.dimension+o]*(e[o]-t.mean[o])*t.weights[o];r+=(e[a]-t.mean[a])*n*t.weights[a]}else for(var s=0;s<t.dimension;s++)r+=t.inverse_covariance[s]*(e[s]-t.mean[s])*(e[s]-t.mean[s])*t.weights[s]*t.weights[s];var l=Math.exp(-.5*r)/Math.sqrt(t.covariance_determinant*Math.pow(2*Math.PI,t.dimension));return(l<1e-180||!(0,i.default)(l))&&(l=1e-180),l},o=r.gmmComponentLikelihoodInput=function(e,t){var r=0;if(0===t.covariance_mode)for(var i=0;i<t.dimension_input;i++){for(var a=0,n=0;n<t.dimension_input;n++)a+=t.inverse_covariance_input[i*t.dimension_input+n]*(e[n]-t.mean[n])*t.weights[n];r+=(e[i]-t.mean[i])*a*t.weights[i]}else for(var o=0;o<t.dimension_input;o++)r+=t.inverse_covariance_input[o]*(e[o]-t.mean[o])*(e[o]-t.mean[o])*t.weights[o]*t.weights[o];var s=Math.exp(-.5*r)/Math.sqrt(t.covariance_determinant_input*Math.pow(2*Math.PI,t.dimension_input));return(s<1e-180||isNaN(s)||isNaN(Math.abs(s)))&&(s=1e-180),s},s=r.gmmComponentLikelihoodBimodal=function(e,t,r){var i=r.dimension,a=r.dimension_input,n=i-a,o=0;if(0===r.covariance_mode)for(var s=0;s<i;s++){for(var l=0,u=0;u<a;u++)l+=r.inverse_covariance[s*i+u]*(e[u]-r.mean[u])*r.weights[u];for(var c=0;c<n;c++)l+=r.inverse_covariance[s*i+a+c]*(t[c]-r.mean[a+c]);o+=s<a?(e[s]-r.mean[s])*l*r.weights[s]:(t[s-a]-r.mean[s])*l}else{for(var f=0;f<a;f++)o+=r.inverse_covariance[f]*(e[f]-r.mean[f])*(e[f]-r.mean[f])*r.weights[f]*r.weights[f];for(var h=a;h<i;h++){var d=(t[h-a]-r.mean[h])*(t[h-a]-r.mean[h]);o+=r.inverse_covariance[h]*d}}var p=Math.exp(-.5*o)/Math.sqrt(r.covariance_determinant*Math.pow(2*Math.PI,r.dimension));return(p<1e-180||isNaN(p)||isNaN(Math.abs(p)))&&(p=1e-180),p},l=(r.gmmRegression=function(e,t,r){var i=t.components[0].dimension-t.components[0].dimension_input;r.output_values=new Array(i);for(var n=0;n<i;n++)r.output_values[n]=0;var o=void 0;o=0===t.parameters.covariance_mode?i*i:i,r.output_covariance=new Array(o);for(var s=0;s<o;s++)r.output_covariance[s]=0;for(var l=0;l<t.components.length;l++){a(e,void 0,t.components[l]);for(var u=r.beta[l]*r.beta[l],c=0;c<i;c++)if(r.output_values[c]+=r.beta[l]*(void 0)[c],0===t.parameters.covariance_mode)for(var f=0;f<i;f++){var h=c*i+f;r.output_covariance[h]+=u*t.components[l].output_covariance[h]}else r.output_covariance[c]+=u*t.components[l].output_covariance[c]}},r.gmmObsProb=function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=r.mixture_coeffs,o=r.components,s=0;if(i<0)for(var l=0;l<o.length;l++)s+=e(t,r,l);else s=a[i]*n(t,o[i]);return s}),u=r.gmmObsProbInput=function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=r.mixture_coeffs,n=r.components,s=0;if(i<0)for(var l=0;l<n.length;l++)s+=e(t,r,l);else s=a[i]*o(t,n[i]);return s},c=r.gmmObsProbBimodal=function e(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,n=i.mixture_coeffs,o=i.components,l=0;if(a<0)for(var u=0;u<o.length;u++)l+=e(t,r,i,u);else l=n[a]*s(t,r,o[a]);return l},f=r.gmmLikelihood=function(e,t,r){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=t.components,n=r,o=0,s=0;s<a.length;s++)a[s].bimodal?0===i.length?n.beta[s]=u(e,t,s):n.beta[s]=c(e,i,t,s):n.beta[s]=l(e,t,s),o+=n.beta[s];for(var f=0;f<a.length;f++)n.beta[f]/=o;n.instant_likelihood=o;var h=n.likelihood_buffer.length;return n.likelihood_buffer[n.likelihood_buffer_index]=Math.log(o),n.likelihood_buffer_index=(n.likelihood_buffer_index+1)%h,n.log_likelihood=n.likelihood_buffer.reduce(function(e,t){return e+t},0),n.log_likelihood/=h,o};r.gmmFilter=function(e,t,r){for(var i=t.models,a=r,n=0,o=0,s=0,l=0;l<i.length;l++){var u=a.singleClassGmmModelResults[l];a.instant_likelihoods[l]=f(e,i[l],u),a.smoothed_log_likelihoods[l]=u.log_likelihood,a.smoothed_likelihoods[l]=Math.exp(a.smoothed_log_likelihoods[l]),a.instant_normalized_likelihoods[l]=a.instant_likelihoods[l],a.smoothed_normalized_likelihoods[l]=a.smoothed_likelihoods[l],o+=a.instant_normalized_likelihoods[l],s+=a.smoothed_normalized_likelihoods[l],(0==l||a.smoothed_log_likelihoods[l]>n)&&(n=a.smoothed_log_likelihoods[l],a.likeliest=l)}for(var c=0;c<i.length;c++)a.instant_normalized_likelihoods[c]/=o,a.smoothed_normalized_likelihoods[c]/=s;var h=t.shared_parameters,d=t.configuration;if(h.bimodal){var p=h.dimension-h.dimension_input;if(0===d.multiClass_regression_estimator)a.output_values=a.singleClassModelResults[a.likeliest].output_values,a.output_covariance=a.singleClassModelResults[a.likeliest].output_covariance;else{a.output_values=new Array(p);for(var m=0;m<p;m++)a.output_values[m]=0;var b=void 0;b=0==d.default_parameters.covariance_mode?p*p:p,a.output_covariance=new Array(b);for(var _=0;_<b;_++)a.output_covariance[_]=0;for(var v=0;v<i.length;v++)for(var y=a.smoothed_normalized_likelihoods[v],g=a.singleClassGmmModelResults[v];0<p;v++)if(a.output_values[0]+=y*g.output_values[0],0===d.default_parameters.covariance_mode)for(var w=0;w<p;w++){var k=0*p+w;a.output_covariance[k]+=y*g.output_covariance[k]}else a.output_covariance[0]+=y*g.output_covariance[0]}}}},{"babel-runtime/core-js/number/is-finite":17}],287:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hhmmFilter=r.hhmmUpdateResults=r.hhmmForwardUpdate=r.hhmmForwardInit=r.hhmmLikelihoodAlpha=r.hmmFilter=r.hmmUpdateResults=r.hmmUpdateAlphaWindow=r.hmmForwardUpdate=r.hmmForwardInit=r.hmmRegression=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./gmm-utils")),a=r.hmmRegression=function(e,t,r){var a=t.states[0].components[0].dimension-t.states[0].components[0].dimension_input,n=void 0;n=0===t.states[0].components[0].covariance_mode?a*a:a,r.output_values=new Array(a);for(var o=0;o<a;o++)r.output_values[o]=0;r.output_covariance=new Array(n);for(var s=0;s<n;s++)r.output_covariance[s]=0;if(2===t.parameters.regression_estimator)return i.gmmLikelihood(e,t.states[r.likeliest_state],r.singleClassGmmModelResults[r.likeliest_state]),i.gmmRegression(e,t.states[r.likeliest_state],r.singleClassGmmModelResults[r.likeliest_state]),void(r.output_values=t.states[r.likeliest_state].output_values.slice());var l=0==t.parameters.regression_estimator?0:r.window_minindex,u=0==t.parameters.regression_estimator?t.states.length:r.window_maxindex,c=0==t.parameters.regression_estimator?1:r.window_normalization_constant;c<=0&&(c=1);for(var f=l;f<u;f++){i.gmmLikelihood(e,t.states[f],r.singleClassGmmModelResults[f]),i.gmmRegression(e,t.states[f],r.singleClassGmmModelResults[f]);for(var h=r.singleClassGmmModelResults[f].output_values.slice(0),d=0;d<a;d++)if(r.hierarchical)if(r.output_values[d]+=(r.alpha_h[0][f]+r.alpha_h[1][f])*h[d]/c,0===t.parameters.covariance_mode)for(var p=0;p<a;p++)r.output_covariance[d*a+p]+=(r.alpha_h[0][f]+r.alpha_h[1][f])*(r.alpha_h[0][f]+r.alpha_h[1][f])*r.singleClassGmmModelResults[f].output_covariance[d*a+p]/c;else r.output_covariance[d]+=(r.alpha_h[0][f]+r.alpha_h[1][f])*(r.alpha_h[0][f]+r.alpha_h[1][f])*r.singleClassGmmModelResults[f].output_covariance[d]/c;else if(r.output_values[d]+=r.alpha[f]*h[d]/c,0===t.parameters.covariance_mode)for(var m=0;m<a;m++)r.output_covariance[d*a+m]+=r.alpha[f]*r.alpha[f]*r.singleClassGmmModelResults[f].output_covariance[d*a+m]/c;else r.output_covariance[d]+=r.alpha[f]*r.alpha[f]*r.singleClassGmmModelResults.output_covariance[d]/c}},n=r.hmmForwardInit=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=t.parameters.states,o=0;if(0===t.parameters.transition_mode)for(var s=0;s<n;s++)t.states[s].components[0].bimodal?a.length>0?r.alpha[s]=t.prior[s]*i.gmmObsProbBimodal(e,a,t.states[s]):r.alpha[s]=t.prior[s]*i.gmmObsProbInput(e,t.states[s]):r.alpha[s]=t.prior[s]*i.gmmObsProb(e,t.states[s]),o+=r.alpha[s];else{for(var l=0;l<r.alpha.length;l++)r.alpha[l]=0;t.states[0].components[0].bimodal?a.length>0?r.alpha[0]=i.gmmObsProbBimodal(e,a,t.states[0]):r.alpha[0]=i.gmmObsProbInput(e,t.states[0]):r.alpha[0]=i.gmmObsProb(e,t.states[0]),o+=r.alpha[0]}if(o>0){for(var u=0;u<n;u++)r.alpha[u]/=o;return 1/o}for(var c=0;c<n;c++)r.alpha[c]=1/n;return 1},o=r.hmmForwardUpdate=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=t.parameters.states,o=0;r.previous_alpha=r.alpha.slice(0);for(var s=0;s<n;s++){if(r.alpha[s]=0,0===t.parameters.transition_mode)for(var l=0;l<n;l++)r.alpha[s]+=r.previous_alpha[l]*r.transition[l*n+s];else r.alpha[s]+=r.previous_alpha[s]*r.transition[2*s],s>0?r.alpha[s]+=r.previous_alpha[s-1]*r.transition[2*(s-1)+1]:r.alpha[0]+=r.previous_alpha[n-1]*r.transition[2*n-1];t.states[s].components[0].bimodal?a.length>0?r.alpha[s]*=i.gmmObsProbBimodal(e,a,t.states[s]):r.alpha[s]*=i.gmmObsProbInput(e,t.states[s]):r.alpha[s]*=i.gmmObsProb(e,t.states[s]),o+=r.alpha[s]}if(o>1e-300){for(var u=0;u<n;u++)r.alpha[u]/=o;return 1/o}return 0},s=r.hmmUpdateAlphaWindow=function(e,t){var r=e.parameters.states;t.likeliest_state=0;var i=void 0;i=e.parameters.hierarchical?t.alpha_h[0][0]+t.alpha_h[1][0]:t.alpha[0];for(var a=1;a<r;a++)e.parameters.hierarchical?t.alpha_h[0][a]+t.alpha_h[1][a]>i&&(i=t.alpha_h[0][a]+t.alpha_h[1][a],t.likeliest_state=a):t.alpha[a]>i&&(i=t.alpha[a],t.likeliest_state=a);t.window_minindex=t.likeliest_state-Math.floor(r/2),t.window_maxindex=t.likeliest_state+Math.floor(r/2),t.window_minindex=t.window_minindex>=0?t.window_minindex:0,t.window_maxindex=t.window_maxindex<=r?t.window_maxindex:r,t.window_normalization_constant=0;for(var n=t.window_minindex;n<t.window_maxindex;n++)e.parameters.hierarchical?t.window_normalization_constant+=t.alpha_h[0][n]+t.alpha_h[1][n]:t.window_normalization_constant+=t.alpha[n]},l=r.hmmUpdateResults=function(e,t){var r=t.likelihood_buffer.length;t.likelihood_buffer[t.likelihood_buffer_index]=Math.log(t.instant_likelihood),t.likelihood_buffer_index=(t.likelihood_buffer_index+1)%r,t.log_likelihood=t.likelihood_buffer.reduce(function(e,t){return e+t},0),t.log_likelihood/=r,t.progress=0;for(var i=t.window_minindex;i<t.window_maxindex;i++)e.parameters.hierarchical?t.progress+=(t.alpha_h[0][i]+t.alpha_h[1][i]+t.alpha_h[2][i])*i/t.window_normalization_constant:t.progress+=t.alpha[i]*i/t.window_normalization_constant;t.progress/=e.parameters.states-1},u=r.hmmFilter=function(e,t,r){var i=0;if(r.forward_initialized)i=o(e,t,r);else{for(var u=0;u<r.likelihood_buffer.length;u++)r.likelihood_buffer[u]=0;i=n(e,t,r),r.forward_initialized=!0}return r.instant_likelihood=1/i,s(t,r),l(t,r),t.states[0].components[0].bimodal&&a(e,t,r),r.instant_likelihood},c=r.hhmmLikelihoodAlpha=function(e,t,r,i){if(e<0)for(var a=0;a<r.models.length;a++){t[a]=0;for(var n=0;n<3;n++)for(var o=0;o<r.models[a].parameters.states;o++)t[a]+=i.singleClassHmmModelResults[a].alpha_h[n][o]}else for(var s=0;s<r.models.length;s++){t[s]=0;for(var l=0;l<r.models[s].parameters.states;l++)t[s]+=i.singleClassHmmModelResults[s].alpha_h[e][l]}},f=r.hhmmForwardInit=function(e,t,r){for(var a=0,n=0;n<t.models.length;n++){for(var o=t.models[n],s=o.parameters.states,l=r.singleClassHmmModelResults[n],u=0;u<3;u++){l.alpha_h[u]=new Array(s);for(var c=0;c<s;c++)l.alpha_h[u][c]=0}if(0==o.parameters.transition_mode)for(var f=0;f<s;f++)t.shared_parameters.bimodal?l.alpha_h[0][f]=o.prior[f]*i.gmmObsProbInput(e,o.states[f]):l.alpha_h[0][f]=o.prior[f]*i.gmmObsProb(e,o.states[f]),l.instant_likelihood+=l.alpha_h[0][f];else l.alpha_h[0][0]=t.prior[n],t.shared_parameters.bimodal?l.alpha_h[0][0]*=i.gmmObsProbInput(e,o.states[0]):l.alpha_h[0][0]*=i.gmmObsProb(e,o.states[0]),l.instant_likelihood=l.alpha_h[0][0];a+=l.instant_likelihood}for(var h=0;h<t.models.length;h++)for(var d=t.models[h].parameters.states,p=0;p<3;p++)for(var m=0;m<d;m++)r.singleClassHmmModelResults[h].alpha_h[p][m]/=a;r.forward_initialized=!0},h=r.hhmmForwardUpdate=function(e,t,r){var a=t.models.length,n=0,o=0,s=void 0;c(1,r.frontier_v1,t,r),c(2,r.frontier_v2,t,r);for(var l=0;l<a;l++){var u=t.models[l],f=u.parameters.states,h=r.singleClassHmmModelResults[l];s=new Array(f);for(var d=0;d<f;d++)s[d]=0;if(0===u.parameters.transition_mode)for(var p=0;p<f;p++){for(var m=0;m<f;m++)s[p]+=u.transition[m*f+p]/(1-u.exitProbabilities[m])*h.alpha_h[0][m];for(var b=0;b<a;b++)s[p]+=u.prior[p]*(r.frontier_v1[b]*t.transition[b][l]+r.frontier_v2[b]*t.prior[l])}else{s[0]=u.transition[0]*h.alpha_h[0][0];for(var _=0;_<a;_++)s[0]+=r.frontier_v1[_]*t.transition[_][l]+r.frontier_v2[_]*t.prior[l];for(var v=1;v<f;v++)s[v]+=u.transition[2*v]/(1-u.exitProbabilities[v])*h.alpha_h[0][v],s[v]+=u.transition[2*(v-1)+1]/(1-u.exitProbabilities[v-1])*h.alpha_h[0][v-1];for(var y=0;y<3;y++)for(var g=0;g<f;g++)h.alpha_h[y][g]=0}h.exit_likelihood=0,h.instant_likelihood=0;for(var w=0;w<f;w++)o=t.shared_parameters.bimodal?i.gmmObsProbInput(e,u.states[w])*s[w]:i.gmmObsProb(e,u.states[w])*s[w],h.alpha_h[2][w]=t.exit_transition[l]*u.exitProbabilities[w]*o,h.alpha_h[1][w]=(1-t.exit_transition[l])*u.exitProbabilities[w]*o,h.alpha_h[0][w]=(1-u.exitProbabilities[w])*o,h.exit_likelihood+=h.alpha_h[1][w]+h.alpha_h[2][w],h.instant_likelihood+=h.alpha_h[0][w]+h.alpha_h[1][w]+h.alpha_h[2][w],n+=o;h.instant_likelihood=h.instant_likelihood>1e-180?h.instant_likelihood:1e-180,h.exit_ratio=h.exit_likelihood/h.instant_likelihood}for(var k=0;k<a;k++)for(var S=0;S<3;S++)for(var x=0;x<t.models[k].parameters.states;x++)r.singleClassHmmModelResults[k].alpha_h[S][x]/=n},d=r.hhmmUpdateResults=function(e,t){for(var r=0,i=0,a=0,n=0;n<e.models.length;n++){var o=t.singleClassHmmModelResults[n];t.instant_likelihoods[n]=o.instant_likelihood,t.smoothed_log_likelihoods[n]=o.log_likelihood,t.smoothed_likelihoods[n]=Math.exp(t.smoothed_log_likelihoods[n]),t.instant_normalized_likelihoods[n]=t.instant_likelihoods[n],t.smoothed_normalized_likelihoods[n]=t.smoothed_likelihoods[n],i+=t.instant_normalized_likelihoods[n],a+=t.smoothed_normalized_likelihoods[n],(0==n||t.smoothed_log_likelihoods[n]>r)&&(r=t.smoothed_log_likelihoods[n],t.likeliest=n)}for(var s=0;s<e.models.length;s++)t.instant_normalized_likelihoods[s]/=i,t.smoothed_normalized_likelihoods[s]/=a,t.smoothed_normalized_likelihoods[s]};r.hhmmFilter=function(e,t,r){if(t.configuration.default_parameters.hierarchical)r.forward_initialized?h(e,t,r):f(e,t,r);else for(var i=0;i<t.models.length;i++)r.instant_likelihoods[i]=u(e,t.models[i],r.singleClassHmmModelResults[i]);for(var n=0;n<t.models.length;n++)s(t.models[n],r.singleClassHmmModelResults[n]),l(t.models[n],r.singleClassHmmModelResults[n]);if(d(t,r),t.shared_parameters.bimodal){for(var o=t.shared_parameters.dimension-t.shared_parameters.dimension_input,c=0;c<t.models.length;c++)a(e,t.models[c],r.singleClassHmmModelResults[c]);if(0===t.configuration.multiClass_regression_estimator)r.output_values=r.singleClassHmmModelResults[r.likeliest].output_values.slice(0),r.output_covariance=r.singleClassHmmModelResults[r.likeliest].output_covariance.slice(0);else{for(var p=0;p<r.output_values.length;p++)r.output_values[p]=0;for(var m=0;m<r.output_covariance.length;m++)r.output_covariance[m]=0;for(var b=0;b<t.models.length;b++)for(var _=0;_<o;_++)if(r.output_values[_]+=r.smoothed_normalized_likelihoods[b]*r.singleClassHmmModelResults[b].output_values[_],0===t.configuration.covariance_mode)for(var v=0;v<o;v++)r.output_covariance[_*o+v]+=r.smoothed_normalized_likelihoods[b]*r.singleClassHmmModelResults[b].output_covariance[_*o+v];else r.output_covariance[_]+=r.smoothed_normalized_likelihoods[b]*r.singleClassHmmModelResults[b].output_covariance[_]}}}},{"./gmm-utils":286}],288:[function(e,t,r){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var a in r)i.call(r,a)&&(e[a]=r[a])}return e};var i=Object.prototype.hasOwnProperty},{}]},{},[3])(3)});